#!/usr/bin/env node
import{i as e,n as t,r as n,t as r}from"./picocolors-DQPB0Sb5.mjs";import{$ as i,A as a,B as o,C as s,D as c,E as l,J as u,K as d,M as f,O as p,Q as m,S as h,St as g,X as _,Y as v,Z as y,_ as b,_t as x,at as S,b as C,bt as w,ct as T,dt as ee,et as te,ft as E,g as ne,gt as D,h as O,ht as k,it as A,j as re,k as ie,lt as ae,m as oe,mt as se,nt as ce,ot as le,pt as ue,q as j,r as de,rt as fe,st as pe,t as M,tt as me,ut as he,v as ge,vt as _e,w as ve,xt as ye,y as be,yt as xe}from"./providers-EkAG9YaY.mjs";import{_ as Se,b as N,c as Ce,g as P,h as we,l as Te,m as Ee,p as De,s as Oe,u as ke,v as Ae,y as je}from"./warnings-b5xaLWaR.mjs";import{A as Me,N as Ne,O as Pe,P as Fe,S as Ie,_ as Le,a as Re,b as ze,g as Be,h as Ve,i as He,j as Ue,r as We,t as Ge,x as Ke,y as qe,z as Je}from"./errors-C7KsbF1p.mjs";import{Command as Ye,Option as Xe,program as Ze}from"commander";import{watch as Qe}from"node:fs";import{Visitor as $e,parse as et}from"oxc-parser";import tt from"node:os";import{buffer as nt}from"node:stream/consumers";import{createGzip as rt}from"node:zlib";var F=xe(),I=e(r(),1);const it=se({cwd:D().transform(e=>e)}),L={yes:new Xe(`--yes`,`Skip the confirmation prompt.`).default(!1),noCache:new Xe(`--no-cache`,`Disable caching of resolved git urls.`).default(!1),verbose:new Xe(`--verbose`,`Include debug logs.`).default(!1),overwrite:new Xe(`--overwrite`,`Overwrite files without prompting.`).default(!1),expand:new Xe(`-E, --expand`,`Expands the diff so you see the entire file.`).default(!1),maxUnchanged:new Xe(`--max-unchanged <lines>`,`Maximum unchanged lines that will show without being collapsed.`).argParser(e=>Number.parseInt(e,10)).default(5),cwd:new Xe(`--cwd <path>`,`The current working directory.`).default(process.cwd())};function at(e,t){return pe(e,t).match(e=>e,e=>st(new Be(e.zodError)))}async function ot(e){try{let t=await e;return t.isErr()?st(t.error):t.value}catch(e){e instanceof Ie&&st(e),st(new Ie(e instanceof Error?e.message:String(e),{suggestion:`Please try again.`}))}}function st(e){return ct(e)}function ct(e){Ee.message(),process.env.JSREPO_TRACE===`1`?(console.trace(e),process.exit(1)):(P(I.default.red(e.toString())),process.exit(1))}async function lt(e,t,n){if(Array.isArray(e.registry)){let r=[];for(let i of e.registry)r.push(await t(await ae(i,n)));return r}else return[await t(await ae(e.registry,n))]}function ut(e){return Array.isArray(e.registry)?e.registry.length>0:!0}var dt=44,ft=59,pt=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,mt=new Uint8Array(64),ht=new Uint8Array(128);for(let e=0;e<pt.length;e++){let t=pt.charCodeAt(e);mt[e]=t,ht[t]=e}function gt(e,t,n){let r=t-n;r=r<0?-r<<1|1:r<<1;do{let t=r&31;r>>>=5,r>0&&(t|=32),e.write(mt[t])}while(r>0);return t}var _t=1024*16,vt=typeof TextDecoder<`u`?new TextDecoder:typeof Buffer<`u`?{decode(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString()}}:{decode(e){let t=``;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}},yt=class{constructor(){this.pos=0,this.out=``,this.buffer=new Uint8Array(_t)}write(e){let{buffer:t}=this;t[this.pos++]=e,this.pos===_t&&(this.out+=vt.decode(t),this.pos=0)}flush(){let{buffer:e,out:t,pos:n}=this;return n>0?t+vt.decode(e.subarray(0,n)):t}};function bt(e){let t=new yt,n=0,r=0,i=0,a=0;for(let o=0;o<e.length;o++){let s=e[o];if(o>0&&t.write(ft),s.length===0)continue;let c=0;for(let e=0;e<s.length;e++){let o=s[e];e>0&&t.write(dt),c=gt(t,o[0],c),o.length!==1&&(n=gt(t,o[1],n),r=gt(t,o[2],r),i=gt(t,o[3],i),o.length!==4&&(a=gt(t,o[4],a)))}}return t.flush()}var xt=class e{constructor(t){this.bits=t instanceof e?t.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(e&31)}has(e){return!!(this.bits[e>>5]&1<<(e&31))}},St=class e{constructor(e,t,n){this.start=e,this.end=t,this.original=n,this.intro=``,this.outro=``,this.content=n,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(e){this.outro+=e}appendRight(e){this.intro+=e}clone(){let t=new e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,n){return this.content=e,n||(this.intro=``,this.outro=``),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}reset(){this.intro=``,this.outro=``,this.edited&&=(this.content=this.original,this.storeName=!1,!1)}split(t){let n=t-this.start,r=this.original.slice(0,n),i=this.original.slice(n);this.original=r;let a=new e(t,this.end,i);return a.outro=this.outro,this.outro=``,this.end=t,this.edited?(a.edit(``,!1),this.content=``):this.content=r,a.next=this.next,a.next&&(a.next.previous=a),a.previous=this,this.next=a,a}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,``),this.outro.length)return!0;let t=this.content.replace(e,``);if(t.length)return t!==this.content&&(this.split(this.start+t.length).edit(``,void 0,!0),this.edited&&this.edit(t,this.storeName,!0)),!0;if(this.edit(``,void 0,!0),this.intro=this.intro.replace(e,``),this.intro.length)return!0}trimStart(e){if(this.intro=this.intro.replace(e,``),this.intro.length)return!0;let t=this.content.replace(e,``);if(t.length){if(t!==this.content){let e=this.split(this.end-t.length);this.edited&&e.edit(t,this.storeName,!0),this.edit(``,void 0,!0)}return!0}else if(this.edit(``,void 0,!0),this.outro=this.outro.replace(e,``),this.outro.length)return!0}};function Ct(){return typeof globalThis<`u`&&typeof globalThis.btoa==`function`?e=>globalThis.btoa(unescape(encodeURIComponent(e))):typeof Buffer==`function`?e=>Buffer.from(e,`utf-8`).toString(`base64`):()=>{throw Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")}}const wt=Ct();var Tt=class{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=bt(e.mappings),e.x_google_ignoreList!==void 0&&(this.x_google_ignoreList=e.x_google_ignoreList),e.debugId!==void 0&&(this.debugId=e.debugId)}toString(){return JSON.stringify(this)}toUrl(){return`data:application/json;charset=utf-8;base64,`+wt(this.toString())}};function Et(e){let t=e.split(`
`),n=t.filter(e=>/^\t+/.test(e)),r=t.filter(e=>/^ {2,}/.test(e));if(n.length===0&&r.length===0)return null;if(n.length>=r.length)return`	`;let i=r.reduce((e,t)=>{let n=/^ +/.exec(t)[0].length;return Math.min(n,e)},1/0);return Array(i+1).join(` `)}function Dt(e,t){let n=e.split(/[/\\]/),r=t.split(/[/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length){let e=n.length;for(;e--;)n[e]=`..`}return n.concat(r).join(`/`)}const Ot=Object.prototype.toString;function kt(e){return Ot.call(e)===`[object Object]`}function At(e){let t=e.split(`
`),n=[];for(let e=0,r=0;e<t.length;e++)n.push(r),r+=t[e].length+1;return function(e){let t=0,r=n.length;for(;t<r;){let i=t+r>>1;e<n[i]?r=i:t=i+1}let i=t-1;return{line:i,column:e-n[i]}}}const jt=/\w/;var Mt=class{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,n,r){if(t.length){let i=t.length-1,a=t.indexOf(`
`,0),o=-1;for(;a>=0&&i>a;){let i=[this.generatedCodeColumn,e,n.line,n.column];r>=0&&i.push(r),this.rawSegments.push(i),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=a,a=t.indexOf(`
`,a+1)}let s=[this.generatedCodeColumn,e,n.line,n.column];r>=0&&s.push(r),this.rawSegments.push(s),this.advance(t.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(t));this.pending=null}addUneditedChunk(e,t,n,r,i){let a=t.start,o=!0,s=!1;for(;a<t.end;){if(n[a]===`
`)r.line+=1,r.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0,s=!1;else{if(this.hires||o||i.has(a)){let t=[this.generatedCodeColumn,e,r.line,r.column];this.hires===`boundary`?jt.test(n[a])?s||=(this.rawSegments.push(t),!0):(this.rawSegments.push(t),s=!1):this.rawSegments.push(t)}r.column+=1,this.generatedCodeColumn+=1,o=!1}a+=1}this.pending=null}advance(e){if(!e)return;let t=e.split(`
`);if(t.length>1){for(let e=0;e<t.length-1;e++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}};const Nt={insertLeft:!1,insertRight:!1,storeName:!1};var Pt=class e{constructor(e,t={}){let n=new St(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:``},intro:{writable:!0,value:``},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new xt},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:t.ignoreList},offset:{writable:!0,value:t.offset||0}}),this.byStart[0]=n,this.byEnd[e.length]=n}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if(typeof e!=`string`)throw TypeError(`outro content must be a string`);return this.outro+=e,this}appendLeft(e,t){if(e+=this.offset,typeof t!=`string`)throw TypeError(`inserted content must be a string`);this._split(e);let n=this.byEnd[e];return n?n.appendLeft(t):this.intro+=t,this}appendRight(e,t){if(e+=this.offset,typeof t!=`string`)throw TypeError(`inserted content must be a string`);this._split(e);let n=this.byStart[e];return n?n.appendRight(t):this.outro+=t,this}clone(){let t=new e(this.original,{filename:this.filename,offset:this.offset}),n=this.firstChunk,r=t.firstChunk=t.lastSearchedChunk=n.clone();for(;n;){t.byStart[r.start]=r,t.byEnd[r.end]=r;let e=n.next,i=e&&e.clone();i&&(r.next=i,i.previous=r,r=i),n=e}return t.lastChunk=r,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new xt(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(e){e||={};let t=Object.keys(this.storedNames),n=new Mt(e.hires),r=At(this.original);return this.intro&&n.advance(this.intro),this.firstChunk.eachNext(e=>{let i=r(e.start);e.intro.length&&n.advance(e.intro),e.edited?n.addEdit(0,e.content,i,e.storeName?t.indexOf(e.original):-1):n.addUneditedChunk(0,e,this.original,i,this.sourcemapLocations),e.outro.length&&n.advance(e.outro)}),this.outro&&n.advance(this.outro),{file:e.file?e.file.split(/[/\\]/).pop():void 0,sources:[e.source?Dt(e.file||``,e.source):e.file||``],sourcesContent:e.includeContent?[this.original]:void 0,names:t,mappings:n.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(e){return new Tt(this.generateDecodedMap(e))}_ensureindentStr(){this.indentStr===void 0&&(this.indentStr=Et(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),this.indentStr===null?`	`:this.indentStr}indent(e,t){let n=/^[^\r\n]/gm;if(kt(e)&&(t=e,e=void 0),e===void 0&&(this._ensureindentStr(),e=this.indentStr||`	`),e===``)return this;t||={};let r={};t.exclude&&(typeof t.exclude[0]==`number`?[t.exclude]:t.exclude).forEach(e=>{for(let t=e[0];t<e[1];t+=1)r[t]=!0});let i=t.indentStart!==!1,a=t=>i?`${e}${t}`:(i=!0,t);this.intro=this.intro.replace(n,a);let o=0,s=this.firstChunk;for(;s;){let t=s.end;if(s.edited)r[o]||(s.content=s.content.replace(n,a),s.content.length&&(i=s.content[s.content.length-1]===`
`));else for(o=s.start;o<t;){if(!r[o]){let t=this.original[o];t===`
`?i=!0:t!==`\r`&&i&&(i=!1,o===s.start?s.prependRight(e):(this._splitChunk(s,o),s=s.next,s.prependRight(e)))}o+=1}o=s.end,s=s.next}return this.outro=this.outro.replace(n,a),this}insert(){throw Error(`magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)`)}insertLeft(e,t){return Nt.insertLeft||=(console.warn(`magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead`),!0),this.appendLeft(e,t)}insertRight(e,t){return Nt.insertRight||=(console.warn(`magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead`),!0),this.prependRight(e,t)}move(e,t,n){if(e+=this.offset,t+=this.offset,n+=this.offset,n>=e&&n<=t)throw Error(`Cannot move a selection inside itself`);this._split(e),this._split(t),this._split(n);let r=this.byStart[e],i=this.byEnd[t],a=r.previous,o=i.next,s=this.byStart[n];if(!s&&i===this.lastChunk)return this;let c=s?s.previous:this.lastChunk;return a&&(a.next=o),o&&(o.previous=a),c&&(c.next=r),s&&(s.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=c,i.next=s||null,c||(this.firstChunk=r),s||(this.lastChunk=i),this}overwrite(e,t,n,r){return r||={},this.update(e,t,n,{...r,overwrite:!r.contentOnly})}update(e,t,n,r){if(e+=this.offset,t+=this.offset,typeof n!=`string`)throw TypeError(`replacement content must be a string`);if(this.original.length!==0){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(t>this.original.length)throw Error(`end is out of bounds`);if(e===t)throw Error(`Cannot overwrite a zero-length range – use appendLeft or prependRight instead`);this._split(e),this._split(t),r===!0&&(Nt.storeName||=(console.warn(`The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string`),!0),r={storeName:!0});let i=r===void 0?!1:r.storeName,a=r===void 0?!1:r.overwrite;if(i){let n=this.original.slice(e,t);Object.defineProperty(this.storedNames,n,{writable:!0,value:!0,enumerable:!0})}let o=this.byStart[e],s=this.byEnd[t];if(o){let e=o;for(;e!==s;){if(e.next!==this.byStart[e.end])throw Error(`Cannot overwrite across a split point`);e=e.next,e.edit(``,!1)}o.edit(n,i,!a)}else{let r=new St(e,t,``).edit(n,i);s.next=r,r.previous=s}return this}prepend(e){if(typeof e!=`string`)throw TypeError(`outro content must be a string`);return this.intro=e+this.intro,this}prependLeft(e,t){if(e+=this.offset,typeof t!=`string`)throw TypeError(`inserted content must be a string`);this._split(e);let n=this.byEnd[e];return n?n.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if(e+=this.offset,typeof t!=`string`)throw TypeError(`inserted content must be a string`);this._split(e);let n=this.byStart[e];return n?n.prependRight(t):this.outro=t+this.outro,this}remove(e,t){if(e+=this.offset,t+=this.offset,this.original.length!==0){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw Error(`Character is out of bounds`);if(e>t)throw Error(`end must be greater than start`);this._split(e),this._split(t);let n=this.byStart[e];for(;n;)n.intro=``,n.outro=``,n.edit(``),n=t>n.end?this.byStart[n.end]:null;return this}reset(e,t){if(e+=this.offset,t+=this.offset,this.original.length!==0){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw Error(`Character is out of bounds`);if(e>t)throw Error(`end must be greater than start`);this._split(e),this._split(t);let n=this.byStart[e];for(;n;)n.reset(),n=t>n.end?this.byStart[n.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:``}lastLine(){let e=this.outro.lastIndexOf(`
`);if(e!==-1)return this.outro.substr(e+1);let t=this.outro,n=this.lastChunk;do{if(n.outro.length>0){if(e=n.outro.lastIndexOf(`
`),e!==-1)return n.outro.substr(e+1)+t;t=n.outro+t}if(n.content.length>0){if(e=n.content.lastIndexOf(`
`),e!==-1)return n.content.substr(e+1)+t;t=n.content+t}if(n.intro.length>0){if(e=n.intro.lastIndexOf(`
`),e!==-1)return n.intro.substr(e+1)+t;t=n.intro+t}}while(n=n.previous);return e=this.intro.lastIndexOf(`
`),e===-1?this.intro+t:this.intro.substr(e+1)+t}slice(e=0,t=this.original.length-this.offset){if(e+=this.offset,t+=this.offset,this.original.length!==0){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}let n=``,r=this.firstChunk;for(;r&&(r.start>e||r.end<=e);){if(r.start<t&&r.end>=t)return n;r=r.next}if(r&&r.edited&&r.start!==e)throw Error(`Cannot use replaced character ${e} as slice start anchor.`);let i=r;for(;r;){r.intro&&(i!==r||r.start===e)&&(n+=r.intro);let a=r.start<t&&r.end>=t;if(a&&r.edited&&r.end!==t)throw Error(`Cannot use replaced character ${t} as slice end anchor.`);let o=i===r?e-r.start:0,s=a?r.content.length+t-r.end:r.content.length;if(n+=r.content.slice(o,s),r.outro&&(!a||r.end===t)&&(n+=r.outro),a)break;r=r.next}return n}snip(e,t){let n=this.clone();return n.remove(0,e),n.remove(t,n.original.length),n}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk,n=t,r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);if(t=r?this.byStart[t.end]:this.byEnd[t.start],t===n)return;n=t}}_splitChunk(e,t){if(e.edited&&e.content.length){let n=At(this.original)(t);throw Error(`Cannot split a chunk that has already been edited (${n.line}:${n.column} – "${e.original}")`)}let n=e.split(t);return this.byEnd[t]=e,this.byStart[t]=n,this.byEnd[n.end]=n,e===this.lastChunk&&(this.lastChunk=n),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1;while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do t+=e.intro.length+e.content.length+e.outro.length;while(e=e.next);return t}trimLines(){return this.trim(`[\\r\\n]`)}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){let t=RegExp((e||`\\s`)+`+$`);if(this.outro=this.outro.replace(t,``),this.outro.length)return!0;let n=this.lastChunk;do{let e=n.end,r=n.trimEnd(t);if(n.end!==e&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),r)return!0;n=n.previous}while(n);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){let t=RegExp(`^`+(e||`\\s`)+`+`);if(this.intro=this.intro.replace(t,``),this.intro.length)return!0;let n=this.firstChunk;do{let e=n.end,r=n.trimStart(t);if(n.end!==e&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),r)return!0;n=n.next}while(n);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(e,t){function n(e,n){return typeof t==`string`?t.replace(/\$(\$|&|\d+)/g,(t,n)=>n===`$`?`$`:n===`&`?e[0]:+n<e.length?e[+n]:`$${n}`):t(...e,e.index,n,e.groups)}function r(e,t){let n,r=[];for(;n=e.exec(t);)r.push(n);return r}if(e.global)r(e,this.original).forEach(e=>{if(e.index!=null){let t=n(e,this.original);t!==e[0]&&this.overwrite(e.index,e.index+e[0].length,t)}});else{let t=this.original.match(e);if(t&&t.index!=null){let e=n(t,this.original);e!==t[0]&&this.overwrite(t.index,t.index+t[0].length,e)}}return this}_replaceString(e,t){let{original:n}=this,r=n.indexOf(e);return r!==-1&&(typeof t==`function`&&(t=t(e,r,n)),e!==t&&this.overwrite(r,r+e.length,t)),this}replace(e,t){return typeof e==`string`?this._replaceString(e,t):this._replaceRegexp(e,t)}_replaceAllString(e,t){let{original:n}=this,r=e.length;for(let i=n.indexOf(e);i!==-1;i=n.indexOf(e,i+r)){let e=n.slice(i,i+r),a=t;typeof t==`function`&&(a=t(e,i,n)),e!==a&&this.overwrite(i,i+r,a)}return this}replaceAll(e,t){if(typeof e==`string`)return this._replaceAllString(e,t);if(!e.global)throw TypeError(`MagicString.prototype.replaceAll called with a non-global RegExp argument`);return this._replaceRegexp(e,t)}},Ft=class{withinExportDefaultDeclaration=!1;withinDefineConfig=!1;withinMainObjectExpression=!1;withinIgnoredProperty=!1;configKeyPropertyDeclaration=null;mainObjectExpression=null};async function It(e,{config:t}){if(Object.keys(e).length===0)return(0,F.ok)(t.code);let n=await et(t.path,t.code),r=new Pt(t.code),i=new Ft;if(i.withinDefineConfig=!0,new $e({ExportDefaultDeclaration(){i.withinExportDefaultDeclaration=!0},"ExportDefaultDeclaration:exit"(){i.withinExportDefaultDeclaration=!1},ObjectExpression(e){i.withinExportDefaultDeclaration&&i.withinDefineConfig&&(i.withinIgnoredProperty||(i.withinMainObjectExpression||=(i.mainObjectExpression=e,!0)))},CallExpression(e){i.withinExportDefaultDeclaration&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(i.withinDefineConfig=!0)},"CallExpression:exit"(e){i.withinDefineConfig&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(i.withinDefineConfig=!1,i.withinMainObjectExpression=!1)},Property(e){if(i.withinDefineConfig&&i.withinMainObjectExpression&&!i.withinIgnoredProperty){if(e.key.type===`Identifier`&&e.key.name!==`paths`){i.withinIgnoredProperty=!0;return}if(e.key.type===`Identifier`&&(e.kind===`init`||e.kind===`get`)&&e.key.name===`paths`){if(e.value.type!==`ObjectExpression`)return(0,F.err)(new Ve({key:`paths`,type:`object`}));i.configKeyPropertyDeclaration=e}}},"Property:exit"(e){if(i.withinDefineConfig&&e.key.type===`Identifier`&&e.key.name!==`paths`){i.withinIgnoredProperty=!1;return}}}).visit(n.program),i.configKeyPropertyDeclaration!==null){if(i.configKeyPropertyDeclaration.value.type!==`ObjectExpression`)return(0,F.err)(new Ve({key:`paths`,type:`object`}));let t=new Map;for(let n of i.configKeyPropertyDeclaration.value.properties)if(n.type===`Property`&&(n.key.type===`Literal`||n.key.type===`Identifier`)){let i=r.slice(n.key.start,n.key.end).replaceAll(/['"]/g,``);e[i]!==void 0&&t.set(i,n)}let n=r.slice(i.configKeyPropertyDeclaration.value.start,i.configKeyPropertyDeclaration.value.end);if(i.configKeyPropertyDeclaration.value.properties.length===0)r.overwrite(i.configKeyPropertyDeclaration.value.start,i.configKeyPropertyDeclaration.value.end,`{\n${Object.entries(e).map(([e,t])=>`\t\t${a.test(e)?e:`'${e}'`}: '${t}'`).join(`,
`)}\n\t}`);else{let o=i.configKeyPropertyDeclaration.value.properties[i.configKeyPropertyDeclaration.value.properties.length-1],s=n.lastIndexOf(`,`),c=s===-1?-1:s+i.configKeyPropertyDeclaration.value.start+1,l=!1;l=!(c!==-1&&c>o.end);for(let[n,i]of Object.entries(e)){let a=t.get(n);a!==void 0&&(r.overwrite(a.value.start,a.value.end,`'${i}'`),delete e[n])}Object.keys(e).length>0&&r.appendRight(l?o.end:c,`${l?`,`:``}\n${Object.entries(e).map(([e,t])=>`\t\t${a.test(e)?e:`'${e}'`}: '${t}'`).join(`,
`)}`)}}else{if(i.mainObjectExpression===null)return(0,F.err)(new He);let t=r.slice(i.mainObjectExpression.start,i.mainObjectExpression.end).lastIndexOf(`,`),n=t===-1?-1:t+i.mainObjectExpression.start+1;if(i.mainObjectExpression.properties.length===0)r.appendRight(i.mainObjectExpression.start+1,`\n\tpaths: {\n${Object.entries(e).map(([e,t])=>`\t\t${a.test(e)?e:`'${e}'`}: '${t}'`).join(`,
`)}\n\t}`);else{let t=i.mainObjectExpression.properties[i.mainObjectExpression.properties.length-1],o=!1;o=!(n!==-1&&n>t.end),r.appendRight(o?t.end:n,`${o?`,`:``}\n\tpaths: {\n${Object.entries(e).map(([e,t])=>`\t\t${a.test(e)?e:`'${e}'`}: '${t}'`).join(`,
`)}\n\t}`)}}return(0,F.ok)(r.toString())}const Lt=it.extend({yes:E(),all:E(),overwrite:E(),verbose:E(),registry:D().optional(),withExamples:E(),withDocs:E(),withTests:E(),expand:E(),maxUnchanged:ue()}),Rt=new Ye(`add`).description(`Add items to your project.`).argument(`[items...]`,`Names of the items you want to add to your project. ex: (utils/math, github/ieedan/std/utils/math)`).option(`--registry <registry>`,`The registry to add items from.`,void 0).option(`--all`,`Add all items from every registry.`,!1).option(`--with-examples`,`Add items with examples.`,!1).option(`--with-docs`,`Add items with docs.`,!1).option(`--with-tests`,`Add items with tests.`,!1).addOption(L.cwd).addOption(L.yes).addOption(L.verbose).addOption(L.overwrite).addOption(L.expand).addOption(L.maxUnchanged).action(async(e,t)=>{let n=at(Lt,t);j();let r=await f({cwd:n.cwd,promptForContinueIfNull:!n.yes});we(Bt(await ot(zt(e,{...n,cwd:r?x.dirname(r.path):n.cwd},r))))});async function zt(e,t,n){let{verbose:r,spinner:i}=d({options:t}),a=n?.config,o=a?.providers??M,c=t.registry?[t.registry]:a?.registries??[],l;if(e.length===0||t.all){if(t.all&&e.length>0)for(let t of e)o.some(e=>e.matches(t))||st(new qe(t));let n=e.length>0?e:c;if(n.length===0)return(0,F.err)(new Je);i.start(`Retrieving manifest${c.length>1?`s`:``} from ${I.default.cyan(c.join(`, `))}`);let r=await C(n,{cwd:t.cwd,providers:o});if(r.isErr())return i.stop(`Failed to retrieve manifests`),(0,F.err)(r.error);i.stop(`Retrieved manifest${c.length>1?`s`:``} from ${I.default.cyan(c.join(`, `))}`);let a=r.value,s=Array.from(a.entries()).flatMap(([e,t])=>t.manifest.items.filter(e=>e).map(e=>({item:e,registry:t})));if(t.all)l=s;else{let e=await ke({message:`Which items would you like to add?`,options:s.filter(e=>(e.item.add??`when-added`)===`when-added`&&e.item.name!==`index`).map(e=>{let t=`${e.registry.url}/${e.item.name}`,n=a.size>1?`${I.default.cyan(e.registry.url)}/${e.item.name}`:e.item.name;return{label:n,value:t,hint:e.item.description?.length??0>=process.stdout.columns-n.length-12?`${e.item.description?.slice(0,process.stdout.columns-n.length-12).trim()}...`:e.item.description}}),maxItems:process.stdout.rows-10,required:!0});N(e)&&(P(`Canceled!`),process.exit(0)),l=s.filter(t=>e.includes(`${t.registry.url}/${t.item.name}`)).map(e=>({registry:e.registry,item:e.item}))}}else{let n=b(e,{providers:o,registries:c});if(n.isErr())return(0,F.err)(n.error);let{wantedItems:r,neededRegistries:a}=n.value;i.start(`Retrieving manifest${a.length>1?`s`:``} from ${I.default.cyan(a.join(`, `))}`);let s=await C(a,{cwd:t.cwd,providers:o});if(s.isErr())return i.stop(`Failed to retrieve manifests`),(0,F.err)(s.error);i.stop(`Retrieved manifest${a.length>1?`s`:``} from ${I.default.cyan(a.join(`, `))}`);let u=s.value,d=await h(r,{resolvedRegistries:u,nonInteractive:t.yes});if(d.isErr())return(0,F.err)(d.error);l=d.value}i.start(`Fetching ${I.default.cyan(l.map(e=>e.item.name).join(`, `))}...`);let u=await be(l,{options:t});if(u.isErr())return i.stop(`Failed to fetch items`),(0,F.err)(u.error);i.stop(`Fetched ${I.default.cyan(l.map(e=>e.item.name).join(`, `))}`);let f=u.value,p=await oe({items:f,config:a,options:t});if(p.isErr())return(0,F.err)(p.error);let{itemPaths:m,updatedPaths:g}=p.value,_=await ge({configResult:n,options:t,itemPaths:m,items:f});if(_.isErr())return(0,F.err)(_.error);let{neededDependencies:x,neededEnvVars:S,neededFiles:w}=_.value,T=await s({files:w,options:t});if(T.isErr())return(0,F.err)(T.error);let ee=T.value;if(n&&g){let e=fe(n.path);if(e.isErr())return(0,F.err)(e.error);let t=e.value,r=await It(a?.paths??g,{config:{path:n.path,code:t}});if(r.isErr())return(0,F.err)(r.error);let i=A(n.path,r.value);if(i.isErr())return(0,F.err)(i.error)}let te;if(S){let e=await v(S,{options:t});if(e.isErr())return(0,F.err)(e.error);te=e.value}return(0,F.ok)({items:f,updatedDependencies:await y(x,{options:t,config:a}),updatedEnvVars:te,updatedFiles:ee,updatedPaths:g})}function Bt(e){let t=[`Added ${I.default.cyan(e.items.map(e=>e.name).join(`, `))} to your project.`];return e.updatedFiles.length>0&&t.push(`    Updated ${I.default.green(e.updatedFiles.length)} ${e.updatedFiles.length===1?`file`:`files`}.`),e.updatedPaths&&Object.keys(e.updatedPaths).length>0&&t.push(`    Updated ${I.default.green(Object.keys(e.updatedPaths).length)} ${Object.keys(e.updatedPaths).length===1?`path`:`paths`}.`),e.updatedDependencies.dependencies.length>0&&(e.updatedDependencies.installed?t.push(`    Installed ${I.default.green(e.updatedDependencies.dependencies.length)} ${e.updatedDependencies.dependencies.length===1?`dependency`:`dependencies`}.`):t.push(`    Skipped installation of ${I.default.cyan(e.updatedDependencies.dependencies.map(e=>`${e.name}${e.version?`@${e.version}`:``}`).join(`, `))}.`)),e.updatedEnvVars&&Object.keys(e.updatedEnvVars).length>0&&t.push(`    Updated ${I.default.green(Object.keys(e.updatedEnvVars).length)} ${Object.keys(e.updatedEnvVars).length===1?`environment variable`:`environment variables`}.`),t.join(`
`)}const Vt=it.extend({token:D().optional(),logout:E(),verbose:E()}),Ht=new Ye(`auth`).description(`Authenticate to a provider or registry.`).argument(`[provider]`,`The provider to authenticate to.`).option(`--logout`,`Execute the logout flow.`,!1).option(`--token <token>`,`The token to use for authenticating to this provider.`).addOption(L.cwd).addOption(L.verbose).action(async(e,t)=>{let n=at(Vt,t);j(),we(Kt(await ot(Ut(e,n,(await f({cwd:n.cwd,promptForContinueIfNull:!1}))?.config))))});async function Ut(e,t,n){let{verbose:r,spinner:i}=d({options:t}),a=(n?.providers??M).filter(e=>e.auth!==void 0),o=n?.registries??[],s=new Map;for(let e of o){let t=a.find(t=>t.matches(e));if(!t)return(0,F.err)(new Ne(e));s.set(t.name,[...s.get(t.name)??[],e])}let c;if(e){if(c=a.find(t=>t.name===e),!c)return(0,F.err)(new Ne(e))}else{let e=await Te({message:`Select a provider to authenticate to.`,options:a.map(e=>({label:e.name,value:e.name}))});N(e)&&(P(`Canceled!`),process.exit(0)),c=a.find(t=>t.name===e)}return t.logout?await Wt(c):await Gt(c,{config:n,options:t})}async function Wt(e){let t=new ve;if(e.auth.tokenStoredFor===`registry`){let n=t.getProviderRegistryTokens(e);if(Object.keys(n).length===0)return(0,F.ok)({type:`logout`,provider:e.name,registry:void 0});let r=await Te({message:`Select a registry to logout of.`,options:Object.keys(n).map(e=>({label:e,value:e}))});return N(r)&&(P(`Canceled!`),process.exit(0)),t.delete(e,r),(0,F.ok)({type:`logout`,provider:e.name,registry:r})}else return t.delete(e,void 0),(0,F.ok)({type:`logout`,provider:e.name,registry:void 0})}async function Gt(e,{config:t,options:n}){let r=new ve;if(e.auth.tokenStoredFor===`registry`){let i=t?.registries??[],a;if(i.length===0){let t=await Ae({message:`Enter the name of the registry to authenticate to.`,validate(t){if(!t||t.trim()===``)return`Please provide a value`;if(!e.matches(t))return`Registry cannot be parsed by this provider`}});N(t)&&(P(`Canceled!`),process.exit(0)),a=t}else{let t=await Te({message:`Select a registry to authenticate to.`,options:[...i.map(e=>({label:e,value:e})),{label:`Other`,value:`other`}]});if(N(t)&&(P(`Canceled!`),process.exit(0)),t===`other`){let t=await Ae({message:`Enter the name of the registry to authenticate to.`,validate(t){if(!t||t.trim()===``)return`Please provide a value`;if(!e.matches(t))return`Registry cannot be parsed by this provider`}});N(t)&&(P(`Canceled!`),process.exit(0)),a=t}else a=t}let o=n.token;if(!o)if(e.auth.getToken)o=await e.auth.getToken({registry:a,p:{confirm:je,multiselect:De,select:Te,text:Ae,log:Ee,spinner:Ce,groupMultiselect:Oe,password:Se,isCancel:N,cancel:P,color:I.default}});else{let e=await Se({message:`Enter your token for ${I.default.cyan(a)}`,validate(e){if(!e||e.trim()===``)return`Please provide a value`}});N(e)&&(P(`Canceled!`),process.exit(0)),o=e}return r.set(e,a,o),(0,F.ok)({type:`login`,provider:e.name,registry:a})}else{let t=n.token;if(!t)if(e.auth.getToken)t=await e.auth.getToken({p:{confirm:je,multiselect:De,select:Te,text:Ae,log:Ee,spinner:Ce,groupMultiselect:Oe,password:Se,isCancel:N,cancel:P,color:I.default}});else{let n=await Se({message:`Enter your token for ${I.default.cyan(e.name)}`,validate(e){if(!e||e.trim()===``)return`Please provide a value`}});N(n)&&(P(`Canceled!`),process.exit(0)),t=n}return r.set(e,void 0,t),(0,F.ok)({type:`login`,provider:e.name})}}function Kt({type:e,provider:t,registry:n}){let r=n?`${I.default.cyan(n)}`:`${I.default.cyan(t)}`;return e===`login`?`Logged in to ${r}.`:`Logged out of ${r}.`}const qt=it.extend({watch:E(),debounce:ue()}),Jt=new Ye(`build`).description(`Build your registry.`).addOption(L.cwd).option(`-w, --watch`,`Watch for changes and rebuild automatically`,!1).option(`-d, --debounce <ms>`,`How long to wait before building again after a change is detected (watch mode only)`,e=>Number.parseInt(e,10),100).action(async e=>{let t=at(qt,e),n=await f({cwd:t.cwd,promptForContinueIfNull:!1});if(n||st(new We(t.cwd)),t.watch)await Xt(t,n);else{j();let e=await ot(Yt({...t,cwd:n?x.dirname(n.path):t.cwd},n.config));we(Qt(e,{type:`build`})),e.results.some(e=>e.isErr())&&process.exit(1)}});async function Yt(e,t){if(!ut(t))return(0,F.err)(new Fe);let n=performance.now();return(0,F.ok)({results:await lt(t,async n=>{n.outputs=n.outputs??[];let r=performance.now(),i=await ie(n);if(i.isErr())return(0,F.err)(i.error);n.outputs.length>0&&await Promise.all(n.outputs.map(t=>t.clean({cwd:e.cwd})));let a=await p(n,{options:e,config:t});if(a.isErr())return(0,F.err)(a.error);let o=a.value;if(n.outputs.length===0)return(0,F.err)(new Me({registryName:n.name}));await Promise.all(n.outputs.map(t=>t.output(o,{cwd:e.cwd})));let s=performance.now()-r;return(0,F.ok)({name:n.name,time:s,items:o.items.length,files:o.items.flatMap(e=>e.files.length).length,outputs:n.outputs.length})},{cwd:e.cwd}),duration:performance.now()-n})}async function Xt(e,t){let n=t.config,r=new AbortController,i=new Map,a=!0,o=()=>{u&&(process.stdout.clearLine(0),process.stdout.cursorTo(0))},s=(e,t=!1)=>{u?(o(),process.stdout.write(e)):t&&process.stdout.write(`${e}\n`)},c=T(async({options:e,config:t})=>{if(a)return;a=!0,s(I.default.dim(`Building...`));let n=await Yt(e,t);o(),n.isErr()?process.stdout.write(`Error building registry: ${I.default.red(n.error.message)}\n`):process.stdout.write(`${Qt(n.value,{type:`build`})}\n`),s(I.default.dim(`${u?`
`:``}Watching for changes...`)),a=!1},e.debounce);i.set(t.path,Zt(t.path,{signal:r.signal,onChange:async()=>{let r=await re({cwd:x.dirname(t.path)});r.isErr()||(n=r.value,await l(),c({options:e,config:n}))}}));async function l(){await lt(t.config,async t=>{let a=t.items.flatMap(t=>t.files.map(t=>S(e.cwd,t.path)));for(let t of a)i.has(t)||ce(t)&&i.set(t,Zt(t,{signal:r.signal,onChange:()=>c({options:e,config:n})}))},{cwd:e.cwd})}l(),s(`Building...`,!0);let d=await Yt(e,t.config);o(),d.isErr()?process.stdout.write(`Error building registry: ${I.default.red(d.error.message)}\n`):process.stdout.write(`${Qt(d.value,{type:`build`})}\n`),s(I.default.dim(`${u?`
`:``}Watching for changes...`)),a=!1,process.on(`SIGINT`,()=>{r.abort()}),process.on(`SIGTERM`,()=>{r.abort()})}function Zt(e,{onChange:t,signal:n}){return Qe(e,{recursive:!0,signal:n},e=>{e===`change`&&t?.()})}function Qt({results:e,duration:t},{type:n}){return`${n===`build`?`Finished`:`Rebuilt`} in ${I.default.green(`${t.toFixed(2)}ms`)}
${e.map(e=>`   ${$t(e)}`).join(`
`)}`}function $t(e){if(e.isErr())return`${I.default.cyan(e.error.registryName)}: ${I.default.red(e.error.toString())}`;let{name:t,outputs:n,time:r,items:i,files:a}=e.value;return`${I.default.cyan(t)}: Created ${I.default.green(n.toString())} ${n>1?`outputs`:`output`} in ${I.default.green(`${r.toFixed(2)}ms`)} with ${I.default.green(i.toString())} ${i>1?`items`:`item`} and ${I.default.green(a.toString())} ${a>1?`files`:`file`}.`}var en={reset:[0,0],bold:[1,22,`\x1B[22m\x1B[1m`],dim:[2,22,`\x1B[22m\x1B[2m`],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function tn(e){return String(e)}tn.open=``,tn.close=``;function nn(){let e=typeof process<`u`?process:void 0,t=e?.env||{},n=t.FORCE_TTY!==`false`,r=e?.argv||[];return!(`NO_COLOR`in t||r.includes(`--no-color`))&&(`FORCE_COLOR`in t||r.includes(`--color`)||e?.platform===`win32`||n&&t.TERM!==`dumb`||`CI`in t)||typeof window<`u`&&!!window.chrome}function rn(){let e=nn(),t=(e,t,n,r)=>{let i=``,a=0;do i+=e.substring(a,r)+n,a=r+t.length,r=e.indexOf(t,a);while(~r);return i+e.substring(a)},n=(e,n,r=e)=>{let i=i=>{let a=String(i),o=a.indexOf(n,e.length);return~o?e+t(a,n,r,o)+n:e+a+n};return i.open=e,i.close=n,i},r={isColorSupported:e},i=e=>`\x1B[${e}m`;for(let t in en){let a=en[t];r[t]=e?n(i(a[0]),i(a[1]),a[2]):tn}return r}var R=rn();function an(e,t){return t.forEach(function(t){t&&typeof t!=`string`&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!==`default`&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}function on(e,t){let n=Object.keys(e),r=t===null?n:n.sort(t);if(Object.getOwnPropertySymbols)for(let t of Object.getOwnPropertySymbols(e))Object.getOwnPropertyDescriptor(e,t).enumerable&&r.push(t);return r}function sn(e,t,n,r,i,a,o=`: `){let s=``,c=0,l=e.next();if(!l.done){s+=t.spacingOuter;let u=n+t.indent;for(;!l.done;){if(s+=u,c++===t.maxWidth){s+=`…`;break}let n=a(l.value[0],t,u,r,i),d=a(l.value[1],t,u,r,i);s+=n+o+d,l=e.next(),l.done?t.min||(s+=`,`):s+=`,${t.spacingInner}`}s+=t.spacingOuter+n}return s}function cn(e,t,n,r,i,a){let o=``,s=0,c=e.next();if(!c.done){o+=t.spacingOuter;let l=n+t.indent;for(;!c.done;){if(o+=l,s++===t.maxWidth){o+=`…`;break}o+=a(c.value,t,l,r,i),c=e.next(),c.done?t.min||(o+=`,`):o+=`,${t.spacingInner}`}o+=t.spacingOuter+n}return o}function ln(e,t,n,r,i,a){let o=``;e=e instanceof ArrayBuffer?new DataView(e):e;let s=e=>e instanceof DataView,c=s(e)?e.byteLength:e.length;if(c>0){o+=t.spacingOuter;let l=n+t.indent;for(let n=0;n<c;n++){if(o+=l,n===t.maxWidth){o+=`…`;break}(s(e)||n in e)&&(o+=a(s(e)?e.getInt8(n):e[n],t,l,r,i)),n<c-1?o+=`,${t.spacingInner}`:t.min||(o+=`,`)}o+=t.spacingOuter+n}return o}function un(e,t,n,r,i,a){let o=``,s=on(e,t.compareKeys);if(s.length>0){o+=t.spacingOuter;let c=n+t.indent;for(let n=0;n<s.length;n++){let l=s[n],u=a(l,t,c,r,i),d=a(e[l],t,c,r,i);o+=`${c+u}: ${d}`,n<s.length-1?o+=`,${t.spacingInner}`:t.min||(o+=`,`)}o+=t.spacingOuter+n}return o}const dn=typeof Symbol==`function`&&Symbol.for?Symbol.for(`jest.asymmetricMatcher`):1267621,fn={serialize:(e,t,n,r,i,a)=>{let o=e.toString();if(o===`ArrayContaining`||o===`ArrayNotContaining`)return++r>t.maxDepth?`[${o}]`:`${o+` `}[${ln(e.sample,t,n,r,i,a)}]`;if(o===`ObjectContaining`||o===`ObjectNotContaining`)return++r>t.maxDepth?`[${o}]`:`${o+` `}{${un(e.sample,t,n,r,i,a)}}`;if(o===`StringMatching`||o===`StringNotMatching`||o===`StringContaining`||o===`StringNotContaining`)return o+` `+a(e.sample,t,n,r,i);if(typeof e.toAsymmetricMatcher!=`function`)throw TypeError(`Asymmetric matcher ${e.constructor.name} does not implement toAsymmetricMatcher()`);return e.toAsymmetricMatcher()},test:e=>e&&e.$$typeof===dn},pn=new Set([`DOMStringMap`,`NamedNodeMap`]),mn=/^(?:HTML\w*Collection|NodeList)$/;function hn(e){return pn.has(e)||mn.test(e)}const gn=e=>e&&e.constructor&&!!e.constructor.name&&hn(e.constructor.name);function _n(e){return e.constructor.name===`NamedNodeMap`}const vn={serialize:(e,t,n,r,i,a)=>{let o=e.constructor.name;return++r>t.maxDepth?`[${o}]`:(t.min?``:o+` `)+(pn.has(o)?`{${un(_n(e)?[...e].reduce((e,t)=>(e[t.name]=t.value,e),{}):{...e},t,n,r,i,a)}}`:`[${ln([...e],t,n,r,i,a)}]`)},test:gn};function yn(e){return e.replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`)}function bn(e,t,n,r,i,a,o){let s=r+n.indent,c=n.colors;return e.map(e=>{let l=t[e];if(typeof l==`string`&&l[0]===`_`&&l.startsWith(`__vitest_`)&&l.match(/__vitest_\d+__/))return``;let u=o(l,n,s,i,a);return typeof l!=`string`&&(u.includes(`
`)&&(u=n.spacingOuter+s+u+n.spacingOuter+r),u=`{${u}}`),`${n.spacingInner+r+c.prop.open+e+c.prop.close}=${c.value.open}${u}${c.value.close}`}).join(``)}function xn(e,t,n,r,i,a){return e.map(e=>t.spacingOuter+n+(typeof e==`string`?Cn(e,t):a(e,t,n,r,i))).join(``)}function Sn(e,t,n,r,i,a){return t.printShadowRoot===!1?``:[`${t.spacingOuter+n}#shadow-root`,xn(e,t,n+t.indent,r,i,a)].join(``)}function Cn(e,t){let n=t.colors.content;return n.open+yn(e)+n.close}function wn(e,t){let n=t.colors.comment;return`${n.open}<!--${yn(e)}-->${n.close}`}function Tn(e,t,n,r,i){let a=r.colors.tag;return`${a.open}<${e}${t&&a.close+t+r.spacingOuter+i+a.open}${n?`>${a.close}${n}${r.spacingOuter}${i}${a.open}</${e}`:`${t&&!r.min?``:` `}/`}>${a.close}`}function En(e,t){let n=t.colors.tag;return`${n.open}<${e}${n.close} …${n.open} />${n.close}`}const Dn=/^(?:(?:HTML|SVG)\w*)?Element$/;function On(e){try{return typeof e.hasAttribute==`function`&&e.hasAttribute(`is`)}catch{return!1}}function kn(e){let t=e.constructor.name,{nodeType:n,tagName:r}=e,i=typeof r==`string`&&r.includes(`-`)||On(e);return n===1&&(Dn.test(t)||i)||n===3&&t===`Text`||n===8&&t===`Comment`||n===11&&t===`DocumentFragment`}const An=e=>e?.constructor?.name&&kn(e);function jn(e){return e.nodeType===3}function Mn(e){return e.nodeType===8}function Nn(e){return e.nodeType===11}const Pn={serialize:(e,t,n,r,i,a)=>{if(jn(e))return Cn(e.data,t);if(Mn(e))return wn(e.data,t);let o=Nn(e)?`DocumentFragment`:e.tagName.toLowerCase();return++r>t.maxDepth?En(o,t):Tn(o,bn(Nn(e)?[]:Array.from(e.attributes,e=>e.name).sort(),Nn(e)?{}:[...e.attributes].reduce((e,t)=>(e[t.name]=t.value,e),{}),t,n+t.indent,r,i,a),(Nn(e)||!e.shadowRoot?``:Sn(Array.prototype.slice.call(e.shadowRoot.children),t,n+t.indent,r,i,a))+xn(Array.prototype.slice.call(e.childNodes||e.children),t,n+t.indent,r,i,a),t,n)},test:An},Fn=`@@__IMMUTABLE_ORDERED__@@`,In=e=>`Immutable.${e}`,Ln=e=>`[${e}]`;function Rn(e,t,n,r,i,a,o){return++r>t.maxDepth?Ln(In(o)):`${In(o)+` `}{${sn(e.entries(),t,n,r,i,a)}}`}function zn(e){let t=0;return{next(){if(t<e._keys.length){let n=e._keys[t++];return{done:!1,value:[n,e.get(n)]}}return{done:!0,value:void 0}}}}function Bn(e,t,n,r,i,a){let o=In(e._name||`Record`);return++r>t.maxDepth?Ln(o):`${o+` `}{${sn(zn(e),t,n,r,i,a)}}`}function Vn(e,t,n,r,i,a){let o=In(`Seq`);return++r>t.maxDepth?Ln(o):e[`@@__IMMUTABLE_KEYED__@@`]?`${o+` `}{${e._iter||e._object?sn(e.entries(),t,n,r,i,a):`…`}}`:`${o+` `}[${e._iter||e._array||e._collection||e._iterable?cn(e.values(),t,n,r,i,a):`…`}]`}function Hn(e,t,n,r,i,a,o){return++r>t.maxDepth?Ln(In(o)):`${In(o)+` `}[${cn(e.values(),t,n,r,i,a)}]`}const Un={serialize:(e,t,n,r,i,a)=>e[`@@__IMMUTABLE_MAP__@@`]?Rn(e,t,n,r,i,a,e[Fn]?`OrderedMap`:`Map`):e[`@@__IMMUTABLE_LIST__@@`]?Hn(e,t,n,r,i,a,`List`):e[`@@__IMMUTABLE_SET__@@`]?Hn(e,t,n,r,i,a,e[Fn]?`OrderedSet`:`Set`):e[`@@__IMMUTABLE_STACK__@@`]?Hn(e,t,n,r,i,a,`Stack`):e[`@@__IMMUTABLE_SEQ__@@`]?Vn(e,t,n,r,i,a):Bn(e,t,n,r,i,a),test:e=>e&&(e[`@@__IMMUTABLE_ITERABLE__@@`]===!0||e[`@@__IMMUTABLE_RECORD__@@`]===!0)};function Wn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}var Gn={exports:{}},z={},Kn;function qn(){if(Kn)return z;Kn=1;var e=Symbol.for(`react.transitional.element`),t=Symbol.for(`react.portal`),n=Symbol.for(`react.fragment`),r=Symbol.for(`react.strict_mode`),i=Symbol.for(`react.profiler`),a=Symbol.for(`react.consumer`),o=Symbol.for(`react.context`),s=Symbol.for(`react.forward_ref`),c=Symbol.for(`react.suspense`),l=Symbol.for(`react.suspense_list`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.view_transition`),p=Symbol.for(`react.client.reference`);function m(p){if(typeof p==`object`&&p){var m=p.$$typeof;switch(m){case e:switch(p=p.type,p){case n:case i:case r:case c:case l:case f:return p;default:switch(p&&=p.$$typeof,p){case o:case s:case d:case u:return p;case a:return p;default:return m}}case t:return m}}}return z.ContextConsumer=a,z.ContextProvider=o,z.Element=e,z.ForwardRef=s,z.Fragment=n,z.Lazy=d,z.Memo=u,z.Portal=t,z.Profiler=i,z.StrictMode=r,z.Suspense=c,z.SuspenseList=l,z.isContextConsumer=function(e){return m(e)===a},z.isContextProvider=function(e){return m(e)===o},z.isElement=function(t){return typeof t==`object`&&!!t&&t.$$typeof===e},z.isForwardRef=function(e){return m(e)===s},z.isFragment=function(e){return m(e)===n},z.isLazy=function(e){return m(e)===d},z.isMemo=function(e){return m(e)===u},z.isPortal=function(e){return m(e)===t},z.isProfiler=function(e){return m(e)===i},z.isStrictMode=function(e){return m(e)===r},z.isSuspense=function(e){return m(e)===c},z.isSuspenseList=function(e){return m(e)===l},z.isValidElementType=function(e){return!!(typeof e==`string`||typeof e==`function`||e===n||e===i||e===r||e===c||e===l||typeof e==`object`&&e&&(e.$$typeof===d||e.$$typeof===u||e.$$typeof===o||e.$$typeof===a||e.$$typeof===s||e.$$typeof===p||e.getModuleId!==void 0))},z.typeOf=m,z}var Jn;function Yn(){return Jn?Gn.exports:(Jn=1,Gn.exports=qn(),Gn.exports)}var Xn=Yn(),Zn=an({__proto__:null,default:Wn(Xn)},[Xn]),Qn={exports:{}},B={},$n;function er(){if($n)return B;$n=1;var e=Symbol.for(`react.element`),t=Symbol.for(`react.portal`),n=Symbol.for(`react.fragment`),r=Symbol.for(`react.strict_mode`),i=Symbol.for(`react.profiler`),a=Symbol.for(`react.provider`),o=Symbol.for(`react.context`),s=Symbol.for(`react.server_context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.suspense_list`),d=Symbol.for(`react.memo`),f=Symbol.for(`react.lazy`),p=Symbol.for(`react.offscreen`),m=Symbol.for(`react.module.reference`);function h(p){if(typeof p==`object`&&p){var m=p.$$typeof;switch(m){case e:switch(p=p.type,p){case n:case i:case r:case l:case u:return p;default:switch(p&&=p.$$typeof,p){case s:case o:case c:case f:case d:case a:return p;default:return m}}case t:return m}}}return B.ContextConsumer=o,B.ContextProvider=a,B.Element=e,B.ForwardRef=c,B.Fragment=n,B.Lazy=f,B.Memo=d,B.Portal=t,B.Profiler=i,B.StrictMode=r,B.Suspense=l,B.SuspenseList=u,B.isAsyncMode=function(){return!1},B.isConcurrentMode=function(){return!1},B.isContextConsumer=function(e){return h(e)===o},B.isContextProvider=function(e){return h(e)===a},B.isElement=function(t){return typeof t==`object`&&!!t&&t.$$typeof===e},B.isForwardRef=function(e){return h(e)===c},B.isFragment=function(e){return h(e)===n},B.isLazy=function(e){return h(e)===f},B.isMemo=function(e){return h(e)===d},B.isPortal=function(e){return h(e)===t},B.isProfiler=function(e){return h(e)===i},B.isStrictMode=function(e){return h(e)===r},B.isSuspense=function(e){return h(e)===l},B.isSuspenseList=function(e){return h(e)===u},B.isValidElementType=function(e){return!!(typeof e==`string`||typeof e==`function`||e===n||e===i||e===r||e===l||e===u||e===p||typeof e==`object`&&e&&(e.$$typeof===f||e.$$typeof===d||e.$$typeof===a||e.$$typeof===o||e.$$typeof===c||e.$$typeof===m||e.getModuleId!==void 0))},B.typeOf=h,B}var tr;function nr(){return tr?Qn.exports:(tr=1,Qn.exports=er(),Qn.exports)}var rr=nr(),ir=an({__proto__:null,default:Wn(rr)},[rr]);const ar=Object.fromEntries([`isAsyncMode`,`isConcurrentMode`,`isContextConsumer`,`isContextProvider`,`isElement`,`isForwardRef`,`isFragment`,`isLazy`,`isMemo`,`isPortal`,`isProfiler`,`isStrictMode`,`isSuspense`,`isSuspenseList`,`isValidElementType`].map(e=>[e,t=>ir[e](t)||Zn[e](t)]));function or(e,t=[]){if(Array.isArray(e))for(let n of e)or(n,t);else e!=null&&e!==!1&&e!==``&&t.push(e);return t}function sr(e){let t=e.type;if(typeof t==`string`)return t;if(typeof t==`function`)return t.displayName||t.name||`Unknown`;if(ar.isFragment(e))return`React.Fragment`;if(ar.isSuspense(e))return`React.Suspense`;if(typeof t==`object`&&t){if(ar.isContextProvider(e))return`Context.Provider`;if(ar.isContextConsumer(e))return`Context.Consumer`;if(ar.isForwardRef(e)){if(t.displayName)return t.displayName;let e=t.render.displayName||t.render.name||``;return e===``?`ForwardRef`:`ForwardRef(${e})`}if(ar.isMemo(e)){let e=t.displayName||t.type.displayName||t.type.name||``;return e===``?`Memo`:`Memo(${e})`}}return`UNDEFINED`}function cr(e){let{props:t}=e;return Object.keys(t).filter(e=>e!==`children`&&t[e]!==void 0).sort()}const lr={serialize:(e,t,n,r,i,a)=>++r>t.maxDepth?En(sr(e),t):Tn(sr(e),bn(cr(e),e.props,t,n+t.indent,r,i,a),xn(or(e.props.children),t,n+t.indent,r,i,a),t,n),test:e=>e!=null&&ar.isElement(e)},ur=typeof Symbol==`function`&&Symbol.for?Symbol.for(`react.test.json`):245830487;function dr(e){let{props:t}=e;return t?Object.keys(t).filter(e=>t[e]!==void 0).sort():[]}const fr={serialize:(e,t,n,r,i,a)=>++r>t.maxDepth?En(e.type,t):Tn(e.type,e.props?bn(dr(e),e.props,t,n+t.indent,r,i,a):``,e.children?xn(e.children,t,n+t.indent,r,i,a):``,t,n),test:e=>e&&e.$$typeof===ur},pr=Object.prototype.toString,mr=Date.prototype.toISOString,hr=Error.prototype.toString,gr=RegExp.prototype.toString;function _r(e){return typeof e.constructor==`function`&&e.constructor.name||`Object`}function vr(e){return typeof window<`u`&&e===window}const yr=/^Symbol\((.*)\)(.*)$/,br=/\n/g;var xr=class extends Error{constructor(e,t){super(e),this.stack=t,this.name=this.constructor.name}};function Sr(e){return e===`[object Array]`||e===`[object ArrayBuffer]`||e===`[object DataView]`||e===`[object Float32Array]`||e===`[object Float64Array]`||e===`[object Int8Array]`||e===`[object Int16Array]`||e===`[object Int32Array]`||e===`[object Uint8Array]`||e===`[object Uint8ClampedArray]`||e===`[object Uint16Array]`||e===`[object Uint32Array]`}function Cr(e){return Object.is(e,-0)?`-0`:String(e)}function wr(e){return String(`${e}n`)}function Tr(e,t){return t?`[Function ${e.name||`anonymous`}]`:`[Function]`}function Er(e){return String(e).replace(yr,`Symbol($1)`)}function Dr(e){return`[${hr.call(e)}]`}function Or(e,t,n,r){if(e===!0||e===!1)return`${e}`;if(e===void 0)return`undefined`;if(e===null)return`null`;let i=typeof e;if(i===`number`)return Cr(e);if(i===`bigint`)return wr(e);if(i===`string`)return r?`"${e.replaceAll(/"|\\/g,`\\$&`)}"`:`"${e}"`;if(i===`function`)return Tr(e,t);if(i===`symbol`)return Er(e);let a=pr.call(e);return a===`[object WeakMap]`?`WeakMap {}`:a===`[object WeakSet]`?`WeakSet {}`:a===`[object Function]`||a===`[object GeneratorFunction]`?Tr(e,t):a===`[object Symbol]`?Er(e):a===`[object Date]`?Number.isNaN(+e)?`Date { NaN }`:mr.call(e):a===`[object Error]`?Dr(e):a===`[object RegExp]`?n?gr.call(e).replaceAll(/[$()*+.?[\\\]^{|}]/g,`\\$&`):gr.call(e):e instanceof Error?Dr(e):null}function kr(e,t,n,r,i,a){if(i.includes(e))return`[Circular]`;i=[...i],i.push(e);let o=++r>t.maxDepth,s=t.min;if(t.callToJSON&&!o&&e.toJSON&&typeof e.toJSON==`function`&&!a)return Pr(e.toJSON(),t,n,r,i,!0);let c=pr.call(e);return c===`[object Arguments]`?o?`[Arguments]`:`${s?``:`Arguments `}[${ln(e,t,n,r,i,Pr)}]`:Sr(c)?o?`[${e.constructor.name}]`:`${s||!t.printBasicPrototype&&e.constructor.name===`Array`?``:`${e.constructor.name} `}[${ln(e,t,n,r,i,Pr)}]`:c===`[object Map]`?o?`[Map]`:`Map {${sn(e.entries(),t,n,r,i,Pr,` => `)}}`:c===`[object Set]`?o?`[Set]`:`Set {${cn(e.values(),t,n,r,i,Pr)}}`:o||vr(e)?`[${_r(e)}]`:`${s||!t.printBasicPrototype&&_r(e)===`Object`?``:`${_r(e)} `}{${un(e,t,n,r,i,Pr)}}`}const Ar={test:e=>e&&e instanceof Error,serialize(e,t,n,r,i,a){if(i.includes(e))return`[Circular]`;i=[...i,e];let o=++r>t.maxDepth,{message:s,cause:c,...l}=e,u={message:s,...c===void 0?{}:{cause:c},...e instanceof AggregateError?{errors:e.errors}:{},...l},d=e.name===`Error`?_r(e):e.name;return o?`[${d}]`:`${d} {${sn(Object.entries(u).values(),t,n,r,i,a)}}`}};function jr(e){return e.serialize!=null}function Mr(e,t,n,r,i,a){let o;try{o=jr(e)?e.serialize(t,n,r,i,a,Pr):e.print(t,e=>Pr(e,n,r,i,a),e=>{let t=r+n.indent;return t+e.replaceAll(br,`\n${t}`)},{edgeSpacing:n.spacingOuter,min:n.min,spacing:n.spacingInner},n.colors)}catch(e){throw new xr(e.message,e.stack)}if(typeof o!=`string`)throw TypeError(`pretty-format: Plugin must return type "string" but instead returned "${typeof o}".`);return o}function Nr(e,t){for(let n of e)try{if(n.test(t))return n}catch(e){throw new xr(e.message,e.stack)}return null}function Pr(e,t,n,r,i,a){let o=Nr(t.plugins,e);if(o!==null)return Mr(o,e,t,n,r,i);let s=Or(e,t.printFunctionName,t.escapeRegex,t.escapeString);return s===null?kr(e,t,n,r,i,a):s}const Fr={comment:`gray`,content:`reset`,prop:`yellow`,tag:`cyan`,value:`green`},Ir=Object.keys(Fr),Lr={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:1/0,maxWidth:1/0,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,printShadowRoot:!0,theme:Fr};function Rr(e){for(let t of Object.keys(e))if(!Object.hasOwn(Lr,t))throw Error(`pretty-format: Unknown option "${t}".`);if(e.min&&e.indent!==void 0&&e.indent!==0)throw Error(`pretty-format: Options "min" and "indent" cannot be used together.`)}function zr(){return Ir.reduce((e,t)=>{let n=Fr[t],r=n&&R[n];if(r&&typeof r.close==`string`&&typeof r.open==`string`)e[t]=r;else throw Error(`pretty-format: Option "theme" has a key "${t}" whose value "${n}" is undefined in ansi-styles.`);return e},Object.create(null))}function Br(){return Ir.reduce((e,t)=>(e[t]={close:``,open:``},e),Object.create(null))}function Vr(e){return e?.printFunctionName??Lr.printFunctionName}function Hr(e){return e?.escapeRegex??Lr.escapeRegex}function Ur(e){return e?.escapeString??Lr.escapeString}function Wr(e){return{callToJSON:e?.callToJSON??Lr.callToJSON,colors:e?.highlight?zr():Br(),compareKeys:typeof e?.compareKeys==`function`||e?.compareKeys===null?e.compareKeys:Lr.compareKeys,escapeRegex:Hr(e),escapeString:Ur(e),indent:e?.min?``:Gr(e?.indent??Lr.indent),maxDepth:e?.maxDepth??Lr.maxDepth,maxWidth:e?.maxWidth??Lr.maxWidth,min:e?.min??Lr.min,plugins:e?.plugins??Lr.plugins,printBasicPrototype:e?.printBasicPrototype??!0,printFunctionName:Vr(e),printShadowRoot:e?.printShadowRoot??!0,spacingInner:e?.min?` `:`
`,spacingOuter:e?.min?``:`
`}}function Gr(e){return Array.from({length:e+1}).join(` `)}function Kr(e,t){if(t&&(Rr(t),t.plugins)){let n=Nr(t.plugins,e);if(n!==null)return Mr(n,e,Wr(t),``,0,[])}let n=Or(e,Vr(t),Hr(t),Ur(t));return n===null?kr(e,Wr(t),``,0,[]):n}const qr={AsymmetricMatcher:fn,DOMCollection:vn,DOMElement:Pn,Immutable:Un,ReactElement:lr,ReactTestComponent:fr,Error:Ar},Jr={bold:[`1`,`22`],dim:[`2`,`22`],italic:[`3`,`23`],underline:[`4`,`24`],inverse:[`7`,`27`],hidden:[`8`,`28`],strike:[`9`,`29`],black:[`30`,`39`],red:[`31`,`39`],green:[`32`,`39`],yellow:[`33`,`39`],blue:[`34`,`39`],magenta:[`35`,`39`],cyan:[`36`,`39`],white:[`37`,`39`],brightblack:[`30;1`,`39`],brightred:[`31;1`,`39`],brightgreen:[`32;1`,`39`],brightyellow:[`33;1`,`39`],brightblue:[`34;1`,`39`],brightmagenta:[`35;1`,`39`],brightcyan:[`36;1`,`39`],brightwhite:[`37;1`,`39`],grey:[`90`,`39`]},Yr={special:`cyan`,number:`yellow`,bigint:`yellow`,boolean:`yellow`,undefined:`grey`,null:`bold`,string:`green`,symbol:`green`,date:`magenta`,regexp:`red`};function Xr(e,t){let n=Jr[Yr[t]]||Jr[t]||``;return n?`\u001b[${n[0]}m${String(e)}\u001b[${n[1]}m`:String(e)}function Zr({showHidden:e=!1,depth:t=2,colors:n=!1,customInspect:r=!0,showProxy:i=!1,maxArrayLength:a=1/0,breakLength:o=1/0,seen:s=[],truncate:c=1/0,stylize:l=String}={},u){let d={showHidden:!!e,depth:Number(t),colors:!!n,customInspect:!!r,showProxy:!!i,maxArrayLength:Number(a),breakLength:Number(o),truncate:Number(c),seen:s,inspect:u,stylize:l};return d.colors&&(d.stylize=Xr),d}function Qr(e){return e>=`\ud800`&&e<=`\udbff`}function $r(e,t,n=`…`){e=String(e);let r=n.length,i=e.length;if(r>t&&i>r)return n;if(i>t&&i>r){let i=t-r;return i>0&&Qr(e[i-1])&&--i,`${e.slice(0,i)}${n}`}return e}function ei(e,t,n,r=`, `){n||=t.inspect;let i=e.length;if(i===0)return``;let a=t.truncate,o=``,s=``,c=``;for(let l=0;l<i;l+=1){let i=l+1===e.length,u=l+2===e.length;c=`…(${e.length-l})`;let d=e[l];t.truncate=a-o.length-(i?0:r.length);let f=s||n(d,t)+(i?``:r),p=o.length+f.length,m=p+c.length;if(i&&p>a&&o.length+c.length<=a||!i&&!u&&m>a||(s=i?``:n(e[l+1],t)+(u?``:r),!i&&u&&m>a&&p+s.length>a))break;if(o+=f,!i&&!u&&p+s.length>=a){c=`…(${e.length-l-1})`;break}c=``}return`${o}${c}`}function ti(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,`\\'`).replace(/\\"/g,`"`).replace(/(^"|"$)/g,`'`)}function ni([e,t],n){return n.truncate-=2,typeof e==`string`?e=ti(e):typeof e!=`number`&&(e=`[${n.inspect(e,n)}]`),n.truncate-=e.length,t=n.inspect(t,n),`${e}: ${t}`}function ri(e,t){let n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return`[]`;t.truncate-=4;let r=ei(e,t);t.truncate-=r.length;let i=``;return n.length&&(i=ei(n.map(t=>[t,e[t]]),t,ni)),`[ ${r}${i?`, ${i}`:``} ]`}const ii=e=>typeof Buffer==`function`&&e instanceof Buffer?`Buffer`:e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name;function ai(e,t){let n=ii(e);t.truncate-=n.length+4;let r=Object.keys(e).slice(e.length);if(!e.length&&!r.length)return`${n}[]`;let i=``;for(let n=0;n<e.length;n++){let r=`${t.stylize($r(e[n],t.truncate),`number`)}${n===e.length-1?``:`, `}`;if(t.truncate-=r.length,e[n]!==e.length&&t.truncate<=3){i+=`…(${e.length-e[n]+1})`;break}i+=r}let a=``;return r.length&&(a=ei(r.map(t=>[t,e[t]]),t,ni)),`${n}[ ${i}${a?`, ${a}`:``} ]`}function oi(e,t){let n=e.toJSON();if(n===null)return`Invalid Date`;let r=n.split(`T`),i=r[0];return t.stylize(`${i}T${$r(r[1],t.truncate-i.length-1)}`,`date`)}function si(e,t){let n=e[Symbol.toStringTag]||`Function`,r=e.name;return r?t.stylize(`[${n} ${$r(r,t.truncate-11)}]`,`special`):t.stylize(`[${n}]`,`special`)}function ci([e,t],n){return n.truncate-=4,e=n.inspect(e,n),n.truncate-=e.length,t=n.inspect(t,n),`${e} => ${t}`}function li(e){let t=[];return e.forEach((e,n)=>{t.push([n,e])}),t}function ui(e,t){return e.size===0?`Map{}`:(t.truncate-=7,`Map{ ${ei(li(e),t,ci)} }`)}const di=Number.isNaN||(e=>e!==e);function fi(e,t){return di(e)?t.stylize(`NaN`,`number`):e===1/0?t.stylize(`Infinity`,`number`):e===-1/0?t.stylize(`-Infinity`,`number`):e===0?t.stylize(1/e==1/0?`+0`:`-0`,`number`):t.stylize($r(String(e),t.truncate),`number`)}function pi(e,t){let n=$r(e.toString(),t.truncate-1);return n!==`…`&&(n+=`n`),t.stylize(n,`bigint`)}function mi(e,t){let n=e.toString().split(`/`)[2],r=t.truncate-(2+n.length),i=e.source;return t.stylize(`/${$r(i,r)}/${n}`,`regexp`)}function hi(e){let t=[];return e.forEach(e=>{t.push(e)}),t}function gi(e,t){return e.size===0?`Set{}`:(t.truncate-=7,`Set{ ${ei(hi(e),t)} }`)}const _i=RegExp(`['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]`,`g`),vi={"\b":`\\b`,"	":`\\t`,"\n":`\\n`,"\f":`\\f`,"\r":`\\r`,"'":`\\'`,"\\":`\\\\`};function yi(e){return vi[e]||`\\u${`0000${e.charCodeAt(0).toString(16)}`.slice(-4)}`}function bi(e,t){return _i.test(e)&&(e=e.replace(_i,yi)),t.stylize(`'${$r(e,t.truncate-2)}'`,`string`)}function xi(e){return`description`in Symbol.prototype?e.description?`Symbol(${e.description})`:`Symbol()`:e.toString()}const Si=()=>`Promise{…}`;function Ci(e,t){let n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(n.length===0&&r.length===0)return`{}`;if(t.truncate-=4,t.seen=t.seen||[],t.seen.includes(e))return`[Circular]`;t.seen.push(e);let i=ei(n.map(t=>[t,e[t]]),t,ni),a=ei(r.map(t=>[t,e[t]]),t,ni);t.seen.pop();let o=``;return i&&a&&(o=`, `),`{ ${i}${o}${a} }`}const wi=typeof Symbol<`u`&&Symbol.toStringTag?Symbol.toStringTag:!1;function Ti(e,t){let n=``;return wi&&wi in e&&(n=e[wi]),n||=e.constructor.name,(!n||n===`_class`)&&(n=`<Anonymous Class>`),t.truncate-=n.length,`${n}${Ci(e,t)}`}function Ei(e,t){return e.length===0?`Arguments[]`:(t.truncate-=13,`Arguments[ ${ei(e,t)} ]`)}const Di=[`stack`,`line`,`column`,`name`,`message`,`fileName`,`lineNumber`,`columnNumber`,`number`,`description`,`cause`];function Oi(e,t){let n=Object.getOwnPropertyNames(e).filter(e=>Di.indexOf(e)===-1),r=e.name;t.truncate-=r.length;let i=``;if(typeof e.message==`string`?i=$r(e.message,t.truncate):n.unshift(`message`),i=i?`: ${i}`:``,t.truncate-=i.length+5,t.seen=t.seen||[],t.seen.includes(e))return`[Circular]`;t.seen.push(e);let a=ei(n.map(t=>[t,e[t]]),t,ni);return`${r}${i}${a?` { ${a} }`:``}`}function ki([e,t],n){return n.truncate-=3,t?`${n.stylize(String(e),`yellow`)}=${n.stylize(`"${t}"`,`string`)}`:`${n.stylize(String(e),`yellow`)}`}function Ai(e,t){return ei(e,t,ji,`
`)}function ji(e,t){switch(e.nodeType){case 1:return Mi(e,t);case 3:return t.inspect(e.data,t);default:return t.inspect(e,t)}}function Mi(e,t){let n=e.getAttributeNames(),r=e.tagName.toLowerCase(),i=t.stylize(`<${r}`,`special`),a=t.stylize(`>`,`special`),o=t.stylize(`</${r}>`,`special`);t.truncate-=r.length*2+5;let s=``;n.length>0&&(s+=` `,s+=ei(n.map(t=>[t,e.getAttribute(t)]),t,ki,` `)),t.truncate-=s.length;let c=t.truncate,l=Ai(e.children,t);return l&&l.length>c&&(l=`…(${e.children.length})`),`${i}${s}${a}${l}${o}`}const Ni=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`chai/inspect`):`@@chai/inspect`,Pi=Symbol.for(`nodejs.util.inspect.custom`),Fi=new WeakMap,Ii={},Li={undefined:(e,t)=>t.stylize(`undefined`,`undefined`),null:(e,t)=>t.stylize(`null`,`null`),boolean:(e,t)=>t.stylize(String(e),`boolean`),Boolean:(e,t)=>t.stylize(String(e),`boolean`),number:fi,Number:fi,bigint:pi,BigInt:pi,string:bi,String:bi,function:si,Function:si,symbol:xi,Symbol:xi,Array:ri,Date:oi,Map:ui,Set:gi,RegExp:mi,Promise:Si,WeakSet:(e,t)=>t.stylize(`WeakSet{…}`,`special`),WeakMap:(e,t)=>t.stylize(`WeakMap{…}`,`special`),Arguments:Ei,Int8Array:ai,Uint8Array:ai,Uint8ClampedArray:ai,Int16Array:ai,Uint16Array:ai,Int32Array:ai,Uint32Array:ai,Float32Array:ai,Float64Array:ai,Generator:()=>``,DataView:()=>``,ArrayBuffer:()=>``,Error:Oi,HTMLCollection:Ai,NodeList:Ai},Ri=(e,t,n,r)=>Ni in e&&typeof e[Ni]==`function`?e[Ni](t):Pi in e&&typeof e[Pi]==`function`?e[Pi](t.depth,t,r):`inspect`in e&&typeof e.inspect==`function`?e.inspect(t.depth,t):`constructor`in e&&Fi.has(e.constructor)?Fi.get(e.constructor)(e,t):Ii[n]?Ii[n](e,t):``,zi=Object.prototype.toString;function Bi(e,t={}){let n=Zr(t,Bi),{customInspect:r}=n,i=e===null?`null`:typeof e;if(i===`object`&&(i=zi.call(e).slice(8,-1)),i in Li)return Li[i](e,n);if(r&&e){let t=Ri(e,n,i,Bi);if(t)return typeof t==`string`?t:Bi(t,n)}let a=e?Object.getPrototypeOf(e):!1;return a===Object.prototype||a===null?Ci(e,n):e&&typeof HTMLElement==`function`&&e instanceof HTMLElement?Mi(e,n):`constructor`in e?e.constructor===Object?Ci(e,n):Ti(e,n):e===Object(e)?Ci(e,n):n.stylize(String(e),i)}const{AsymmetricMatcher:Vi,DOMCollection:Hi,DOMElement:Ui,Immutable:Wi,ReactElement:Gi,ReactTestComponent:Ki}=qr,qi=[Ki,Gi,Ui,Hi,Wi,Vi];function Ji(e,t=10,{maxLength:n,...r}={}){let i=n??1e4,a;try{a=Kr(e,{maxDepth:t,escapeString:!1,plugins:qi,...r})}catch{a=Kr(e,{callToJSON:!1,maxDepth:t,escapeString:!1,plugins:qi,...r})}return a.length>=i&&t>1?Ji(e,Math.floor(Math.min(t,2**53-1)/2),{maxLength:n,...r}):a}const Yi=/%[sdjifoOc%]/g;function Xi(e,t={}){let n=(e,n)=>t.prettifyObject?Ji(e,void 0,{printBasicPrototype:!1,escapeString:!1}):Qi(e,n);if(typeof e[0]!=`string`){let t=[];for(let r=0;r<e.length;r++)t.push(n(e[r],{depth:0,colors:!1}));return t.join(` `)}let r=e.length,i=1,a=e[0],o=String(a).replace(Yi,t=>{if(t===`%%`)return`%`;if(i>=r)return t;switch(t){case`%s`:{let t=e[i++];return typeof t==`bigint`?`${t.toString()}n`:typeof t==`number`&&t===0&&1/t<0?`-0`:typeof t==`object`&&t?typeof t.toString==`function`&&t.toString!==Object.prototype.toString?t.toString():n(t,{depth:0,colors:!1}):String(t)}case`%d`:{let t=e[i++];return typeof t==`bigint`?`${t.toString()}n`:Number(t).toString()}case`%i`:{let t=e[i++];return typeof t==`bigint`?`${t.toString()}n`:Number.parseInt(String(t)).toString()}case`%f`:return Number.parseFloat(String(e[i++])).toString();case`%o`:return n(e[i++],{showHidden:!0,showProxy:!0});case`%O`:return n(e[i++]);case`%c`:return i++,``;case`%j`:try{return JSON.stringify(e[i++])}catch(e){let t=e.message;if(t.includes(`circular structure`)||t.includes(`cyclic structures`)||t.includes(`cyclic object`))return`[Circular]`;throw e}default:return t}});for(let t=e[i];i<r;t=e[++i])typeof t!=`object`||!t?o+=` ${t}`:o+=` ${n(t)}`;return o}function Zi(...e){return Xi(e)}function Qi(e,t={}){return t.truncate===0&&(t.truncate=1/0),Bi(e,t)}function $i(e,t={}){t.truncate===void 0&&(t.truncate=40);let n=Qi(e,t),r=Object.prototype.toString.call(e);if(t.truncate&&n.length>=t.truncate)if(r===`[object Function]`){let t=e;return t.name?`[Function: ${t.name}]`:`[Function]`}else if(r===`[object Array]`)return`[ Array(${e.length}) ]`;else if(r===`[object Object]`){let t=Object.keys(e);return`{ Object (${t.length>2?`${t.splice(0,2).join(`, `)}, ...`:t.join(`, `)}) }`}else return n;return n}function ea(e){let{message:t=`$$stack trace error`,stackTraceLimit:n=1}=e||{},r=Error.stackTraceLimit,i=Error.prepareStackTrace;Error.stackTraceLimit=n,Error.prepareStackTrace=e=>e.stack;let a=Error(t).stack||``;return Error.prepareStackTrace=i,Error.stackTraceLimit=r,a}function ta(e,t,n){let r=typeof e;if(!n.includes(r))throw TypeError(`${t} value must be ${n.join(` or `)}, received "${r}"`)}function na(e){return e??=[],Array.isArray(e)?e:[e]}function ra(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}function ia(e){return e===Object.prototype||e===Function.prototype||e===RegExp.prototype}function aa(e){return Object.prototype.toString.apply(e).slice(8,-1)}function oa(e,t){let n=typeof t==`function`?t:e=>t.add(e);Object.getOwnPropertyNames(e).forEach(n),Object.getOwnPropertySymbols(e).forEach(n)}function sa(e){let t=new Set;return ia(e)?[]:(oa(e,t),Array.from(t))}const ca={forceWritable:!1};function la(e,t=ca){return ua(e,new WeakMap,t)}function ua(e,t,n=ca){let r,i;if(t.has(e))return t.get(e);if(Array.isArray(e)){for(i=Array.from({length:r=e.length}),t.set(e,i);r--;)i[r]=ua(e[r],t,n);return i}if(Object.prototype.toString.call(e)===`[object Object]`){i=Object.create(Object.getPrototypeOf(e)),t.set(e,i);let r=sa(e);for(let a of r){let r=Object.getOwnPropertyDescriptor(e,a);if(!r)continue;let o=ua(e[a],t,n);n.forceWritable?Object.defineProperty(i,a,{enumerable:r.enumerable,configurable:!0,writable:!0,value:o}):`get`in r?Object.defineProperty(i,a,{...r,get(){return o}}):Object.defineProperty(i,a,{...r,value:o})}return i}return e}function da(){}function fa(e,t,n=void 0){let r=t.replace(/\[(\d+)\]/g,`.$1`).split(`.`),i=e;for(let e of r)if(i=new Object(i)[e],i===void 0)return n;return i}function pa(){let e=null,t=null,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n}function ma(e){if(!Number.isNaN(e))return!1;let t=new Float64Array(1);return t[0]=e,new Uint32Array(t.buffer)[1]>>>31==1}function ha(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}var V=class{0;1;constructor(e,t){this[0]=e,this[1]=t}};function ga(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;let n=0,r=Math.min(e.length,t.length),i=r,a=0;for(;n<i;)e.substring(a,i)===t.substring(a,i)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i}function _a(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;let n=0,r=Math.min(e.length,t.length),i=r,a=0;for(;n<i;)e.substring(e.length-i,e.length-a)===t.substring(t.length-i,t.length-a)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return i}function va(e,t){let n=e.length,r=t.length;if(n===0||r===0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));let i=Math.min(n,r);if(e===t)return i;let a=0,o=1;for(;;){let n=e.substring(i-o),r=t.indexOf(n);if(r===-1)return a;o+=r,(r===0||e.substring(i-o)===t.substring(0,o))&&(a=o,o++)}}function ya(e){let t=!1,n=[],r=0,i=null,a=0,o=0,s=0,c=0,l=0;for(;a<e.length;)e[a][0]===0?(n[r++]=a,o=c,s=l,c=0,l=0,i=e[a][1]):(e[a][0]===1?c+=e[a][1].length:l+=e[a][1].length,i&&i.length<=Math.max(o,s)&&i.length<=Math.max(c,l)&&(e.splice(n[r-1],0,new V(-1,i)),e[n[r-1]+1][0]=1,r--,r--,a=r>0?n[r-1]:-1,o=0,s=0,c=0,l=0,i=null,t=!0)),a++;for(t&&Ea(e),Ta(e),a=1;a<e.length;){if(e[a-1][0]===-1&&e[a][0]===1){let t=e[a-1][1],n=e[a][1],r=va(t,n),i=va(n,t);r>=i?(r>=t.length/2||r>=n.length/2)&&(e.splice(a,0,new V(0,n.substring(0,r))),e[a-1][1]=t.substring(0,t.length-r),e[a+1][1]=n.substring(r),a++):(i>=t.length/2||i>=n.length/2)&&(e.splice(a,0,new V(0,t.substring(0,i))),e[a-1][0]=1,e[a-1][1]=n.substring(0,n.length-i),e[a+1][0]=-1,e[a+1][1]=t.substring(i),a++),a++}a++}}const ba=/[^a-z0-9]/i,xa=/\s/,Sa=/[\r\n]/,Ca=/\n\r?\n$/,wa=/^\r?\n\r?\n/;function Ta(e){let t=1;for(;t<e.length-1;){if(e[t-1][0]===0&&e[t+1][0]===0){let n=e[t-1][1],r=e[t][1],i=e[t+1][1],a=_a(n,r);if(a){let e=r.substring(r.length-a);n=n.substring(0,n.length-a),r=e+r.substring(0,r.length-a),i=e+i}let o=n,s=r,c=i,l=Da(n,r)+Da(r,i);for(;r.charAt(0)===i.charAt(0);){n+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);let e=Da(n,r)+Da(r,i);e>=l&&(l=e,o=n,s=r,c=i)}e[t-1][1]!==o&&(o?e[t-1][1]=o:(e.splice(t-1,1),t--),e[t][1]=s,c?e[t+1][1]=c:(e.splice(t+1,1),t--))}t++}}function Ea(e){e.push(new V(0,``));let t=0,n=0,r=0,i=``,a=``,o;for(;t<e.length;)switch(e[t][0]){case 1:r++,a+=e[t][1],t++;break;case-1:n++,i+=e[t][1],t++;break;case 0:n+r>1?(n!==0&&r!==0&&(o=ga(a,i),o!==0&&(t-n-r>0&&e[t-n-r-1][0]===0?e[t-n-r-1][1]+=a.substring(0,o):(e.splice(0,0,new V(0,a.substring(0,o))),t++),a=a.substring(o),i=i.substring(o)),o=_a(a,i),o!==0&&(e[t][1]=a.substring(a.length-o)+e[t][1],a=a.substring(0,a.length-o),i=i.substring(0,i.length-o))),t-=n+r,e.splice(t,n+r),i.length&&(e.splice(t,0,new V(-1,i)),t++),a.length&&(e.splice(t,0,new V(1,a)),t++),t++):t!==0&&e[t-1][0]===0?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,i=``,a=``;break}e.at(-1)?.[1]===``&&e.pop();let s=!1;for(t=1;t<e.length-1;)e[t-1][0]===0&&e[t+1][0]===0&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)===e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),s=!0):e[t][1].substring(0,e[t+1][1].length)===e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),s=!0)),t++;s&&Ea(e)}function Da(e,t){if(!e||!t)return 6;let n=e.charAt(e.length-1),r=t.charAt(0),i=n.match(ba),a=r.match(ba),o=i&&n.match(xa),s=a&&r.match(xa),c=o&&n.match(Sa),l=s&&r.match(Sa),u=c&&e.match(Ca),d=l&&t.match(wa);return u||d?5:c||l?4:i&&!o&&s?3:o||s?2:i||a?1:0}const Oa=`Compared values have no visual difference.`;var ka={},Aa;function ja(){if(Aa)return ka;Aa=1,Object.defineProperty(ka,`__esModule`,{value:!0}),ka.default=d;let e=`diff-sequences`,t=(e,t,n,r,i)=>{let a=0;for(;e<t&&n<r&&i(e,n);)e+=1,n+=1,a+=1;return a},n=(e,t,n,r,i)=>{let a=0;for(;e<=t&&n<=r&&i(t,r);)--t,--r,a+=1;return a},r=(e,n,r,i,a,o,s)=>{let c=0,l=-e,u=o[c],d=u;o[c]+=t(u+1,n,i+u-l+1,r,a);let f=e<s?e:s;for(c+=1,l+=2;c<=f;c+=1,l+=2){if(c!==e&&d<o[c])u=o[c];else if(u=d+1,n<=u)return c-1;d=o[c],o[c]=u+t(u+1,n,i+u-l+1,r,a)}return s},i=(e,t,r,i,a,o,s)=>{let c=0,l=e,u=o[c],d=u;o[c]-=n(t,u-1,r,i+u-l-1,a);let f=e<s?e:s;for(c+=1,l-=2;c<=f;c+=1,l-=2){if(c!==e&&o[c]<d)u=o[c];else if(u=d-1,u<t)return c-1;d=o[c],o[c]=u-n(t,u-1,r,i+u-l-1,a)}return s},a=(e,r,i,a,o,s,c,l,u,d,f)=>{let p=a-r,m=i-r,h=o-a-m,g=-h-(e-1),_=-h+(e-1),v=0,y=e<l?e:l;for(let l=0,m=-e;l<=y;l+=1,m+=2){let y=l===0||l!==e&&v<c[l],b=y?c[l]:v,x=y?b:b+1,S=p+x-m,C=t(x+1,i,S+1,o,s),w=x+C;if(v=c[l],c[l]=w,g<=m&&m<=_){let t=(e-1-(m+h))/2;if(t<=d&&u[t]-1<=w){let t=p+b-(y?m+1:m-1),c=n(r,b,a,t,s),l=b-c,u=t-c,d=l+1,h=u+1;f.nChangePreceding=e-1,e-1===d+h-r-a?(f.aEndPreceding=r,f.bEndPreceding=a):(f.aEndPreceding=d,f.bEndPreceding=h),f.nCommonPreceding=c,c!==0&&(f.aCommonPreceding=d,f.bCommonPreceding=h),f.nCommonFollowing=C,C!==0&&(f.aCommonFollowing=x+1,f.bCommonFollowing=S+1);let g=w+1,_=S+C+1;return f.nChangeFollowing=e-1,e-1===i+o-g-_?(f.aStartFollowing=i,f.bStartFollowing=o):(f.aStartFollowing=g,f.bStartFollowing=_),!0}}}return!1},o=(e,r,i,a,o,s,c,l,u,d,f)=>{let p=o-i,m=i-r,h=o-a-m,g=h-e,_=h+e,v=0,y=e<d?e:d;for(let d=0,m=e;d<=y;d+=1,m-=2){let y=d===0||d!==e&&u[d]<v,b=y?u[d]:v,x=y?b:b-1,S=p+x-m,C=n(r,x-1,a,S-1,s),w=x-C;if(v=u[d],u[d]=w,g<=m&&m<=_){let n=(e+(m-h))/2;if(n<=l&&w-1<=c[n]){let n=S-C;if(f.nChangePreceding=e,e===w+n-r-a?(f.aEndPreceding=r,f.bEndPreceding=a):(f.aEndPreceding=w,f.bEndPreceding=n),f.nCommonPreceding=C,C!==0&&(f.aCommonPreceding=w,f.bCommonPreceding=n),f.nChangeFollowing=e-1,e===1)f.nCommonFollowing=0,f.aStartFollowing=i,f.bStartFollowing=o;else{let n=p+b-(y?m-1:m+1),r=t(b,i,n,o,s);f.nCommonFollowing=r,r!==0&&(f.aCommonFollowing=b,f.bCommonFollowing=n);let a=b+r,c=n+r;e-1===i+o-a-c?(f.aStartFollowing=i,f.bStartFollowing=o):(f.aStartFollowing=a,f.bStartFollowing=c)}return!0}}}return!1},s=(t,n,s,c,l,u,d,f,p)=>{let m=c-n,h=l-s,g=s-n,_=l-c,v=_-g,y=g,b=g;if(d[0]=n-1,f[0]=s,v%2==0){let e=(t||v)/2,a=(g+_)/2;for(let t=1;t<=a;t+=1)if(y=r(t,s,l,m,u,d,y),t<e)b=i(t,n,c,h,u,f,b);else if(o(t,n,s,c,l,u,d,y,f,b,p))return}else{let e=((t||v)+1)/2,o=(g+_+1)/2,x=1;for(y=r(x,s,l,m,u,d,y),x+=1;x<=o;x+=1)if(b=i(x-1,n,c,h,u,f,b),x<e)y=r(x,s,l,m,u,d,y);else if(a(x,n,s,c,l,u,d,y,f,b,p))return}throw Error(`${e}: no overlap aStart=${n} aEnd=${s} bStart=${c} bEnd=${l}`)},c=(e,t,n,r,i,a,o,l,u,d)=>{if(i-r<n-t){if(a=!a,a&&o.length===1){let{foundSubsequence:e,isCommon:t}=o[0];o[1]={foundSubsequence:(t,n,r)=>{e(t,r,n)},isCommon:(e,n)=>t(n,e)}}let e=t,s=n;t=r,n=i,r=e,i=s}let{foundSubsequence:f,isCommon:p}=o[a?1:0];s(e,t,n,r,i,p,l,u,d);let{nChangePreceding:m,aEndPreceding:h,bEndPreceding:g,nCommonPreceding:_,aCommonPreceding:v,bCommonPreceding:y,nCommonFollowing:b,aCommonFollowing:x,bCommonFollowing:S,nChangeFollowing:C,aStartFollowing:w,bStartFollowing:T}=d;t<h&&r<g&&c(m,t,h,r,g,a,o,l,u,d),_!==0&&f(_,v,y),b!==0&&f(b,x,S),w<n&&T<i&&c(C,w,n,T,i,a,o,l,u,d)},l=(t,n)=>{if(typeof n!=`number`)throw TypeError(`${e}: ${t} typeof ${typeof n} is not a number`);if(!Number.isSafeInteger(n))throw RangeError(`${e}: ${t} value ${n} is not a safe integer`);if(n<0)throw RangeError(`${e}: ${t} value ${n} is a negative integer`)},u=(t,n)=>{let r=typeof n;if(r!==`function`)throw TypeError(`${e}: ${t} typeof ${r} is not a function`)};function d(e,r,i,a){l(`aLength`,e),l(`bLength`,r),u(`isCommon`,i),u(`foundSubsequence`,a);let o=t(0,e,0,r,i);if(o!==0&&a(o,0,0),e!==o||r!==o){let t=o,s=o,l=n(t,e-1,s,r-1,i),u=e-l,d=r-l,f=o+l;e!==f&&r!==f&&c(0,t,u,s,d,!1,[{foundSubsequence:a,isCommon:i}],[0],[0],{aCommonFollowing:0,aCommonPreceding:0,aEndPreceding:0,aStartFollowing:0,bCommonFollowing:0,bCommonPreceding:0,bEndPreceding:0,bStartFollowing:0,nChangeFollowing:0,nChangePreceding:0,nCommonFollowing:0,nCommonPreceding:0}),l!==0&&a(l,u,d)}}return ka}var Ma=ha(ja());function Na(e,t){return e.replace(/\s+$/,e=>t(e))}function Pa(e,t,n,r,i,a){return e.length===0?r===` `?t&&a.length!==0?n(`${r} ${a}`):``:n(r):n(`${r} ${Na(e,i)}`)}function Fa(e,t,{aColor:n,aIndicator:r,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:a}){return Pa(e,t,n,r,i,a)}function Ia(e,t,{bColor:n,bIndicator:r,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:a}){return Pa(e,t,n,r,i,a)}function La(e,t,{commonColor:n,commonIndicator:r,commonLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:a}){return Pa(e,t,n,r,i,a)}function Ra(e,t,n,r,{patchColor:i}){return i(`@@ -${e+1},${t-e} +${n+1},${r-n} @@`)}function za(e,t){let n=e.length,r=t.contextLines,i=r+r,a=n,o=!1,s=0,c=0;for(;c!==n;){let t=c;for(;c!==n&&e[c][0]===0;)c+=1;if(t!==c)if(t===0)c>r&&(a-=c-r,o=!0);else if(c===n){let e=c-t;e>r&&(a-=e-r,o=!0)}else{let e=c-t;e>i&&(a-=e-i,s+=1)}for(;c!==n&&e[c][0]!==0;)c+=1}let l=s!==0||o;s===0?o&&(a+=1):a+=s+1;let u=a-1,d=[],f=0;l&&d.push(``);let p=0,m=0,h=0,g=0,_=e=>{let n=d.length;d.push(La(e,n===0||n===u,t)),h+=1,g+=1},v=e=>{let n=d.length;d.push(Fa(e,n===0||n===u,t)),h+=1},y=e=>{let n=d.length;d.push(Ia(e,n===0||n===u,t)),g+=1};for(c=0;c!==n;){let a=c;for(;c!==n&&e[c][0]===0;)c+=1;if(a!==c)if(a===0){c>r&&(a=c-r,p=a,m=a,h=p,g=m);for(let t=a;t!==c;t+=1)_(e[t][1])}else if(c===n){let t=c-a>r?a+r:c;for(let n=a;n!==t;n+=1)_(e[n][1])}else{let n=c-a;if(n>i){let o=a+r;for(let t=a;t!==o;t+=1)_(e[t][1]);d[f]=Ra(p,h,m,g,t),f=d.length,d.push(``);let s=n-i;p=h+s,m=g+s,h=p,g=m;for(let t=c-r;t!==c;t+=1)_(e[t][1])}else for(let t=a;t!==c;t+=1)_(e[t][1])}for(;c!==n&&e[c][0]===-1;)v(e[c][1]),c+=1;for(;c!==n&&e[c][0]===1;)y(e[c][1]),c+=1}return l&&(d[f]=Ra(p,h,m,g,t)),d.join(`
`)}function Ba(e,t){return e.map((e,n,r)=>{let i=e[1],a=n===0||n===r.length-1;switch(e[0]){case-1:return Fa(i,a,t);case 1:return Ia(i,a,t);default:return La(i,a,t)}}).join(`
`)}const Va=e=>e;function Ha(){return{aAnnotation:`Expected`,aColor:R.green,aIndicator:`-`,bAnnotation:`Received`,bColor:R.red,bIndicator:`+`,changeColor:R.inverse,changeLineTrailingSpaceColor:Va,commonColor:R.dim,commonIndicator:` `,commonLineTrailingSpaceColor:Va,compareKeys:void 0,contextLines:5,emptyFirstOrLastLinePlaceholder:``,expand:!1,includeChangeCounts:!1,omitAnnotationLines:!1,patchColor:R.yellow,printBasicPrototype:!1,truncateThreshold:0,truncateAnnotation:`... Diff result is truncated`,truncateAnnotationColor:Va}}function Ua(e){return e&&typeof e==`function`?e:void 0}function Wa(e){return typeof e==`number`&&Number.isSafeInteger(e)&&e>=0?e:5}function Ga(e={}){return{...Ha(),...e,compareKeys:Ua(e.compareKeys),contextLines:Wa(e.contextLines)}}function Ka(e){return e.length===1&&e[0].length===0}function qa(e){let t=0,n=0;return e.forEach(e=>{switch(e[0]){case-1:t+=1;break;case 1:n+=1;break}}),{a:t,b:n}}function Ja({aAnnotation:e,aColor:t,aIndicator:n,bAnnotation:r,bColor:i,bIndicator:a,includeChangeCounts:o,omitAnnotationLines:s},c){if(s)return``;let l=``,u=``;if(o){let t=String(c.a),i=String(c.b),o=r.length-e.length,s=` `.repeat(Math.max(0,o)),d=` `.repeat(Math.max(0,-o)),f=i.length-t.length,p=` `.repeat(Math.max(0,f)),m=` `.repeat(Math.max(0,-f));l=`${s}  ${n} ${p}${t}`,u=`${d}  ${a} ${m}${i}`}let d=`${n} ${e}${l}`,f=`${a} ${r}${u}`;return`${t(d)}\n${i(f)}\n\n`}function Ya(e,t,n){return Ja(n,qa(e))+(n.expand?Ba(e,n):za(e,n))+(t?n.truncateAnnotationColor(`\n${n.truncateAnnotation}`):``)}function Xa(e,t,n){let r=Ga(n),[i,a]=Qa(Ka(e)?[]:e,Ka(t)?[]:t,r);return Ya(i,a,r)}function Za(e,t,n,r,i){if(Ka(e)&&Ka(n)&&(e=[],n=[]),Ka(t)&&Ka(r)&&(t=[],r=[]),e.length!==n.length||t.length!==r.length)return Xa(e,t,i);let[a,o]=Qa(n,r,i),s=0,c=0;return a.forEach(n=>{switch(n[0]){case-1:n[1]=e[s],s+=1;break;case 1:n[1]=t[c],c+=1;break;default:n[1]=t[c],s+=1,c+=1}}),Ya(a,o,Ga(i))}function Qa(e,t,n){let r=n?.truncateThreshold??!1,i=Math.max(Math.floor(n?.truncateThreshold??0),0),a=r?Math.min(e.length,i):e.length,o=r?Math.min(t.length,i):t.length,s=a!==e.length||o!==t.length,c=(n,r)=>e[n]===t[r],l=[],u=0,d=0;for(Ma(a,o,c,(n,r,i)=>{for(;u!==r;u+=1)l.push(new V(-1,e[u]));for(;d!==i;d+=1)l.push(new V(1,t[d]));for(;n!==0;--n,u+=1,d+=1)l.push(new V(0,t[d]))});u!==a;u+=1)l.push(new V(-1,e[u]));for(;d!==o;d+=1)l.push(new V(1,t[d]));return[l,s]}function $a(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(Array.isArray(e))return`array`;if(typeof e==`boolean`)return`boolean`;if(typeof e==`function`)return`function`;if(typeof e==`number`)return`number`;if(typeof e==`string`)return`string`;if(typeof e==`bigint`)return`bigint`;if(typeof e==`object`){if(e!=null){if(e.constructor===RegExp)return`regexp`;if(e.constructor===Map)return`map`;if(e.constructor===Set)return`set`;if(e.constructor===Date)return`date`}return`object`}else if(typeof e==`symbol`)return`symbol`;throw Error(`value of unknown type: ${e}`)}function eo(e){return e.includes(`\r
`)?`\r
`:`
`}function to(e,t,n){let r=n?.truncateThreshold??!1,i=Math.max(Math.floor(n?.truncateThreshold??0),0),a=e.length,o=t.length;if(r){let n=e.includes(`
`),r=t.includes(`
`),s=eo(e),c=eo(t),l=n?`${e.split(s,i).join(s)}\n`:e,u=r?`${t.split(c,i).join(c)}\n`:t;a=l.length,o=u.length}let s=a!==e.length||o!==t.length,c=(n,r)=>e[n]===t[r],l=0,u=0,d=[];return Ma(a,o,c,(n,r,i)=>{l!==r&&d.push(new V(-1,e.slice(l,r))),u!==i&&d.push(new V(1,t.slice(u,i))),l=r+n,u=i+n,d.push(new V(0,t.slice(i,u)))}),l!==a&&d.push(new V(-1,e.slice(l))),u!==o&&d.push(new V(1,t.slice(u))),[d,s]}function no(e,t,n){return t.reduce((t,r)=>t+(r[0]===0?r[1]:r[0]===e&&r[1].length!==0?n(r[1]):``),``)}var ro=class{op;line;lines;changeColor;constructor(e,t){this.op=e,this.line=[],this.lines=[],this.changeColor=t}pushSubstring(e){this.pushDiff(new V(this.op,e))}pushLine(){this.lines.push(this.line.length===1?this.line[0][0]===this.op?this.line[0]:new V(this.op,this.line[0][1]):new V(this.op,no(this.op,this.line,this.changeColor))),this.line.length=0}isLineEmpty(){return this.line.length===0}pushDiff(e){this.line.push(e)}align(e){let t=e[1];if(t.includes(`
`)){let e=t.split(`
`),n=e.length-1;e.forEach((e,t)=>{t<n?(this.pushSubstring(e),this.pushLine()):e.length!==0&&this.pushSubstring(e)})}else this.pushDiff(e)}moveLinesTo(e){this.isLineEmpty()||this.pushLine(),e.push(...this.lines),this.lines.length=0}},io=class{deleteBuffer;insertBuffer;lines;constructor(e,t){this.deleteBuffer=e,this.insertBuffer=t,this.lines=[]}pushDiffCommonLine(e){this.lines.push(e)}pushDiffChangeLines(e){let t=e[1].length===0;(!t||this.deleteBuffer.isLineEmpty())&&this.deleteBuffer.pushDiff(e),(!t||this.insertBuffer.isLineEmpty())&&this.insertBuffer.pushDiff(e)}flushChangeLines(){this.deleteBuffer.moveLinesTo(this.lines),this.insertBuffer.moveLinesTo(this.lines)}align(e){let t=e[0],n=e[1];if(n.includes(`
`)){let e=n.split(`
`),r=e.length-1;e.forEach((e,n)=>{if(n===0){let n=new V(t,e);this.deleteBuffer.isLineEmpty()&&this.insertBuffer.isLineEmpty()?(this.flushChangeLines(),this.pushDiffCommonLine(n)):(this.pushDiffChangeLines(n),this.flushChangeLines())}else n<r?this.pushDiffCommonLine(new V(t,e)):e.length!==0&&this.pushDiffChangeLines(new V(t,e))})}else this.pushDiffChangeLines(e)}getLines(){return this.flushChangeLines(),this.lines}};function ao(e,t){let n=new ro(-1,t),r=new ro(1,t),i=new io(n,r);return e.forEach(e=>{switch(e[0]){case-1:n.align(e);break;case 1:r.align(e);break;default:i.align(e)}}),i.getLines()}function oo(e,t){if(t){let t=e.length-1;return e.some((e,n)=>e[0]===0&&(n!==t||e[1]!==`
`))}return e.some(e=>e[0]===0)}function so(e,t,n){if(e!==t&&e.length!==0&&t.length!==0){let r=e.includes(`
`)||t.includes(`
`),[i,a]=co(r?`${e}\n`:e,r?`${t}\n`:t,!0,n);if(oo(i,r)){let e=Ga(n);return Ya(ao(i,e.changeColor),a,e)}}return Xa(e.split(`
`),t.split(`
`),n)}function co(e,t,n,r){let[i,a]=to(e,t,r);return n&&ya(i),[i,a]}function lo(e,t){let{commonColor:n}=Ga(t);return n(e)}const{AsymmetricMatcher:uo,DOMCollection:fo,DOMElement:po,Immutable:mo,ReactElement:ho,ReactTestComponent:go}=qr,_o=[go,ho,po,fo,mo,uo,qr.Error],vo={maxDepth:20,plugins:_o},yo={callToJSON:!1,maxDepth:8,plugins:_o};function bo(e,t,n){if(Object.is(e,t))return``;let r=$a(e),i=r,a=!1;if(r===`object`&&typeof e.asymmetricMatch==`function`){if(e.$$typeof!==Symbol.for(`jest.asymmetricMatcher`)||typeof e.getExpectedType!=`function`)return;i=e.getExpectedType(),a=i===`string`}if(i!==$a(t)){let{aAnnotation:r,aColor:i,aIndicator:a,bAnnotation:o,bColor:s,bIndicator:c}=Ga(n),l=To(yo,n),u=Kr(e,l),d=Kr(t,l),f=1e5;function p(e){return e.length<=f?e:`${e.slice(0,f)}...`}return u=p(u),d=p(d),`${`${i(`${a} ${r}:`)} \n${u}`}\n\n${`${s(`${c} ${o}:`)} \n${d}`}`}if(!a)switch(r){case`string`:return Xa(e.split(`
`),t.split(`
`),n);case`boolean`:case`number`:return xo(e,t,n);case`map`:return wo(So(e),So(t),n);case`set`:return wo(Co(e),Co(t),n);default:return wo(e,t,n)}}function xo(e,t,n){let r=Kr(e,vo),i=Kr(t,vo);return r===i?``:Xa(r.split(`
`),i.split(`
`),n)}function So(e){return new Map(Array.from(e.entries()).sort())}function Co(e){return new Set(Array.from(e.values()).sort())}function wo(e,t,n){let r,i=!1;try{r=Eo(e,t,To(vo,n),n)}catch{i=!0}let a=lo(Oa,n);return(r===void 0||r===a)&&(r=Eo(e,t,To(yo,n),n),r!==a&&!i&&(r=`${lo("Compared values serialize to the same structure.\nPrinting internal object structure without calling `toJSON` instead.",n)}\n\n${r}`)),r}function To(e,t){let{compareKeys:n,printBasicPrototype:r,maxDepth:i}=Ga(t);return{...e,compareKeys:n,printBasicPrototype:r,maxDepth:i??e.maxDepth}}function Eo(e,t,n,r){let i={...n,indent:0},a=Kr(e,i),o=Kr(t,i);if(a===o)return lo(Oa,r);{let i=Kr(e,n),s=Kr(t,n);return Za(i.split(`
`),s.split(`
`),a.split(`
`),o.split(`
`),r)}}const Do=2e4;function Oo(e){return aa(e)===`Object`&&typeof e.asymmetricMatch==`function`}function ko(e,t){let n=aa(e);return n===aa(t)&&(n===`Object`||n===`Array`)}function Ao(e,t,n){let{aAnnotation:r,bAnnotation:i}=Ga(n);if(typeof t==`string`&&typeof e==`string`&&t.length>0&&e.length>0&&t.length<=Do&&e.length<=Do&&t!==e){if(t.includes(`
`)||e.includes(`
`))return so(t,e,n);let[a]=co(t,e,!0),o=a.some(e=>e[0]===0),s=Mo(r,i);return`${s(r)+Fo(Io(a,-1,o))}\n${s(i)+Po(Io(a,1,o))}`}let a=la(t,{forceWritable:!0}),{replacedExpected:o,replacedActual:s}=jo(la(e,{forceWritable:!0}),a);return bo(o,s,n)}function jo(e,t,n=new WeakSet,r=new WeakSet){return e instanceof Error&&t instanceof Error&&e.cause!==void 0&&t.cause===void 0?(delete e.cause,{replacedActual:e,replacedExpected:t}):!ko(e,t)||n.has(e)||r.has(t)?{replacedActual:e,replacedExpected:t}:(n.add(e),r.add(t),sa(t).forEach(i=>{let a=t[i],o=e[i];if(Oo(a)){if(a.asymmetricMatch(o))t[i]=o;else if(`sample`in a&&a.sample!==void 0&&ko(o,a.sample)){let s=jo(o,a.sample,n,r);e[i]=s.replacedActual,t[i]=s.replacedExpected}}else if(Oo(o)){if(o.asymmetricMatch(a))e[i]=a;else if(`sample`in o&&o.sample!==void 0&&ko(o.sample,a)){let s=jo(o.sample,a,n,r);e[i]=s.replacedActual,t[i]=s.replacedExpected}}else if(ko(o,a)){let s=jo(o,a,n,r);e[i]=s.replacedActual,t[i]=s.replacedExpected}}),{replacedActual:e,replacedExpected:t})}function Mo(...e){let t=e.reduce((e,t)=>t.length>e?t.length:e,0);return e=>`${e}: ${` `.repeat(t-e.length)}`}function No(e){return e.replace(/\s+$/gm,e=>`·`.repeat(e.length))}function Po(e){return R.red(No(Ji(e)))}function Fo(e){return R.green(No(Ji(e)))}function Io(e,t,n){return e.reduce((e,r)=>e+(r[0]===0?r[1]:r[0]===t?n?R.inverse(r[1]):r[1]:``),``)}function Lo(e){return typeof e==`function`&&`_isMockFunction`in e&&e._isMockFunction===!0}const Ro=new Set,zo=new Set,Bo=new WeakMap;function Vo(e={}){let{originalImplementation:t,restore:n,mockImplementation:r,resetToMockImplementation:i,resetToMockName:a}=e;n&&Ro.add(n);let o=rs(t),s=is(),c=qo({config:o,state:s,...e}),l=(r||t)?.length??0;return Object.defineProperty(c,`length`,{writable:!0,enumerable:!1,value:l,configurable:!0}),a&&(o.mockName=c.name||`vi.fn()`),Bo.set(c,o),zo.add(c),c._isMockFunction=!0,c.getMockImplementation=()=>o.onceMockImplementations[0]||o.mockImplementation,Object.defineProperty(c,`mock`,{configurable:!1,enumerable:!0,writable:!1,value:s}),c.mockImplementation=function(e){return o.mockImplementation=e,c},c.mockImplementationOnce=function(e){return o.onceMockImplementations.push(e),c},c.withImplementation=function(e,t){let n=o.mockImplementation,r=o.onceMockImplementations,i=()=>{o.mockImplementation=n,o.onceMockImplementations=r};o.mockImplementation=e,o.onceMockImplementations=[];let a=t();return typeof a==`object`&&typeof a?.then==`function`?a.then(()=>(i(),c)):(i(),c)},c.mockReturnThis=function(){return c.mockImplementation(function(){return this})},c.mockReturnValue=function(e){return c.mockImplementation(()=>e)},c.mockReturnValueOnce=function(e){return c.mockImplementationOnce(()=>e)},c.mockResolvedValue=function(e){return c.mockImplementation(()=>Promise.resolve(e))},c.mockResolvedValueOnce=function(e){return c.mockImplementationOnce(()=>Promise.resolve(e))},c.mockRejectedValue=function(e){return c.mockImplementation(()=>Promise.reject(e))},c.mockRejectedValueOnce=function(e){return c.mockImplementationOnce(()=>Promise.reject(e))},c.mockClear=function(){return s.calls=[],s.contexts=[],s.instances=[],s.invocationCallOrder=[],s.results=[],s.settledResults=[],c},c.mockReset=function(){return c.mockClear(),o.mockImplementation=i?r:void 0,o.mockName=a&&c.name||`vi.fn()`,o.onceMockImplementations=[],c},c.mockRestore=function(){return c.mockReset(),n?.()},c.mockName=function(e){return typeof e==`string`&&(o.mockName=e),c},c.getMockName=function(){return o.mockName||`vi.fn()`},Symbol.dispose&&(c[Symbol.dispose]=()=>c.mockRestore()),r&&c.mockImplementation(r),c}function Ho(e){return e!=null&&Lo(e)?e:Vo({mockImplementation:e,resetToMockImplementation:!0})}function Uo(e,t,n){Go(e!=null,`The vi.spyOn() function could not find an object to spy upon. The first argument must be defined.`),Go(typeof e==`object`||typeof e==`function`,`Vitest cannot spy on a primitive value.`);let[r,i]=Wo(e,t)||[];Go(i||t in e,`The property "${String(t)}" is not defined on the ${typeof e}.`);let a=n||`value`,o=!1;a===`value`&&i&&i.value==null&&i.get&&(a=`get`,o=!0);let s;s=i?i[a]:a===`value`?e[t]:()=>e[t];let c=o&&s?s():s,l=typeof c;if(Go(l===`function`||a!==`value`&&s==null,`vi.spyOn() can only spy on a function. Received ${l}.`),Lo(c))return c;let u=n=>{let{value:r,...o}=i||{configurable:!0,writable:!0};a!==`value`&&delete o.writable,o[a]=n,Object.defineProperty(e,t,o)},d=Vo({restore:()=>{r===e?i&&!s?Object.defineProperty(e,t,i):u(s):Reflect.deleteProperty(e,t)},originalImplementation:c,resetToMockName:!0});try{u(o?()=>d:d)}catch(n){throw n instanceof TypeError&&Symbol.toStringTag&&e[Symbol.toStringTag]===`Module`&&(n.message.includes(`Cannot redefine property`)||n.message.includes(`Cannot replace module namespace`)||n.message.includes(`can't redefine non-configurable property`))?TypeError(`Cannot spy on export "${String(t)}". Module namespace is not configurable in ESM. See: https://vitest.dev/guide/browser/#limitations`,{cause:n}):n}return d}function Wo(e,t){let n=Object.getOwnPropertyDescriptor(e,t);if(n)return[e,n];let r=Object.getPrototypeOf(e);for(;r!==null;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return[r,e];r=Object.getPrototypeOf(r)}}function Go(e,t){if(!e)throw Error(t)}let Ko=1;function qo({state:e,config:t,name:n,prototypeState:r,prototypeConfig:i,keepMembersImplementation:a,mockImplementation:o,prototypeMembers:s=[]}){let c=t.mockOriginal,l=o,u=n||c?.name||`Mock`,d={[u]:(function(...n){Jo(n,e,r),Yo(Ko++,e,r);let o={type:`incomplete`,value:void 0},l={type:`incomplete`,value:void 0};Xo(o,e,r),Zo(l,e,r);let p=new.target?void 0:this,[m,h]=Qo(p,e,r),[g,_]=$o(p,e,r),v=t.onceMockImplementations.shift()||t.mockImplementation||i?.onceMockImplementations.shift()||i?.mockImplementation||c||function(){},y,b,x=!1;try{if(new.target){y=Reflect.construct(v,n,new.target);for(let e of s){let t=y[e];if(t!==f.prototype[e])continue;let n=Lo(t),r=n?t.mock:void 0,i=n?Bo.get(t):void 0;y[e]=Vo({originalImplementation:a?i?.mockOriginal:void 0,prototypeState:r,prototypeConfig:i,keepMembersImplementation:a})}}else y=v.apply(this,n)}catch(e){throw b=e,x=!0,e instanceof TypeError&&e.message.includes(`is not a constructor`)&&console.warn(`[vitest] The ${d[u].getMockName()} mock did not use 'function' or 'class' in its implementation, see https://vitest.dev/api/vi#vi-spyon for examples.`),e}finally{x?(o.type=`throw`,o.value=b,l.type=`rejected`,l.value=b):(o.type=`return`,o.value=y,new.target&&(e.contexts[g-1]=y,e.instances[m-1]=y,_!=null&&r&&(r.contexts[_-1]=y),h!=null&&r&&(r.instances[h-1]=y)),y instanceof Promise?y.then(e=>{l.type=`fulfilled`,l.value=e},e=>{l.type=`rejected`,l.value=e}):(l.type=`fulfilled`,l.value=y))}return y})},f=d[u],p=c||l;return p&&es(f,p),f}function Jo(e,t,n){t.calls.push(e),n?.calls.push(e)}function Yo(e,t,n){t.invocationCallOrder.push(e),n?.invocationCallOrder.push(e)}function Xo(e,t,n){t.results.push(e),n?.results.push(e)}function Zo(e,t,n){t.settledResults.push(e),n?.settledResults.push(e)}function Qo(e,t,n){return[t.instances.push(e),n?.instances.push(e)]}function $o(e,t,n){return[t.contexts.push(e),n?.contexts.push(e)]}function es(e,t){let{properties:n,descriptors:r}=ns(t);for(let t of n){let n=r[t];Wo(e,t)||Object.defineProperty(e,t,n)}}const ts=new Set([`length`,`name`,`prototype`,Symbol.for(`nodejs.util.promisify.custom`)]);function ns(e){let t=new Set,n={};for(;e&&e!==Object.prototype&&e!==Function.prototype;){let r=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(let i of r)n[i]||ts.has(i)||(t.add(i),n[i]=Object.getOwnPropertyDescriptor(e,i));e=Object.getPrototypeOf(e)}return{properties:t,descriptors:n}}function rs(e){return{mockImplementation:void 0,mockOriginal:e,mockName:`vi.fn()`,onceMockImplementations:[]}}function is(){let e={calls:[],contexts:[],instances:[],invocationCallOrder:[],settledResults:[],results:[],get lastCall(){return e.calls.at(-1)}};return e}function as(){for(let e of Ro)e();Ro.clear()}function os(){zo.forEach(e=>e.mockClear())}function ss(){zo.forEach(e=>e.mockReset())}function cs(e){return e&&(e[`@@__IMMUTABLE_ITERABLE__@@`]||e[`@@__IMMUTABLE_RECORD__@@`])}const ls=Object.getPrototypeOf({});function us(e){return e instanceof Error?`<unserializable>: ${e.message}`:typeof e==`string`?`<unserializable>: ${e}`:`<unserializable>`}function ds(e,t=new WeakMap){if(!e||typeof e==`string`)return e;if(e instanceof Error&&`toJSON`in e&&typeof e.toJSON==`function`){let n=e.toJSON();return n&&n!==e&&typeof n==`object`&&(typeof e.message==`string`&&fs(()=>n.message??=ps(e.message)),typeof e.stack==`string`&&fs(()=>n.stack??=e.stack),typeof e.name==`string`&&fs(()=>n.name??=e.name),e.cause!=null&&fs(()=>n.cause??=ds(e.cause,t))),ds(n,t)}if(typeof e==`function`)return`Function<${e.name||`anonymous`}>`;if(typeof e==`symbol`)return e.toString();if(typeof e!=`object`)return e;if(typeof Buffer<`u`&&e instanceof Buffer)return`<Buffer(${e.length}) ...>`;if(typeof Uint8Array<`u`&&e instanceof Uint8Array)return`<Uint8Array(${e.length}) ...>`;if(cs(e))return ds(e.toJSON(),t);if(e instanceof Promise||e.constructor&&e.constructor.prototype===`AsyncFunction`)return`Promise`;if(typeof Element<`u`&&e instanceof Element)return e.tagName;if(typeof e.toJSON==`function`)return ds(e.toJSON(),t);if(t.has(e))return t.get(e);if(Array.isArray(e)){let n=Array(e.length);return t.set(e,n),e.forEach((e,r)=>{try{n[r]=ds(e,t)}catch(e){n[r]=us(e)}}),n}else{let n=Object.create(null);t.set(e,n);let r=e;for(;r&&r!==ls;)Object.getOwnPropertyNames(r).forEach(r=>{if(!(r in n))try{n[r]=ds(e[r],t)}catch(e){delete n[r],n[r]=us(e)}}),r=Object.getPrototypeOf(r);return e instanceof Error&&fs(()=>e.message=ps(e.message)),n}}function fs(e){try{return e()}catch{}}function ps(e){return e.replace(/__(vite_ssr_import|vi_import)_\d+__\./g,``)}function ms(e,t,n=new WeakSet){if(!e||typeof e!=`object`)return{message:String(e)};let r=e;(r.showDiff||r.showDiff===void 0&&r.expected!==void 0&&r.actual!==void 0)&&(r.diff=Ao(r.actual,r.expected,{...t,...r.diffOptions})),`expected`in r&&typeof r.expected!=`string`&&(r.expected=Ji(r.expected,10)),`actual`in r&&typeof r.actual!=`string`&&(r.actual=Ji(r.actual,10));try{!n.has(r)&&typeof r.cause==`object`&&(n.add(r),r.cause=ms(r.cause,t,n))}catch{}try{return ds(r)}catch(e){return ds(Error(`Failed to fully serialize error: ${e?.message}\nInner error message: ${r?.message}`))}}var hs=Object.defineProperty,gs=(e,t,n)=>t in e?hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H=(e,t)=>hs(e,`name`,{value:t,configurable:!0}),_s=(e,t)=>{for(var n in t)hs(e,n,{get:t[n],enumerable:!0})},vs=(e,t,n)=>gs(e,typeof t==`symbol`?t:t+``,n),U={};_s(U,{addChainableMethod:()=>El,addLengthGuard:()=>dl,addMethod:()=>gl,addProperty:()=>ll,checkError:()=>ys,compareByInspect:()=>Ol,eql:()=>Ic,events:()=>al,expectTypes:()=>As,flag:()=>W,getActual:()=>js,getMessage:()=>kc,getName:()=>Pl,getOperator:()=>Nl,getOwnEnumerableProperties:()=>Al,getOwnEnumerablePropertySymbols:()=>kl,getPathInfo:()=>rl,hasProperty:()=>el,inspect:()=>J,isNaN:()=>jl,isNumeric:()=>X,isProxyEnabled:()=>cl,isRegExp:()=>Fl,objDisplay:()=>Oc,overwriteChainableMethod:()=>Dl,overwriteMethod:()=>vl,overwriteProperty:()=>_l,proxify:()=>ml,test:()=>Ds,transferFlags:()=>Ac,type:()=>G});var ys={};_s(ys,{compatibleConstructor:()=>Cs,compatibleInstance:()=>Ss,compatibleMessage:()=>ws,getConstructorName:()=>Ts,getMessage:()=>Es});function bs(e){return e instanceof Error||Object.prototype.toString.call(e)===`[object Error]`}H(bs,`isErrorInstance`);function xs(e){return Object.prototype.toString.call(e)===`[object RegExp]`}H(xs,`isRegExp`);function Ss(e,t){return bs(t)&&e===t}H(Ss,`compatibleInstance`);function Cs(e,t){return bs(t)?e.constructor===t.constructor||e instanceof t.constructor:(typeof t==`object`||typeof t==`function`)&&t.prototype?e.constructor===t||e instanceof t:!1}H(Cs,`compatibleConstructor`);function ws(e,t){let n=typeof e==`string`?e:e.message;return xs(t)?t.test(n):typeof t==`string`?n.indexOf(t)!==-1:!1}H(ws,`compatibleMessage`);function Ts(e){let t=e;return bs(e)?t=e.constructor.name:typeof e==`function`&&(t=e.name,t===``&&(t=new e().name||t)),t}H(Ts,`getConstructorName`);function Es(e){let t=``;return e&&e.message?t=e.message:typeof e==`string`&&(t=e),t}H(Es,`getMessage`);function W(e,t,n){let r=e.__flags||=Object.create(null);if(arguments.length===3)r[t]=n;else return r[t]}H(W,`flag`);function Ds(e,t){let n=W(e,`negate`),r=t[0];return n?!r:r}H(Ds,`test`);function G(e){if(e===void 0)return`undefined`;if(e===null)return`null`;let t=e[Symbol.toStringTag];return typeof t==`string`?t:Object.prototype.toString.call(e).slice(8,-1)}H(G,`type`);var Os=`captureStackTrace`in Error,ks=class e extends Error{constructor(t=`Unspecified AssertionError`,n,r){for(let i in super(t),vs(this,`message`),this.message=t,Os&&Error.captureStackTrace(this,r||e),n)i in this||(this[i]=n[i])}get name(){return`AssertionError`}get ok(){return!1}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e===!1?void 0:this.stack}}};H(ks,`AssertionError`);var K=ks;function As(e,t){let n=W(e,`message`),r=W(e,`ssfi`);n=n?n+`: `:``,e=W(e,`object`),t=t.map(function(e){return e.toLowerCase()}),t.sort();let i=t.map(function(e,n){let r=~[`a`,`e`,`i`,`o`,`u`].indexOf(e.charAt(0))?`an`:`a`;return(t.length>1&&n===t.length-1?`or `:``)+r+` `+e}).join(`, `),a=G(e).toLowerCase();if(!t.some(function(e){return a===e}))throw new K(n+`object tested must be `+i+`, but `+a+` given`,void 0,r)}H(As,`expectTypes`);function js(e,t){return t.length>4?t[4]:e._obj}H(js,`getActual`);var Ms={bold:[`1`,`22`],dim:[`2`,`22`],italic:[`3`,`23`],underline:[`4`,`24`],inverse:[`7`,`27`],hidden:[`8`,`28`],strike:[`9`,`29`],black:[`30`,`39`],red:[`31`,`39`],green:[`32`,`39`],yellow:[`33`,`39`],blue:[`34`,`39`],magenta:[`35`,`39`],cyan:[`36`,`39`],white:[`37`,`39`],brightblack:[`30;1`,`39`],brightred:[`31;1`,`39`],brightgreen:[`32;1`,`39`],brightyellow:[`33;1`,`39`],brightblue:[`34;1`,`39`],brightmagenta:[`35;1`,`39`],brightcyan:[`36;1`,`39`],brightwhite:[`37;1`,`39`],grey:[`90`,`39`]},Ns={special:`cyan`,number:`yellow`,bigint:`yellow`,boolean:`yellow`,undefined:`grey`,null:`bold`,string:`green`,symbol:`green`,date:`magenta`,regexp:`red`},Ps=`…`;function Fs(e,t){let n=Ms[Ns[t]]||Ms[t]||``;return n?`\x1B[${n[0]}m${String(e)}\x1B[${n[1]}m`:String(e)}H(Fs,`colorise`);function Is({showHidden:e=!1,depth:t=2,colors:n=!1,customInspect:r=!0,showProxy:i=!1,maxArrayLength:a=1/0,breakLength:o=1/0,seen:s=[],truncate:c=1/0,stylize:l=String}={},u){let d={showHidden:!!e,depth:Number(t),colors:!!n,customInspect:!!r,showProxy:!!i,maxArrayLength:Number(a),breakLength:Number(o),truncate:Number(c),seen:s,inspect:u,stylize:l};return d.colors&&(d.stylize=Fs),d}H(Is,`normaliseOptions`);function Ls(e){return e>=`\ud800`&&e<=`\udbff`}H(Ls,`isHighSurrogate`);function Rs(e,t,n=Ps){e=String(e);let r=n.length,i=e.length;if(r>t&&i>r)return n;if(i>t&&i>r){let i=t-r;return i>0&&Ls(e[i-1])&&--i,`${e.slice(0,i)}${n}`}return e}H(Rs,`truncate`);function zs(e,t,n,r=`, `){n||=t.inspect;let i=e.length;if(i===0)return``;let a=t.truncate,o=``,s=``,c=``;for(let l=0;l<i;l+=1){let i=l+1===e.length,u=l+2===e.length;c=`${Ps}(${e.length-l})`;let d=e[l];t.truncate=a-o.length-(i?0:r.length);let f=s||n(d,t)+(i?``:r),p=o.length+f.length,m=p+c.length;if(i&&p>a&&o.length+c.length<=a||!i&&!u&&m>a||(s=i?``:n(e[l+1],t)+(u?``:r),!i&&u&&m>a&&p+s.length>a))break;if(o+=f,!i&&!u&&p+s.length>=a){c=`${Ps}(${e.length-l-1})`;break}c=``}return`${o}${c}`}H(zs,`inspectList`);function Bs(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,`\\'`).replace(/\\"/g,`"`).replace(/(^"|"$)/g,`'`)}H(Bs,`quoteComplexKey`);function Vs([e,t],n){return n.truncate-=2,typeof e==`string`?e=Bs(e):typeof e!=`number`&&(e=`[${n.inspect(e,n)}]`),n.truncate-=e.length,t=n.inspect(t,n),`${e}: ${t}`}H(Vs,`inspectProperty`);function Hs(e,t){let n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return`[]`;t.truncate-=4;let r=zs(e,t);t.truncate-=r.length;let i=``;return n.length&&(i=zs(n.map(t=>[t,e[t]]),t,Vs)),`[ ${r}${i?`, ${i}`:``} ]`}H(Hs,`inspectArray`);var Us=H(e=>typeof Buffer==`function`&&e instanceof Buffer?`Buffer`:e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name,`getArrayName`);function Ws(e,t){let n=Us(e);t.truncate-=n.length+4;let r=Object.keys(e).slice(e.length);if(!e.length&&!r.length)return`${n}[]`;let i=``;for(let n=0;n<e.length;n++){let r=`${t.stylize(Rs(e[n],t.truncate),`number`)}${n===e.length-1?``:`, `}`;if(t.truncate-=r.length,e[n]!==e.length&&t.truncate<=3){i+=`${Ps}(${e.length-e[n]+1})`;break}i+=r}let a=``;return r.length&&(a=zs(r.map(t=>[t,e[t]]),t,Vs)),`${n}[ ${i}${a?`, ${a}`:``} ]`}H(Ws,`inspectTypedArray`);function Gs(e,t){let n=e.toJSON();if(n===null)return`Invalid Date`;let r=n.split(`T`),i=r[0];return t.stylize(`${i}T${Rs(r[1],t.truncate-i.length-1)}`,`date`)}H(Gs,`inspectDate`);function Ks(e,t){let n=e[Symbol.toStringTag]||`Function`,r=e.name;return r?t.stylize(`[${n} ${Rs(r,t.truncate-11)}]`,`special`):t.stylize(`[${n}]`,`special`)}H(Ks,`inspectFunction`);function qs([e,t],n){return n.truncate-=4,e=n.inspect(e,n),n.truncate-=e.length,t=n.inspect(t,n),`${e} => ${t}`}H(qs,`inspectMapEntry`);function Js(e){let t=[];return e.forEach((e,n)=>{t.push([n,e])}),t}H(Js,`mapToEntries`);function Ys(e,t){return e.size===0?`Map{}`:(t.truncate-=7,`Map{ ${zs(Js(e),t,qs)} }`)}H(Ys,`inspectMap`);var Xs=Number.isNaN||(e=>e!==e);function Zs(e,t){return Xs(e)?t.stylize(`NaN`,`number`):e===1/0?t.stylize(`Infinity`,`number`):e===-1/0?t.stylize(`-Infinity`,`number`):e===0?t.stylize(1/e==1/0?`+0`:`-0`,`number`):t.stylize(Rs(String(e),t.truncate),`number`)}H(Zs,`inspectNumber`);function Qs(e,t){let n=Rs(e.toString(),t.truncate-1);return n!==Ps&&(n+=`n`),t.stylize(n,`bigint`)}H(Qs,`inspectBigInt`);function $s(e,t){let n=e.toString().split(`/`)[2],r=t.truncate-(2+n.length),i=e.source;return t.stylize(`/${Rs(i,r)}/${n}`,`regexp`)}H($s,`inspectRegExp`);function ec(e){let t=[];return e.forEach(e=>{t.push(e)}),t}H(ec,`arrayFromSet`);function tc(e,t){return e.size===0?`Set{}`:(t.truncate-=7,`Set{ ${zs(ec(e),t)} }`)}H(tc,`inspectSet`);var nc=RegExp(`['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]`,`g`),rc={"\b":`\\b`,"	":`\\t`,"\n":`\\n`,"\f":`\\f`,"\r":`\\r`,"'":`\\'`,"\\":`\\\\`},ic=16,ac=4;function oc(e){return rc[e]||`\\u${`0000${e.charCodeAt(0).toString(ic)}`.slice(-ac)}`}H(oc,`escape`);function sc(e,t){return nc.test(e)&&(e=e.replace(nc,oc)),t.stylize(`'${Rs(e,t.truncate-2)}'`,`string`)}H(sc,`inspectString`);function cc(e){return`description`in Symbol.prototype?e.description?`Symbol(${e.description})`:`Symbol()`:e.toString()}H(cc,`inspectSymbol`);var lc=H(()=>`Promise{…}`,`getPromiseValue`);function uc(e,t){let n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(n.length===0&&r.length===0)return`{}`;if(t.truncate-=4,t.seen=t.seen||[],t.seen.includes(e))return`[Circular]`;t.seen.push(e);let i=zs(n.map(t=>[t,e[t]]),t,Vs),a=zs(r.map(t=>[t,e[t]]),t,Vs);t.seen.pop();let o=``;return i&&a&&(o=`, `),`{ ${i}${o}${a} }`}H(uc,`inspectObject`);var dc=typeof Symbol<`u`&&Symbol.toStringTag?Symbol.toStringTag:!1;function fc(e,t){let n=``;return dc&&dc in e&&(n=e[dc]),n||=e.constructor.name,(!n||n===`_class`)&&(n=`<Anonymous Class>`),t.truncate-=n.length,`${n}${uc(e,t)}`}H(fc,`inspectClass`);function pc(e,t){return e.length===0?`Arguments[]`:(t.truncate-=13,`Arguments[ ${zs(e,t)} ]`)}H(pc,`inspectArguments`);var mc=[`stack`,`line`,`column`,`name`,`message`,`fileName`,`lineNumber`,`columnNumber`,`number`,`description`,`cause`];function hc(e,t){let n=Object.getOwnPropertyNames(e).filter(e=>mc.indexOf(e)===-1),r=e.name;t.truncate-=r.length;let i=``;if(typeof e.message==`string`?i=Rs(e.message,t.truncate):n.unshift(`message`),i=i?`: ${i}`:``,t.truncate-=i.length+5,t.seen=t.seen||[],t.seen.includes(e))return`[Circular]`;t.seen.push(e);let a=zs(n.map(t=>[t,e[t]]),t,Vs);return`${r}${i}${a?` { ${a} }`:``}`}H(hc,`inspectObject`);function gc([e,t],n){return n.truncate-=3,t?`${n.stylize(String(e),`yellow`)}=${n.stylize(`"${t}"`,`string`)}`:`${n.stylize(String(e),`yellow`)}`}H(gc,`inspectAttribute`);function _c(e,t){return zs(e,t,vc,`
`)}H(_c,`inspectNodeCollection`);function vc(e,t){switch(e.nodeType){case 1:return yc(e,t);case 3:return t.inspect(e.data,t);default:return t.inspect(e,t)}}H(vc,`inspectNode`);function yc(e,t){let n=e.getAttributeNames(),r=e.tagName.toLowerCase(),i=t.stylize(`<${r}`,`special`),a=t.stylize(`>`,`special`),o=t.stylize(`</${r}>`,`special`);t.truncate-=r.length*2+5;let s=``;n.length>0&&(s+=` `,s+=zs(n.map(t=>[t,e.getAttribute(t)]),t,gc,` `)),t.truncate-=s.length;let c=t.truncate,l=_c(e.children,t);return l&&l.length>c&&(l=`${Ps}(${e.children.length})`),`${i}${s}${a}${l}${o}`}H(yc,`inspectHTML`);var bc=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`chai/inspect`):`@@chai/inspect`,xc=Symbol.for(`nodejs.util.inspect.custom`),Sc=new WeakMap,Cc={},wc={undefined:H((e,t)=>t.stylize(`undefined`,`undefined`),`undefined`),null:H((e,t)=>t.stylize(`null`,`null`),`null`),boolean:H((e,t)=>t.stylize(String(e),`boolean`),`boolean`),Boolean:H((e,t)=>t.stylize(String(e),`boolean`),`Boolean`),number:Zs,Number:Zs,bigint:Qs,BigInt:Qs,string:sc,String:sc,function:Ks,Function:Ks,symbol:cc,Symbol:cc,Array:Hs,Date:Gs,Map:Ys,Set:tc,RegExp:$s,Promise:lc,WeakSet:H((e,t)=>t.stylize(`WeakSet{…}`,`special`),`WeakSet`),WeakMap:H((e,t)=>t.stylize(`WeakMap{…}`,`special`),`WeakMap`),Arguments:pc,Int8Array:Ws,Uint8Array:Ws,Uint8ClampedArray:Ws,Int16Array:Ws,Uint16Array:Ws,Int32Array:Ws,Uint32Array:Ws,Float32Array:Ws,Float64Array:Ws,Generator:H(()=>``,`Generator`),DataView:H(()=>``,`DataView`),ArrayBuffer:H(()=>``,`ArrayBuffer`),Error:hc,HTMLCollection:_c,NodeList:_c},Tc=H((e,t,n,r)=>bc in e&&typeof e[bc]==`function`?e[bc](t):xc in e&&typeof e[xc]==`function`?e[xc](t.depth,t,r):`inspect`in e&&typeof e.inspect==`function`?e.inspect(t.depth,t):`constructor`in e&&Sc.has(e.constructor)?Sc.get(e.constructor)(e,t):Cc[n]?Cc[n](e,t):``,`inspectCustom`),Ec=Object.prototype.toString;function Dc(e,t={}){let n=Is(t,Dc),{customInspect:r}=n,i=e===null?`null`:typeof e;if(i===`object`&&(i=Ec.call(e).slice(8,-1)),i in wc)return wc[i](e,n);if(r&&e){let t=Tc(e,n,i,Dc);if(t)return typeof t==`string`?t:Dc(t,n)}let a=e?Object.getPrototypeOf(e):!1;return a===Object.prototype||a===null?uc(e,n):e&&typeof HTMLElement==`function`&&e instanceof HTMLElement?yc(e,n):`constructor`in e?e.constructor===Object?uc(e,n):fc(e,n):e===Object(e)?uc(e,n):n.stylize(String(e),i)}H(Dc,`inspect`);var q={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:[`then`,`catch`,`inspect`,`toJSON`],deepEqual:null};function J(e,t,n,r){return Dc(e,{colors:r,depth:n===void 0?2:n,showHidden:t,truncate:q.truncateThreshold?q.truncateThreshold:1/0})}H(J,`inspect`);function Oc(e){let t=J(e),n=Object.prototype.toString.call(e);if(q.truncateThreshold&&t.length>=q.truncateThreshold){if(n===`[object Function]`)return!e.name||e.name===``?`[Function]`:`[Function: `+e.name+`]`;if(n===`[object Array]`)return`[ Array(`+e.length+`) ]`;if(n===`[object Object]`){let t=Object.keys(e);return`{ Object (`+(t.length>2?t.splice(0,2).join(`, `)+`, ...`:t.join(`, `))+`) }`}else return t}else return t}H(Oc,`objDisplay`);function kc(e,t){let n=W(e,`negate`),r=W(e,`object`),i=t[3],a=js(e,t),o=n?t[2]:t[1],s=W(e,`message`);return typeof o==`function`&&(o=o()),o||=``,o=o.replace(/#\{this\}/g,function(){return Oc(r)}).replace(/#\{act\}/g,function(){return Oc(a)}).replace(/#\{exp\}/g,function(){return Oc(i)}),s?s+`: `+o:o}H(kc,`getMessage`);function Ac(e,t,n){let r=e.__flags||=Object.create(null);for(let e in t.__flags||=Object.create(null),n=arguments.length===3?n:!0,r)(n||e!==`object`&&e!==`ssfi`&&e!==`lockSsfi`&&e!=`message`)&&(t.__flags[e]=r[e])}H(Ac,`transferFlags`);function jc(e){if(e===void 0)return`undefined`;if(e===null)return`null`;let t=e[Symbol.toStringTag];return typeof t==`string`?t:Object.prototype.toString.call(e).slice(8,-1)}H(jc,`type`);function Mc(){this._key=`chai/deep-eql__`+Math.random()+Date.now()}H(Mc,`FakeMap`),Mc.prototype={get:H(function(e){return e[this._key]},`get`),set:H(function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})},`set`)};var Nc=typeof WeakMap==`function`?WeakMap:Mc;function Pc(e,t,n){if(!n||Qc(e)||Qc(t))return null;var r=n.get(e);if(r){var i=r.get(t);if(typeof i==`boolean`)return i}return null}H(Pc,`memoizeCompare`);function Fc(e,t,n,r){if(!(!n||Qc(e)||Qc(t))){var i=n.get(e);i?i.set(t,r):(i=new Nc,i.set(t,r),n.set(e,i))}}H(Fc,`memoizeSet`);var Ic=Lc;function Lc(e,t,n){if(n&&n.comparator)return zc(e,t,n);var r=Rc(e,t);return r===null?zc(e,t,n):r}H(Lc,`deepEqual`);function Rc(e,t){return e===t?e!==0||1/e==1/t:e!==e&&t!==t?!0:Qc(e)||Qc(t)?!1:null}H(Rc,`simpleEqual`);function zc(e,t,n){n||={},n.memoize=n.memoize===!1?!1:n.memoize||new Nc;var r=n&&n.comparator,i=Pc(e,t,n.memoize);if(i!==null)return i;var a=Pc(t,e,n.memoize);if(a!==null)return a;if(r){var o=r(e,t);if(o===!1||o===!0)return Fc(e,t,n.memoize,o),o;var s=Rc(e,t);if(s!==null)return s}var c=jc(e);if(c!==jc(t))return Fc(e,t,n.memoize,!1),!1;Fc(e,t,n.memoize,!0);var l=Bc(e,t,c,n);return Fc(e,t,n.memoize,l),l}H(zc,`extensiveDeepEqual`);function Bc(e,t,n,r){switch(n){case`String`:case`Number`:case`Boolean`:case`Date`:return Lc(e.valueOf(),t.valueOf());case`Promise`:case`Symbol`:case`function`:case`WeakMap`:case`WeakSet`:return e===t;case`Error`:return Xc(e,t,[`name`,`message`,`code`],r);case`Arguments`:case`Int8Array`:case`Uint8Array`:case`Uint8ClampedArray`:case`Int16Array`:case`Uint16Array`:case`Int32Array`:case`Uint32Array`:case`Float32Array`:case`Float64Array`:case`Array`:return Uc(e,t,r);case`RegExp`:return Vc(e,t);case`Generator`:return Wc(e,t,r);case`DataView`:return Uc(new Uint8Array(e.buffer),new Uint8Array(t.buffer),r);case`ArrayBuffer`:return Uc(new Uint8Array(e),new Uint8Array(t),r);case`Set`:return Hc(e,t,r);case`Map`:return Hc(e,t,r);case`Temporal.PlainDate`:case`Temporal.PlainTime`:case`Temporal.PlainDateTime`:case`Temporal.Instant`:case`Temporal.ZonedDateTime`:case`Temporal.PlainYearMonth`:case`Temporal.PlainMonthDay`:return e.equals(t);case`Temporal.Duration`:return e.total(`nanoseconds`)===t.total(`nanoseconds`);case`Temporal.TimeZone`:case`Temporal.Calendar`:return e.toString()===t.toString();default:return Zc(e,t,r)}}H(Bc,`extensiveDeepEqualByType`);function Vc(e,t){return e.toString()===t.toString()}H(Vc,`regexpEqual`);function Hc(e,t,n){try{if(e.size!==t.size)return!1;if(e.size===0)return!0}catch{return!1}var r=[],i=[];return e.forEach(H(function(e,t){r.push([e,t])},`gatherEntries`)),t.forEach(H(function(e,t){i.push([e,t])},`gatherEntries`)),Uc(r.sort(),i.sort(),n)}H(Hc,`entriesEqual`);function Uc(e,t,n){var r=e.length;if(r!==t.length)return!1;if(r===0)return!0;for(var i=-1;++i<r;)if(Lc(e[i],t[i],n)===!1)return!1;return!0}H(Uc,`iterableEqual`);function Wc(e,t,n){return Uc(qc(e),qc(t),n)}H(Wc,`generatorEqual`);function Gc(e){return typeof Symbol<`u`&&typeof e==`object`&&Symbol.iterator!==void 0&&typeof e[Symbol.iterator]==`function`}H(Gc,`hasIteratorFunction`);function Kc(e){if(Gc(e))try{return qc(e[Symbol.iterator]())}catch{return[]}return[]}H(Kc,`getIteratorEntries`);function qc(e){for(var t=e.next(),n=[t.value];t.done===!1;)t=e.next(),n.push(t.value);return n}H(qc,`getGeneratorEntries`);function Jc(e){var t=[];for(var n in e)t.push(n);return t}H(Jc,`getEnumerableKeys`);function Yc(e){for(var t=[],n=Object.getOwnPropertySymbols(e),r=0;r<n.length;r+=1){var i=n[r];Object.getOwnPropertyDescriptor(e,i).enumerable&&t.push(i)}return t}H(Yc,`getEnumerableSymbols`);function Xc(e,t,n,r){var i=n.length;if(i===0)return!0;for(var a=0;a<i;a+=1)if(Lc(e[n[a]],t[n[a]],r)===!1)return!1;return!0}H(Xc,`keysEqual`);function Zc(e,t,n){var r=Jc(e),i=Jc(t),a=Yc(e),o=Yc(t);if(r=r.concat(a),i=i.concat(o),r.length&&r.length===i.length)return Uc($c(r).sort(),$c(i).sort())===!1?!1:Xc(e,t,r,n);var s=Kc(e),c=Kc(t);return s.length&&s.length===c.length?(s.sort(),c.sort(),Uc(s,c,n)):r.length===0&&s.length===0&&i.length===0&&c.length===0}H(Zc,`objectEqual`);function Qc(e){return typeof e!=`object`||!e}H(Qc,`isPrimitive`);function $c(e){return e.map(H(function(e){return typeof e==`symbol`?e.toString():e},`mapSymbol`))}H($c,`mapSymbols`);function el(e,t){return e==null?!1:t in Object(e)}H(el,`hasProperty`);function tl(e){return e.replace(/([^\\])\[/g,`$1.[`).match(/(\\\.|[^.]+?)+/g).map(e=>{if(e===`constructor`||e===`__proto__`||e===`prototype`)return{};let t=/^\[(\d+)\]$/.exec(e),n=null;return n=t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.[\]])/g,`$1`)},n})}H(tl,`parsePath`);function nl(e,t,n){let r=e,i=null;n=n===void 0?t.length:n;for(let e=0;e<n;e++){let a=t[e];r&&(r=a.p===void 0?r[a.i]:r[a.p],e===n-1&&(i=r))}return i}H(nl,`internalGetPathValue`);function rl(e,t){let n=tl(t),r=n[n.length-1],i={parent:n.length>1?nl(e,n,n.length-1):e,name:r.p||r.i,value:nl(e,n)};return i.exists=el(i.parent,i.name),i}H(rl,`getPathInfo`);var il=class e{constructor(t,n,r,i){return vs(this,`__flags`,{}),W(this,`ssfi`,r||e),W(this,`lockSsfi`,i),W(this,`object`,t),W(this,`message`,n),W(this,`eql`,q.deepEqual||Ic),ml(this)}static get includeStack(){return console.warn(`Assertion.includeStack is deprecated, use chai.config.includeStack instead.`),q.includeStack}static set includeStack(e){console.warn(`Assertion.includeStack is deprecated, use chai.config.includeStack instead.`),q.includeStack=e}static get showDiff(){return console.warn(`Assertion.showDiff is deprecated, use chai.config.showDiff instead.`),q.showDiff}static set showDiff(e){console.warn(`Assertion.showDiff is deprecated, use chai.config.showDiff instead.`),q.showDiff=e}static addProperty(e,t){ll(this.prototype,e,t)}static addMethod(e,t){gl(this.prototype,e,t)}static addChainableMethod(e,t,n){El(this.prototype,e,t,n)}static overwriteProperty(e,t){_l(this.prototype,e,t)}static overwriteMethod(e,t){vl(this.prototype,e,t)}static overwriteChainableMethod(e,t,n){Dl(this.prototype,e,t,n)}assert(e,t,n,r,i,a){let o=Ds(this,arguments);if(!1!==a&&(a=!0),r===void 0&&i===void 0&&(a=!1),!0!==q.showDiff&&(a=!1),!o){t=kc(this,arguments);let e={actual:js(this,arguments),expected:r,showDiff:a},n=Nl(this,arguments);throw n&&(e.operator=n),new K(t,e,q.includeStack?this.assert:W(this,`ssfi`))}}get _obj(){return W(this,`object`)}set _obj(e){W(this,`object`,e)}};H(il,`Assertion`);var Y=il,al=new EventTarget,ol=class extends Event{constructor(e,t,n){super(e),this.name=String(t),this.fn=n}};H(ol,`PluginEvent`);var sl=ol;function cl(){return q.useProxy&&typeof Proxy<`u`&&typeof Reflect<`u`}H(cl,`isProxyEnabled`);function ll(e,t,n){n=n===void 0?function(){}:n,Object.defineProperty(e,t,{get:H(function e(){!cl()&&!W(this,`lockSsfi`)&&W(this,`ssfi`,e);let t=n.call(this);if(t!==void 0)return t;let r=new Y;return Ac(this,r),r},`propertyGetter`),configurable:!0}),al.dispatchEvent(new sl(`addProperty`,t,n))}H(ll,`addProperty`);var ul=Object.getOwnPropertyDescriptor(function(){},`length`);function dl(e,t,n){return ul.configurable&&Object.defineProperty(e,`length`,{get:H(function(){throw n?Error(`Invalid Chai property: `+t+`.length. Due to a compatibility issue, "length" cannot directly follow "`+t+`". Use "`+t+`.lengthOf" instead.`):Error(`Invalid Chai property: `+t+`.length. See docs for proper usage of "`+t+`".`)},`get`)}),e}H(dl,`addLengthGuard`);function fl(e){let t=Object.getOwnPropertyNames(e);function n(e){t.indexOf(e)===-1&&t.push(e)}H(n,`addProperty`);let r=Object.getPrototypeOf(e);for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return t}H(fl,`getProperties`);var pl=[`__flags`,`__methods`,`_obj`,`assert`];function ml(e,t){return cl()?new Proxy(e,{get:H(function e(n,r){if(typeof r==`string`&&q.proxyExcludedKeys.indexOf(r)===-1&&!Reflect.has(n,r)){if(t)throw Error(`Invalid Chai property: `+t+`.`+r+`. See docs for proper usage of "`+t+`".`);let e=null,i=4;throw fl(n).forEach(function(t){if(!Object.prototype.hasOwnProperty(t)&&pl.indexOf(t)===-1){let n=hl(r,t,i);n<i&&(e=t,i=n)}}),e===null?Error(`Invalid Chai property: `+r):Error(`Invalid Chai property: `+r+`. Did you mean "`+e+`"?`)}return pl.indexOf(r)===-1&&!W(n,`lockSsfi`)&&W(n,`ssfi`,e),Reflect.get(n,r)},`proxyGetter`)}):e}H(ml,`proxify`);function hl(e,t,n){if(Math.abs(e.length-t.length)>=n)return n;let r=[];for(let n=0;n<=e.length;n++)r[n]=Array(t.length+1).fill(0),r[n][0]=n;for(let e=0;e<t.length;e++)r[0][e]=e;for(let i=1;i<=e.length;i++){let a=e.charCodeAt(i-1);for(let e=1;e<=t.length;e++){if(Math.abs(i-e)>=n){r[i][e]=n;continue}r[i][e]=Math.min(r[i-1][e]+1,r[i][e-1]+1,r[i-1][e-1]+(a===t.charCodeAt(e-1)?0:1))}}return r[e.length][t.length]}H(hl,`stringDistanceCapped`);function gl(e,t,n){let r=H(function(){W(this,`lockSsfi`)||W(this,`ssfi`,r);let e=n.apply(this,arguments);if(e!==void 0)return e;let t=new Y;return Ac(this,t),t},`methodWrapper`);dl(r,t,!1),e[t]=ml(r,t),al.dispatchEvent(new sl(`addMethod`,t,n))}H(gl,`addMethod`);function _l(e,t,n){let r=Object.getOwnPropertyDescriptor(e,t),i=H(function(){},`_super`);r&&typeof r.get==`function`&&(i=r.get),Object.defineProperty(e,t,{get:H(function e(){!cl()&&!W(this,`lockSsfi`)&&W(this,`ssfi`,e);let t=W(this,`lockSsfi`);W(this,`lockSsfi`,!0);let r=n(i).call(this);if(W(this,`lockSsfi`,t),r!==void 0)return r;let a=new Y;return Ac(this,a),a},`overwritingPropertyGetter`),configurable:!0})}H(_l,`overwriteProperty`);function vl(e,t,n){let r=e[t],i=H(function(){throw Error(t+` is not a function`)},`_super`);r&&typeof r==`function`&&(i=r);let a=H(function(){W(this,`lockSsfi`)||W(this,`ssfi`,a);let e=W(this,`lockSsfi`);W(this,`lockSsfi`,!0);let t=n(i).apply(this,arguments);if(W(this,`lockSsfi`,e),t!==void 0)return t;let r=new Y;return Ac(this,r),r},`overwritingMethodWrapper`);dl(a,t,!1),e[t]=ml(a,t)}H(vl,`overwriteMethod`);var yl=typeof Object.setPrototypeOf==`function`,bl=H(function(){},`testFn`),xl=Object.getOwnPropertyNames(bl).filter(function(e){let t=Object.getOwnPropertyDescriptor(bl,e);return typeof t==`object`?!t.configurable:!0}),Sl=Function.prototype.call,Cl=Function.prototype.apply,wl=class extends sl{constructor(e,t,n,r){super(e,t,n),this.chainingBehavior=r}};H(wl,`PluginAddChainableMethodEvent`);var Tl=wl;function El(e,t,n,r){typeof r!=`function`&&(r=H(function(){},`chainingBehavior`));let i={method:n,chainingBehavior:r};e.__methods||={},e.__methods[t]=i,Object.defineProperty(e,t,{get:H(function(){i.chainingBehavior.call(this);let n=H(function(){W(this,`lockSsfi`)||W(this,`ssfi`,n);let e=i.method.apply(this,arguments);if(e!==void 0)return e;let t=new Y;return Ac(this,t),t},`chainableMethodWrapper`);if(dl(n,t,!0),yl){let e=Object.create(this);e.call=Sl,e.apply=Cl,Object.setPrototypeOf(n,e)}else Object.getOwnPropertyNames(e).forEach(function(t){if(xl.indexOf(t)!==-1)return;let r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r)});return Ac(this,n),ml(n)},`chainableMethodGetter`),configurable:!0}),al.dispatchEvent(new Tl(`addChainableMethod`,t,n,r))}H(El,`addChainableMethod`);function Dl(e,t,n,r){let i=e.__methods[t],a=i.chainingBehavior;i.chainingBehavior=H(function(){let e=r(a).call(this);if(e!==void 0)return e;let t=new Y;return Ac(this,t),t},`overwritingChainableMethodGetter`);let o=i.method;i.method=H(function(){let e=n(o).apply(this,arguments);if(e!==void 0)return e;let t=new Y;return Ac(this,t),t},`overwritingChainableMethodWrapper`)}H(Dl,`overwriteChainableMethod`);function Ol(e,t){return J(e)<J(t)?-1:1}H(Ol,`compareByInspect`);function kl(e){return typeof Object.getOwnPropertySymbols==`function`?Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}):[]}H(kl,`getOwnEnumerablePropertySymbols`);function Al(e){return Object.keys(e).concat(kl(e))}H(Al,`getOwnEnumerableProperties`);var jl=Number.isNaN;function Ml(e){let t=G(e);return[`Array`,`Object`,`Function`].indexOf(t)!==-1}H(Ml,`isObjectType`);function Nl(e,t){let n=W(e,`operator`),r=W(e,`negate`),i=t[3],a=r?t[2]:t[1];if(n)return n;if(typeof a==`function`&&(a=a()),a||=``,!a||/\shave\s/.test(a))return;let o=Ml(i);return/\snot\s/.test(a)?o?`notDeepStrictEqual`:`notStrictEqual`:o?`deepStrictEqual`:`strictEqual`}H(Nl,`getOperator`);function Pl(e){return e.name}H(Pl,`getName`);function Fl(e){return Object.prototype.toString.call(e)===`[object RegExp]`}H(Fl,`isRegExp`);function X(e){return[`Number`,`BigInt`].includes(G(e))}H(X,`isNumeric`);var{flag:Z}=U;[`to`,`be`,`been`,`is`,`and`,`has`,`have`,`with`,`that`,`which`,`at`,`of`,`same`,`but`,`does`,`still`,`also`].forEach(function(e){Y.addProperty(e)}),Y.addProperty(`not`,function(){Z(this,`negate`,!0)}),Y.addProperty(`deep`,function(){Z(this,`deep`,!0)}),Y.addProperty(`nested`,function(){Z(this,`nested`,!0)}),Y.addProperty(`own`,function(){Z(this,`own`,!0)}),Y.addProperty(`ordered`,function(){Z(this,`ordered`,!0)}),Y.addProperty(`any`,function(){Z(this,`any`,!0),Z(this,`all`,!1)}),Y.addProperty(`all`,function(){Z(this,`all`,!0),Z(this,`any`,!1)});var Il={function:[`function`,`asyncfunction`,`generatorfunction`,`asyncgeneratorfunction`],asyncfunction:[`asyncfunction`,`asyncgeneratorfunction`],generatorfunction:[`generatorfunction`,`asyncgeneratorfunction`],asyncgeneratorfunction:[`asyncgeneratorfunction`]};function Ll(e,t){t&&Z(this,`message`,t),e=e.toLowerCase();let n=Z(this,`object`),r=~[`a`,`e`,`i`,`o`,`u`].indexOf(e.charAt(0))?`an `:`a `,i=G(n).toLowerCase();Il.function.includes(e)?this.assert(Il[e].includes(i),`expected #{this} to be `+r+e,`expected #{this} not to be `+r+e):this.assert(e===i,`expected #{this} to be `+r+e,`expected #{this} not to be `+r+e)}H(Ll,`an`),Y.addChainableMethod(`an`,Ll),Y.addChainableMethod(`a`,Ll);function Rl(e,t){return jl(e)&&jl(t)||e===t}H(Rl,`SameValueZero`);function zl(){Z(this,`contains`,!0)}H(zl,`includeChainingBehavior`);function Bl(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=G(n).toLowerCase(),i=Z(this,`message`),a=Z(this,`negate`),o=Z(this,`ssfi`),s=Z(this,`deep`),c=s?`deep `:``,l=s?Z(this,`eql`):Rl;i=i?i+`: `:``;let u=!1;switch(r){case`string`:u=n.indexOf(e)!==-1;break;case`weakset`:if(s)throw new K(i+`unable to use .deep.include with WeakSet`,void 0,o);u=n.has(e);break;case`map`:n.forEach(function(t){u||=l(t,e)});break;case`set`:s?n.forEach(function(t){u||=l(t,e)}):u=n.has(e);break;case`array`:u=s?n.some(function(t){return l(t,e)}):n.indexOf(e)!==-1;break;default:{if(e!==Object(e))throw new K(i+`the given combination of arguments (`+r+` and `+G(e).toLowerCase()+`) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a `+G(e).toLowerCase(),void 0,o);let t=Object.keys(e),s=null,c=0;if(t.forEach(function(r){let i=new Y(n);if(Ac(this,i,!0),Z(i,`lockSsfi`,!0),!a||t.length===1){i.property(r,e[r]);return}try{i.property(r,e[r])}catch(e){if(!ys.compatibleConstructor(e,K))throw e;s===null&&(s=e),c++}},this),a&&t.length>1&&c===t.length)throw s;return}}this.assert(u,`expected #{this} to `+c+`include `+J(e),`expected #{this} to not `+c+`include `+J(e))}H(Bl,`include`),Y.addChainableMethod(`include`,Bl,zl),Y.addChainableMethod(`contain`,Bl,zl),Y.addChainableMethod(`contains`,Bl,zl),Y.addChainableMethod(`includes`,Bl,zl),Y.addProperty(`ok`,function(){this.assert(Z(this,`object`),`expected #{this} to be truthy`,`expected #{this} to be falsy`)}),Y.addProperty(`true`,function(){this.assert(!0===Z(this,`object`),`expected #{this} to be true`,`expected #{this} to be false`,!Z(this,`negate`))}),Y.addProperty(`numeric`,function(){let e=Z(this,`object`);this.assert([`Number`,`BigInt`].includes(G(e)),`expected #{this} to be numeric`,`expected #{this} to not be numeric`,!Z(this,`negate`))}),Y.addProperty(`callable`,function(){let e=Z(this,`object`),t=Z(this,`ssfi`),n=Z(this,`message`),r=n?`${n}: `:``,i=Z(this,`negate`),a=i?`${r}expected ${J(e)} not to be a callable function`:`${r}expected ${J(e)} to be a callable function`,o=[`Function`,`AsyncFunction`,`GeneratorFunction`,`AsyncGeneratorFunction`].includes(G(e));if(o&&i||!o&&!i)throw new K(a,void 0,t)}),Y.addProperty(`false`,function(){this.assert(!1===Z(this,`object`),`expected #{this} to be false`,`expected #{this} to be true`,!!Z(this,`negate`))}),Y.addProperty(`null`,function(){this.assert(Z(this,`object`)===null,`expected #{this} to be null`,`expected #{this} not to be null`)}),Y.addProperty(`undefined`,function(){this.assert(Z(this,`object`)===void 0,`expected #{this} to be undefined`,`expected #{this} not to be undefined`)}),Y.addProperty(`NaN`,function(){this.assert(jl(Z(this,`object`)),`expected #{this} to be NaN`,`expected #{this} not to be NaN`)});function Vl(){let e=Z(this,`object`);this.assert(e!=null,`expected #{this} to exist`,`expected #{this} to not exist`)}H(Vl,`assertExist`),Y.addProperty(`exist`,Vl),Y.addProperty(`exists`,Vl),Y.addProperty(`empty`,function(){let e=Z(this,`object`),t=Z(this,`ssfi`),n=Z(this,`message`),r;switch(n=n?n+`: `:``,G(e).toLowerCase()){case`array`:case`string`:r=e.length;break;case`map`:case`set`:r=e.size;break;case`weakmap`:case`weakset`:throw new K(n+`.empty was passed a weak collection`,void 0,t);case`function`:throw new K((n+`.empty was passed a function `+Pl(e)).trim(),void 0,t);default:if(e!==Object(e))throw new K(n+`.empty was passed non-string primitive `+J(e),void 0,t);r=Object.keys(e).length}this.assert(r===0,`expected #{this} to be empty`,`expected #{this} not to be empty`)});function Hl(){let e=G(Z(this,`object`));this.assert(e===`Arguments`,`expected #{this} to be arguments but got `+e,`expected #{this} to not be arguments`)}H(Hl,`checkArguments`),Y.addProperty(`arguments`,Hl),Y.addProperty(`Arguments`,Hl);function Ul(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`);if(Z(this,`deep`)){let t=Z(this,`lockSsfi`);Z(this,`lockSsfi`,!0),this.eql(e),Z(this,`lockSsfi`,t)}else this.assert(e===n,`expected #{this} to equal #{exp}`,`expected #{this} to not equal #{exp}`,e,this._obj,!0)}H(Ul,`assertEqual`),Y.addMethod(`equal`,Ul),Y.addMethod(`equals`,Ul),Y.addMethod(`eq`,Ul);function Wl(e,t){t&&Z(this,`message`,t);let n=Z(this,`eql`);this.assert(n(e,Z(this,`object`)),`expected #{this} to deeply equal #{exp}`,`expected #{this} to not deeply equal #{exp}`,e,this._obj,!0)}H(Wl,`assertEql`),Y.addMethod(`eql`,Wl),Y.addMethod(`eqls`,Wl);function Gl(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`doLength`),i=Z(this,`message`),a=i?i+`: `:``,o=Z(this,`ssfi`),s=G(n).toLowerCase(),c=G(e).toLowerCase();if(r&&s!==`map`&&s!==`set`&&new Y(n,i,o,!0).to.have.property(`length`),!r&&s===`date`&&c!==`date`)throw new K(a+`the argument to above must be a date`,void 0,o);if(!X(e)&&(r||X(n)))throw new K(a+`the argument to above must be a number`,void 0,o);if(!r&&s!==`date`&&!X(n)){let e=s===`string`?`'`+n+`'`:n;throw new K(a+`expected `+e+` to be a number or a date`,void 0,o)}if(r){let t=`length`,r;s===`map`||s===`set`?(t=`size`,r=n.size):r=n.length,this.assert(r>e,`expected #{this} to have a `+t+` above #{exp} but got #{act}`,`expected #{this} to not have a `+t+` above #{exp}`,e,r)}else this.assert(n>e,`expected #{this} to be above #{exp}`,`expected #{this} to be at most #{exp}`,e)}H(Gl,`assertAbove`),Y.addMethod(`above`,Gl),Y.addMethod(`gt`,Gl),Y.addMethod(`greaterThan`,Gl);function Kl(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`doLength`),i=Z(this,`message`),a=i?i+`: `:``,o=Z(this,`ssfi`),s=G(n).toLowerCase(),c=G(e).toLowerCase(),l,u=!0;if(r&&s!==`map`&&s!==`set`&&new Y(n,i,o,!0).to.have.property(`length`),!r&&s===`date`&&c!==`date`)l=a+`the argument to least must be a date`;else if(!X(e)&&(r||X(n)))l=a+`the argument to least must be a number`;else if(!r&&s!==`date`&&!X(n)){let e=s===`string`?`'`+n+`'`:n;l=a+`expected `+e+` to be a number or a date`}else u=!1;if(u)throw new K(l,void 0,o);if(r){let t=`length`,r;s===`map`||s===`set`?(t=`size`,r=n.size):r=n.length,this.assert(r>=e,`expected #{this} to have a `+t+` at least #{exp} but got #{act}`,`expected #{this} to have a `+t+` below #{exp}`,e,r)}else this.assert(n>=e,`expected #{this} to be at least #{exp}`,`expected #{this} to be below #{exp}`,e)}H(Kl,`assertLeast`),Y.addMethod(`least`,Kl),Y.addMethod(`gte`,Kl),Y.addMethod(`greaterThanOrEqual`,Kl);function ql(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`doLength`),i=Z(this,`message`),a=i?i+`: `:``,o=Z(this,`ssfi`),s=G(n).toLowerCase(),c=G(e).toLowerCase(),l,u=!0;if(r&&s!==`map`&&s!==`set`&&new Y(n,i,o,!0).to.have.property(`length`),!r&&s===`date`&&c!==`date`)l=a+`the argument to below must be a date`;else if(!X(e)&&(r||X(n)))l=a+`the argument to below must be a number`;else if(!r&&s!==`date`&&!X(n)){let e=s===`string`?`'`+n+`'`:n;l=a+`expected `+e+` to be a number or a date`}else u=!1;if(u)throw new K(l,void 0,o);if(r){let t=`length`,r;s===`map`||s===`set`?(t=`size`,r=n.size):r=n.length,this.assert(r<e,`expected #{this} to have a `+t+` below #{exp} but got #{act}`,`expected #{this} to not have a `+t+` below #{exp}`,e,r)}else this.assert(n<e,`expected #{this} to be below #{exp}`,`expected #{this} to be at least #{exp}`,e)}H(ql,`assertBelow`),Y.addMethod(`below`,ql),Y.addMethod(`lt`,ql),Y.addMethod(`lessThan`,ql);function Jl(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`doLength`),i=Z(this,`message`),a=i?i+`: `:``,o=Z(this,`ssfi`),s=G(n).toLowerCase(),c=G(e).toLowerCase(),l,u=!0;if(r&&s!==`map`&&s!==`set`&&new Y(n,i,o,!0).to.have.property(`length`),!r&&s===`date`&&c!==`date`)l=a+`the argument to most must be a date`;else if(!X(e)&&(r||X(n)))l=a+`the argument to most must be a number`;else if(!r&&s!==`date`&&!X(n)){let e=s===`string`?`'`+n+`'`:n;l=a+`expected `+e+` to be a number or a date`}else u=!1;if(u)throw new K(l,void 0,o);if(r){let t=`length`,r;s===`map`||s===`set`?(t=`size`,r=n.size):r=n.length,this.assert(r<=e,`expected #{this} to have a `+t+` at most #{exp} but got #{act}`,`expected #{this} to have a `+t+` above #{exp}`,e,r)}else this.assert(n<=e,`expected #{this} to be at most #{exp}`,`expected #{this} to be above #{exp}`,e)}H(Jl,`assertMost`),Y.addMethod(`most`,Jl),Y.addMethod(`lte`,Jl),Y.addMethod(`lessThanOrEqual`,Jl),Y.addMethod(`within`,function(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`doLength`),a=Z(this,`message`),o=a?a+`: `:``,s=Z(this,`ssfi`),c=G(r).toLowerCase(),l=G(e).toLowerCase(),u=G(t).toLowerCase(),d,f=!0,p=l===`date`&&u===`date`?e.toISOString()+`..`+t.toISOString():e+`..`+t;if(i&&c!==`map`&&c!==`set`&&new Y(r,a,s,!0).to.have.property(`length`),!i&&c===`date`&&(l!==`date`||u!==`date`))d=o+`the arguments to within must be dates`;else if((!X(e)||!X(t))&&(i||X(r)))d=o+`the arguments to within must be numbers`;else if(!i&&c!==`date`&&!X(r)){let e=c===`string`?`'`+r+`'`:r;d=o+`expected `+e+` to be a number or a date`}else f=!1;if(f)throw new K(d,void 0,s);if(i){let n=`length`,i;c===`map`||c===`set`?(n=`size`,i=r.size):i=r.length,this.assert(i>=e&&i<=t,`expected #{this} to have a `+n+` within `+p,`expected #{this} to not have a `+n+` within `+p)}else this.assert(r>=e&&r<=t,`expected #{this} to be within `+p,`expected #{this} to not be within `+p)});function Yl(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`ssfi`),i=Z(this,`message`),a;try{a=n instanceof e}catch(t){throw t instanceof TypeError?(i=i?i+`: `:``,new K(i+`The instanceof assertion needs a constructor but `+G(e)+` was given.`,void 0,r)):t}let o=Pl(e);o??=`an unnamed constructor`,this.assert(a,`expected #{this} to be an instance of `+o,`expected #{this} to not be an instance of `+o)}H(Yl,`assertInstanceOf`),Y.addMethod(`instanceof`,Yl),Y.addMethod(`instanceOf`,Yl);function Xl(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`nested`),i=Z(this,`own`),a=Z(this,`message`),o=Z(this,`object`),s=Z(this,`ssfi`),c=typeof e;if(a=a?a+`: `:``,r){if(c!==`string`)throw new K(a+`the argument to property must be a string when using nested syntax`,void 0,s)}else if(c!==`string`&&c!==`number`&&c!==`symbol`)throw new K(a+`the argument to property must be a string, number, or symbol`,void 0,s);if(r&&i)throw new K(a+`The "nested" and "own" flags cannot be combined.`,void 0,s);if(o==null)throw new K(a+`Target cannot be null or undefined.`,void 0,s);let l=Z(this,`deep`),u=Z(this,`negate`),d=r?rl(o,e):null,f=r?d.value:o[e],p=l?Z(this,`eql`):(e,t)=>e===t,m=``;l&&(m+=`deep `),i&&(m+=`own `),r&&(m+=`nested `),m+=`property `;let h;h=i?Object.prototype.hasOwnProperty.call(o,e):r?d.exists:el(o,e),(!u||arguments.length===1)&&this.assert(h,`expected #{this} to have `+m+J(e),`expected #{this} to not have `+m+J(e)),arguments.length>1&&this.assert(h&&p(t,f),`expected #{this} to have `+m+J(e)+` of #{exp}, but got #{act}`,`expected #{this} to not have `+m+J(e)+` of #{act}`,t,f),Z(this,`object`,f)}H(Xl,`assertProperty`),Y.addMethod(`property`,Xl);function Zl(e,t,n){Z(this,`own`,!0),Xl.apply(this,arguments)}H(Zl,`assertOwnProperty`),Y.addMethod(`ownProperty`,Zl),Y.addMethod(`haveOwnProperty`,Zl);function Ql(e,t,n){typeof t==`string`&&(n=t,t=null),n&&Z(this,`message`,n);let r=Z(this,`object`),i=Object.getOwnPropertyDescriptor(Object(r),e),a=Z(this,`eql`);i&&t?this.assert(a(t,i),`expected the own property descriptor for `+J(e)+` on #{this} to match `+J(t)+`, got `+J(i),`expected the own property descriptor for `+J(e)+` on #{this} to not match `+J(t),t,i,!0):this.assert(i,`expected #{this} to have an own property descriptor for `+J(e),`expected #{this} to not have an own property descriptor for `+J(e)),Z(this,`object`,i)}H(Ql,`assertOwnPropertyDescriptor`),Y.addMethod(`ownPropertyDescriptor`,Ql),Y.addMethod(`haveOwnPropertyDescriptor`,Ql);function $l(){Z(this,`doLength`,!0)}H($l,`assertLengthChain`);function eu(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=G(n).toLowerCase(),i=Z(this,`message`),a=Z(this,`ssfi`),o=`length`,s;switch(r){case`map`:case`set`:o=`size`,s=n.size;break;default:new Y(n,i,a,!0).to.have.property(`length`),s=n.length}this.assert(s==e,`expected #{this} to have a `+o+` of #{exp} but got #{act}`,`expected #{this} to not have a `+o+` of #{act}`,e,s)}H(eu,`assertLength`),Y.addChainableMethod(`length`,eu,$l),Y.addChainableMethod(`lengthOf`,eu,$l);function tu(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`);this.assert(e.exec(n),`expected #{this} to match `+e,`expected #{this} not to match `+e)}H(tu,`assertMatch`),Y.addMethod(`match`,tu),Y.addMethod(`matches`,tu),Y.addMethod(`string`,function(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`);new Y(n,Z(this,`message`),Z(this,`ssfi`),!0).is.a(`string`),this.assert(~n.indexOf(e),`expected #{this} to contain `+J(e),`expected #{this} to not contain `+J(e))});function nu(e){let t=Z(this,`object`),n=G(t),r=G(e),i=Z(this,`ssfi`),a=Z(this,`deep`),o,s=``,c,l=!0,u=Z(this,`message`);u=u?u+`: `:``;let d=u+`when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments`;if(n===`Map`||n===`Set`)s=a?`deeply `:``,c=[],t.forEach(function(e,t){c.push(t)}),r!==`Array`&&(e=Array.prototype.slice.call(arguments));else{switch(c=Al(t),r){case`Array`:if(arguments.length>1)throw new K(d,void 0,i);break;case`Object`:if(arguments.length>1)throw new K(d,void 0,i);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map(function(e){return typeof e==`symbol`?e:String(e)})}if(!e.length)throw new K(u+`keys required`,void 0,i);let f=e.length,p=Z(this,`any`),m=Z(this,`all`),h=e,g=a?Z(this,`eql`):(e,t)=>e===t;if(!p&&!m&&(m=!0),p&&(l=h.some(function(e){return c.some(function(t){return g(e,t)})})),m&&(l=h.every(function(e){return c.some(function(t){return g(e,t)})}),Z(this,`contains`)||(l&&=e.length==c.length)),f>1){e=e.map(function(e){return J(e)});let t=e.pop();m&&(o=e.join(`, `)+`, and `+t),p&&(o=e.join(`, `)+`, or `+t)}else o=J(e[0]);o=(f>1?`keys `:`key `)+o,o=(Z(this,`contains`)?`contain `:`have `)+o,this.assert(l,`expected #{this} to `+s+o,`expected #{this} to not `+s+o,h.slice(0).sort(Ol),c.sort(Ol),!0)}H(nu,`assertKeys`),Y.addMethod(`keys`,nu),Y.addMethod(`key`,nu);function ru(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`ssfi`),a=Z(this,`message`),o=Z(this,`negate`)||!1;new Y(r,a,i,!0).is.a(`function`),(Fl(e)||typeof e==`string`)&&(t=e,e=null);let s,c=!1;try{r()}catch(e){c=!0,s=e}let l=e===void 0&&t===void 0,u=!!(e&&t),d=!1,f=!1;if(l||!l&&!o){let t=`an error`;e instanceof Error?t=`#{exp}`:e&&(t=ys.getConstructorName(e));let n=s;if(s instanceof Error)n=s.toString();else if(typeof s==`string`)n=s;else if(s&&(typeof s==`object`||typeof s==`function`))try{n=ys.getConstructorName(s)}catch{}this.assert(c,`expected #{this} to throw `+t,`expected #{this} to not throw an error but #{act} was thrown`,e&&e.toString(),n)}if(e&&s&&(e instanceof Error&&ys.compatibleInstance(s,e)===o&&(u&&o?d=!0:this.assert(o,`expected #{this} to throw #{exp} but #{act} was thrown`,`expected #{this} to not throw #{exp}`+(s&&!o?` but #{act} was thrown`:``),e.toString(),s.toString())),ys.compatibleConstructor(s,e)===o&&(u&&o?d=!0:this.assert(o,`expected #{this} to throw #{exp} but #{act} was thrown`,`expected #{this} to not throw #{exp}`+(s?` but #{act} was thrown`:``),e instanceof Error?e.toString():e&&ys.getConstructorName(e),s instanceof Error?s.toString():s&&ys.getConstructorName(s)))),s&&t!=null){let e=`including`;Fl(t)&&(e=`matching`),ys.compatibleMessage(s,t)===o&&(u&&o?f=!0:this.assert(o,`expected #{this} to throw error `+e+` #{exp} but got #{act}`,`expected #{this} to throw error not `+e+` #{exp}`,t,ys.getMessage(s)))}d&&f&&this.assert(o,`expected #{this} to throw #{exp} but #{act} was thrown`,`expected #{this} to not throw #{exp}`+(s?` but #{act} was thrown`:``),e instanceof Error?e.toString():e&&ys.getConstructorName(e),s instanceof Error?s.toString():s&&ys.getConstructorName(s)),Z(this,`object`,s)}H(ru,`assertThrows`),Y.addMethod(`throw`,ru),Y.addMethod(`throws`,ru),Y.addMethod(`Throw`,ru);function iu(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`itself`),i=typeof n==`function`&&!r?n.prototype[e]:n[e];this.assert(typeof i==`function`,`expected #{this} to respond to `+J(e),`expected #{this} to not respond to `+J(e))}H(iu,`respondTo`),Y.addMethod(`respondTo`,iu),Y.addMethod(`respondsTo`,iu),Y.addProperty(`itself`,function(){Z(this,`itself`,!0)});function au(e,t){t&&Z(this,`message`,t);let n=e(Z(this,`object`));this.assert(n,`expected #{this} to satisfy `+Oc(e),`expected #{this} to not satisfy`+Oc(e),!Z(this,`negate`),n)}H(au,`satisfy`),Y.addMethod(`satisfy`,au),Y.addMethod(`satisfies`,au);function ou(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`message`),a=Z(this,`ssfi`);new Y(r,i,a,!0).is.numeric;let o="A `delta` value is required for `closeTo`";if(t==null||(new Y(t,i,a,!0).is.numeric,o="A `expected` value is required for `closeTo`",e==null))throw new K(i?`${i}: ${o}`:o,void 0,a);new Y(e,i,a,!0).is.numeric;let s=H(e=>e<0?-e:e,`abs`),c=H(e=>parseFloat(parseFloat(e).toPrecision(12)),`strip`);this.assert(c(s(r-e))<=t,`expected #{this} to be close to `+e+` +/- `+t,`expected #{this} not to be close to `+e+` +/- `+t)}H(ou,`closeTo`),Y.addMethod(`closeTo`,ou),Y.addMethod(`approximately`,ou);function su(e,t,n,r,i){let a=Array.from(t),o=Array.from(e);if(!r){if(o.length!==a.length)return!1;a=a.slice()}return o.every(function(e,t){if(i)return n?n(e,a[t]):e===a[t];if(!n){let t=a.indexOf(e);return t===-1?!1:(r||a.splice(t,1),!0)}return a.some(function(t,i){return n(e,t)?(r||a.splice(i,1),!0):!1})})}H(su,`isSubsetOf`),Y.addMethod(`members`,function(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`message`),i=Z(this,`ssfi`);new Y(n,r,i,!0).to.be.iterable,new Y(e,r,i,!0).to.be.iterable;let a=Z(this,`contains`),o=Z(this,`ordered`),s,c,l;a?(s=o?`an ordered superset`:`a superset`,c=`expected #{this} to be `+s+` of #{exp}`,l=`expected #{this} to not be `+s+` of #{exp}`):(s=o?`ordered members`:`members`,c=`expected #{this} to have the same `+s+` as #{exp}`,l=`expected #{this} to not have the same `+s+` as #{exp}`);let u=Z(this,`deep`)?Z(this,`eql`):void 0;this.assert(su(e,n,u,a,o),c,l,e,n,!0)}),Y.addProperty(`iterable`,function(e){e&&Z(this,`message`,e);let t=Z(this,`object`);this.assert(t!=null&&t[Symbol.iterator],`expected #{this} to be an iterable`,`expected #{this} to not be an iterable`,t)});function cu(e,t){t&&Z(this,`message`,t);let n=Z(this,`object`),r=Z(this,`message`),i=Z(this,`ssfi`),a=Z(this,`contains`),o=Z(this,`deep`),s=Z(this,`eql`);new Y(e,r,i,!0).to.be.an(`array`),a?this.assert(e.some(function(e){return n.indexOf(e)>-1}),`expected #{this} to contain one of #{exp}`,`expected #{this} to not contain one of #{exp}`,e,n):o?this.assert(e.some(function(e){return s(n,e)}),`expected #{this} to deeply equal one of #{exp}`,`expected #{this} to deeply equal one of #{exp}`,e,n):this.assert(e.indexOf(n)>-1,`expected #{this} to be one of #{exp}`,`expected #{this} to not be one of #{exp}`,e,n)}H(cu,`oneOf`),Y.addMethod(`oneOf`,cu);function lu(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`message`),a=Z(this,`ssfi`);new Y(r,i,a,!0).is.a(`function`);let o;t?(new Y(e,i,a,!0).to.have.property(t),o=e[t]):(new Y(e,i,a,!0).is.a(`function`),o=e()),r();let s=t==null?e():e[t],c=t==null?o:`.`+t;Z(this,`deltaMsgObj`,c),Z(this,`initialDeltaValue`,o),Z(this,`finalDeltaValue`,s),Z(this,`deltaBehavior`,`change`),Z(this,`realDelta`,s!==o),this.assert(o!==s,`expected `+c+` to change`,`expected `+c+` to not change`)}H(lu,`assertChanges`),Y.addMethod(`change`,lu),Y.addMethod(`changes`,lu);function uu(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`message`),a=Z(this,`ssfi`);new Y(r,i,a,!0).is.a(`function`);let o;t?(new Y(e,i,a,!0).to.have.property(t),o=e[t]):(new Y(e,i,a,!0).is.a(`function`),o=e()),new Y(o,i,a,!0).is.a(`number`),r();let s=t==null?e():e[t],c=t==null?o:`.`+t;Z(this,`deltaMsgObj`,c),Z(this,`initialDeltaValue`,o),Z(this,`finalDeltaValue`,s),Z(this,`deltaBehavior`,`increase`),Z(this,`realDelta`,s-o),this.assert(s-o>0,`expected `+c+` to increase`,`expected `+c+` to not increase`)}H(uu,`assertIncreases`),Y.addMethod(`increase`,uu),Y.addMethod(`increases`,uu);function du(e,t,n){n&&Z(this,`message`,n);let r=Z(this,`object`),i=Z(this,`message`),a=Z(this,`ssfi`);new Y(r,i,a,!0).is.a(`function`);let o;t?(new Y(e,i,a,!0).to.have.property(t),o=e[t]):(new Y(e,i,a,!0).is.a(`function`),o=e()),new Y(o,i,a,!0).is.a(`number`),r();let s=t==null?e():e[t],c=t==null?o:`.`+t;Z(this,`deltaMsgObj`,c),Z(this,`initialDeltaValue`,o),Z(this,`finalDeltaValue`,s),Z(this,`deltaBehavior`,`decrease`),Z(this,`realDelta`,o-s),this.assert(s-o<0,`expected `+c+` to decrease`,`expected `+c+` to not decrease`)}H(du,`assertDecreases`),Y.addMethod(`decrease`,du),Y.addMethod(`decreases`,du);function fu(e,t){t&&Z(this,`message`,t);let n=Z(this,`deltaMsgObj`),r=Z(this,`initialDeltaValue`),i=Z(this,`finalDeltaValue`),a=Z(this,`deltaBehavior`),o=Z(this,`realDelta`),s;s=a===`change`?Math.abs(i-r)===Math.abs(e):o===Math.abs(e),this.assert(s,`expected `+n+` to `+a+` by `+e,`expected `+n+` to not `+a+` by `+e)}H(fu,`assertDelta`),Y.addMethod(`by`,fu),Y.addProperty(`extensible`,function(){let e=Z(this,`object`),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,`expected #{this} to be extensible`,`expected #{this} to not be extensible`)}),Y.addProperty(`sealed`,function(){let e=Z(this,`object`),t=e===Object(e)?Object.isSealed(e):!0;this.assert(t,`expected #{this} to be sealed`,`expected #{this} to not be sealed`)}),Y.addProperty(`frozen`,function(){let e=Z(this,`object`),t=e===Object(e)?Object.isFrozen(e):!0;this.assert(t,`expected #{this} to be frozen`,`expected #{this} to not be frozen`)}),Y.addProperty(`finite`,function(e){let t=Z(this,`object`);this.assert(typeof t==`number`&&isFinite(t),`expected #{this} to be a finite number`,`expected #{this} to not be a finite number`)});function pu(e,t){return e===t?!0:typeof t==typeof e?typeof e!=`object`||!e?e===t:t?Array.isArray(e)?Array.isArray(t)?e.every(function(e){return t.some(function(t){return pu(e,t)})}):!1:e instanceof Date?t instanceof Date?e.getTime()===t.getTime():!1:Object.keys(e).every(function(n){let r=e[n],i=t[n];return typeof r==`object`&&r&&i!==null?pu(r,i):typeof r==`function`?r(i):i===r}):!1:!1}H(pu,`compareSubset`),Y.addMethod(`containSubset`,function(e){let t=W(this,`object`),n=q.showDiff;this.assert(pu(e,t),`expected #{act} to contain subset #{exp}`,`expected #{act} to not contain subset #{exp}`,e,t,n)});function mu(e,t){return new Y(e,t)}H(mu,`expect`),mu.fail=function(e,t,n,r){throw arguments.length<2&&(n=e,e=void 0),n||=`expect.fail()`,new K(n,{actual:e,expected:t,operator:r},mu.fail)};var hu={};_s(hu,{Should:()=>vu,should:()=>_u});function gu(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol==`function`&&this instanceof Symbol||typeof BigInt==`function`&&this instanceof BigInt?new Y(this.valueOf(),null,e):new Y(this,null,e)}H(e,`shouldGetter`);function t(e){Object.defineProperty(this,`should`,{value:e,enumerable:!0,configurable:!0,writable:!0})}H(t,`shouldSetter`),Object.defineProperty(Object.prototype,`should`,{set:t,get:e,configurable:!0});let n={};return n.fail=function(e,t,r,i){throw arguments.length<2&&(r=e,e=void 0),r||=`should.fail()`,new K(r,{actual:e,expected:t,operator:i},n.fail)},n.equal=function(e,t,n){new Y(e,n).to.equal(t)},n.Throw=function(e,t,n,r){new Y(e,r).to.Throw(t,n)},n.exist=function(e,t){new Y(e,t).to.exist},n.not={},n.not.equal=function(e,t,n){new Y(e,n).to.not.equal(t)},n.not.Throw=function(e,t,n,r){new Y(e,r).to.not.Throw(t,n)},n.not.exist=function(e,t){new Y(e,t).to.not.exist},n.throw=n.Throw,n.not.throw=n.not.Throw,n}H(gu,`loadShould`);var _u=gu,vu=gu;function Q(e,t){new Y(null,null,Q,!0).assert(e,t,`[ negation message unavailable ]`)}H(Q,`assert`),Q.fail=function(e,t,n,r){throw arguments.length<2&&(n=e,e=void 0),n||=`assert.fail()`,new K(n,{actual:e,expected:t,operator:r},Q.fail)},Q.isOk=function(e,t){new Y(e,t,Q.isOk,!0).is.ok},Q.isNotOk=function(e,t){new Y(e,t,Q.isNotOk,!0).is.not.ok},Q.equal=function(e,t,n){let r=new Y(e,n,Q.equal,!0);r.assert(t==W(r,`object`),`expected #{this} to equal #{exp}`,`expected #{this} to not equal #{act}`,t,e,!0)},Q.notEqual=function(e,t,n){let r=new Y(e,n,Q.notEqual,!0);r.assert(t!=W(r,`object`),`expected #{this} to not equal #{exp}`,`expected #{this} to equal #{act}`,t,e,!0)},Q.strictEqual=function(e,t,n){new Y(e,n,Q.strictEqual,!0).to.equal(t)},Q.notStrictEqual=function(e,t,n){new Y(e,n,Q.notStrictEqual,!0).to.not.equal(t)},Q.deepEqual=Q.deepStrictEqual=function(e,t,n){new Y(e,n,Q.deepEqual,!0).to.eql(t)},Q.notDeepEqual=function(e,t,n){new Y(e,n,Q.notDeepEqual,!0).to.not.eql(t)},Q.isAbove=function(e,t,n){new Y(e,n,Q.isAbove,!0).to.be.above(t)},Q.isAtLeast=function(e,t,n){new Y(e,n,Q.isAtLeast,!0).to.be.least(t)},Q.isBelow=function(e,t,n){new Y(e,n,Q.isBelow,!0).to.be.below(t)},Q.isAtMost=function(e,t,n){new Y(e,n,Q.isAtMost,!0).to.be.most(t)},Q.isTrue=function(e,t){new Y(e,t,Q.isTrue,!0).is.true},Q.isNotTrue=function(e,t){new Y(e,t,Q.isNotTrue,!0).to.not.equal(!0)},Q.isFalse=function(e,t){new Y(e,t,Q.isFalse,!0).is.false},Q.isNotFalse=function(e,t){new Y(e,t,Q.isNotFalse,!0).to.not.equal(!1)},Q.isNull=function(e,t){new Y(e,t,Q.isNull,!0).to.equal(null)},Q.isNotNull=function(e,t){new Y(e,t,Q.isNotNull,!0).to.not.equal(null)},Q.isNaN=function(e,t){new Y(e,t,Q.isNaN,!0).to.be.NaN},Q.isNotNaN=function(e,t){new Y(e,t,Q.isNotNaN,!0).not.to.be.NaN},Q.exists=function(e,t){new Y(e,t,Q.exists,!0).to.exist},Q.notExists=function(e,t){new Y(e,t,Q.notExists,!0).to.not.exist},Q.isUndefined=function(e,t){new Y(e,t,Q.isUndefined,!0).to.equal(void 0)},Q.isDefined=function(e,t){new Y(e,t,Q.isDefined,!0).to.not.equal(void 0)},Q.isCallable=function(e,t){new Y(e,t,Q.isCallable,!0).is.callable},Q.isNotCallable=function(e,t){new Y(e,t,Q.isNotCallable,!0).is.not.callable},Q.isObject=function(e,t){new Y(e,t,Q.isObject,!0).to.be.a(`object`)},Q.isNotObject=function(e,t){new Y(e,t,Q.isNotObject,!0).to.not.be.a(`object`)},Q.isArray=function(e,t){new Y(e,t,Q.isArray,!0).to.be.an(`array`)},Q.isNotArray=function(e,t){new Y(e,t,Q.isNotArray,!0).to.not.be.an(`array`)},Q.isString=function(e,t){new Y(e,t,Q.isString,!0).to.be.a(`string`)},Q.isNotString=function(e,t){new Y(e,t,Q.isNotString,!0).to.not.be.a(`string`)},Q.isNumber=function(e,t){new Y(e,t,Q.isNumber,!0).to.be.a(`number`)},Q.isNotNumber=function(e,t){new Y(e,t,Q.isNotNumber,!0).to.not.be.a(`number`)},Q.isNumeric=function(e,t){new Y(e,t,Q.isNumeric,!0).is.numeric},Q.isNotNumeric=function(e,t){new Y(e,t,Q.isNotNumeric,!0).is.not.numeric},Q.isFinite=function(e,t){new Y(e,t,Q.isFinite,!0).to.be.finite},Q.isBoolean=function(e,t){new Y(e,t,Q.isBoolean,!0).to.be.a(`boolean`)},Q.isNotBoolean=function(e,t){new Y(e,t,Q.isNotBoolean,!0).to.not.be.a(`boolean`)},Q.typeOf=function(e,t,n){new Y(e,n,Q.typeOf,!0).to.be.a(t)},Q.notTypeOf=function(e,t,n){new Y(e,n,Q.notTypeOf,!0).to.not.be.a(t)},Q.instanceOf=function(e,t,n){new Y(e,n,Q.instanceOf,!0).to.be.instanceOf(t)},Q.notInstanceOf=function(e,t,n){new Y(e,n,Q.notInstanceOf,!0).to.not.be.instanceOf(t)},Q.include=function(e,t,n){new Y(e,n,Q.include,!0).include(t)},Q.notInclude=function(e,t,n){new Y(e,n,Q.notInclude,!0).not.include(t)},Q.deepInclude=function(e,t,n){new Y(e,n,Q.deepInclude,!0).deep.include(t)},Q.notDeepInclude=function(e,t,n){new Y(e,n,Q.notDeepInclude,!0).not.deep.include(t)},Q.nestedInclude=function(e,t,n){new Y(e,n,Q.nestedInclude,!0).nested.include(t)},Q.notNestedInclude=function(e,t,n){new Y(e,n,Q.notNestedInclude,!0).not.nested.include(t)},Q.deepNestedInclude=function(e,t,n){new Y(e,n,Q.deepNestedInclude,!0).deep.nested.include(t)},Q.notDeepNestedInclude=function(e,t,n){new Y(e,n,Q.notDeepNestedInclude,!0).not.deep.nested.include(t)},Q.ownInclude=function(e,t,n){new Y(e,n,Q.ownInclude,!0).own.include(t)},Q.notOwnInclude=function(e,t,n){new Y(e,n,Q.notOwnInclude,!0).not.own.include(t)},Q.deepOwnInclude=function(e,t,n){new Y(e,n,Q.deepOwnInclude,!0).deep.own.include(t)},Q.notDeepOwnInclude=function(e,t,n){new Y(e,n,Q.notDeepOwnInclude,!0).not.deep.own.include(t)},Q.match=function(e,t,n){new Y(e,n,Q.match,!0).to.match(t)},Q.notMatch=function(e,t,n){new Y(e,n,Q.notMatch,!0).to.not.match(t)},Q.property=function(e,t,n){new Y(e,n,Q.property,!0).to.have.property(t)},Q.notProperty=function(e,t,n){new Y(e,n,Q.notProperty,!0).to.not.have.property(t)},Q.propertyVal=function(e,t,n,r){new Y(e,r,Q.propertyVal,!0).to.have.property(t,n)},Q.notPropertyVal=function(e,t,n,r){new Y(e,r,Q.notPropertyVal,!0).to.not.have.property(t,n)},Q.deepPropertyVal=function(e,t,n,r){new Y(e,r,Q.deepPropertyVal,!0).to.have.deep.property(t,n)},Q.notDeepPropertyVal=function(e,t,n,r){new Y(e,r,Q.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},Q.ownProperty=function(e,t,n){new Y(e,n,Q.ownProperty,!0).to.have.own.property(t)},Q.notOwnProperty=function(e,t,n){new Y(e,n,Q.notOwnProperty,!0).to.not.have.own.property(t)},Q.ownPropertyVal=function(e,t,n,r){new Y(e,r,Q.ownPropertyVal,!0).to.have.own.property(t,n)},Q.notOwnPropertyVal=function(e,t,n,r){new Y(e,r,Q.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},Q.deepOwnPropertyVal=function(e,t,n,r){new Y(e,r,Q.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},Q.notDeepOwnPropertyVal=function(e,t,n,r){new Y(e,r,Q.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},Q.nestedProperty=function(e,t,n){new Y(e,n,Q.nestedProperty,!0).to.have.nested.property(t)},Q.notNestedProperty=function(e,t,n){new Y(e,n,Q.notNestedProperty,!0).to.not.have.nested.property(t)},Q.nestedPropertyVal=function(e,t,n,r){new Y(e,r,Q.nestedPropertyVal,!0).to.have.nested.property(t,n)},Q.notNestedPropertyVal=function(e,t,n,r){new Y(e,r,Q.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},Q.deepNestedPropertyVal=function(e,t,n,r){new Y(e,r,Q.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},Q.notDeepNestedPropertyVal=function(e,t,n,r){new Y(e,r,Q.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},Q.lengthOf=function(e,t,n){new Y(e,n,Q.lengthOf,!0).to.have.lengthOf(t)},Q.hasAnyKeys=function(e,t,n){new Y(e,n,Q.hasAnyKeys,!0).to.have.any.keys(t)},Q.hasAllKeys=function(e,t,n){new Y(e,n,Q.hasAllKeys,!0).to.have.all.keys(t)},Q.containsAllKeys=function(e,t,n){new Y(e,n,Q.containsAllKeys,!0).to.contain.all.keys(t)},Q.doesNotHaveAnyKeys=function(e,t,n){new Y(e,n,Q.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},Q.doesNotHaveAllKeys=function(e,t,n){new Y(e,n,Q.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},Q.hasAnyDeepKeys=function(e,t,n){new Y(e,n,Q.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},Q.hasAllDeepKeys=function(e,t,n){new Y(e,n,Q.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},Q.containsAllDeepKeys=function(e,t,n){new Y(e,n,Q.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},Q.doesNotHaveAnyDeepKeys=function(e,t,n){new Y(e,n,Q.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},Q.doesNotHaveAllDeepKeys=function(e,t,n){new Y(e,n,Q.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},Q.throws=function(e,t,n,r){return(typeof t==`string`||t instanceof RegExp)&&(n=t,t=null),W(new Y(e,r,Q.throws,!0).to.throw(t,n),`object`)},Q.doesNotThrow=function(e,t,n,r){(typeof t==`string`||t instanceof RegExp)&&(n=t,t=null),new Y(e,r,Q.doesNotThrow,!0).to.not.throw(t,n)},Q.operator=function(e,t,n,r){let i;switch(t){case`==`:i=e==n;break;case`===`:i=e===n;break;case`>`:i=e>n;break;case`>=`:i=e>=n;break;case`<`:i=e<n;break;case`<=`:i=e<=n;break;case`!=`:i=e!=n;break;case`!==`:i=e!==n;break;default:throw r&&=r+`: `,new K(r+`Invalid operator "`+t+`"`,void 0,Q.operator)}let a=new Y(i,r,Q.operator,!0);a.assert(!0===W(a,`object`),`expected `+J(e)+` to be `+t+` `+J(n),`expected `+J(e)+` to not be `+t+` `+J(n))},Q.closeTo=function(e,t,n,r){new Y(e,r,Q.closeTo,!0).to.be.closeTo(t,n)},Q.approximately=function(e,t,n,r){new Y(e,r,Q.approximately,!0).to.be.approximately(t,n)},Q.sameMembers=function(e,t,n){new Y(e,n,Q.sameMembers,!0).to.have.same.members(t)},Q.notSameMembers=function(e,t,n){new Y(e,n,Q.notSameMembers,!0).to.not.have.same.members(t)},Q.sameDeepMembers=function(e,t,n){new Y(e,n,Q.sameDeepMembers,!0).to.have.same.deep.members(t)},Q.notSameDeepMembers=function(e,t,n){new Y(e,n,Q.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},Q.sameOrderedMembers=function(e,t,n){new Y(e,n,Q.sameOrderedMembers,!0).to.have.same.ordered.members(t)},Q.notSameOrderedMembers=function(e,t,n){new Y(e,n,Q.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},Q.sameDeepOrderedMembers=function(e,t,n){new Y(e,n,Q.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},Q.notSameDeepOrderedMembers=function(e,t,n){new Y(e,n,Q.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},Q.includeMembers=function(e,t,n){new Y(e,n,Q.includeMembers,!0).to.include.members(t)},Q.notIncludeMembers=function(e,t,n){new Y(e,n,Q.notIncludeMembers,!0).to.not.include.members(t)},Q.includeDeepMembers=function(e,t,n){new Y(e,n,Q.includeDeepMembers,!0).to.include.deep.members(t)},Q.notIncludeDeepMembers=function(e,t,n){new Y(e,n,Q.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},Q.includeOrderedMembers=function(e,t,n){new Y(e,n,Q.includeOrderedMembers,!0).to.include.ordered.members(t)},Q.notIncludeOrderedMembers=function(e,t,n){new Y(e,n,Q.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},Q.includeDeepOrderedMembers=function(e,t,n){new Y(e,n,Q.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},Q.notIncludeDeepOrderedMembers=function(e,t,n){new Y(e,n,Q.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},Q.oneOf=function(e,t,n){new Y(e,n,Q.oneOf,!0).to.be.oneOf(t)},Q.isIterable=function(e,t){if(e==null||!e[Symbol.iterator])throw t=t?`${t} expected ${J(e)} to be an iterable`:`expected ${J(e)} to be an iterable`,new K(t,void 0,Q.isIterable)},Q.changes=function(e,t,n,r){arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.changes,!0).to.change(t,n)},Q.changesBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.changesBy,!0).to.change(t,n).by(r)},Q.doesNotChange=function(e,t,n,r){return arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.doesNotChange,!0).to.not.change(t,n)},Q.changesButNotBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.changesButNotBy,!0).to.change(t,n).but.not.by(r)},Q.increases=function(e,t,n,r){return arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.increases,!0).to.increase(t,n)},Q.increasesBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.increasesBy,!0).to.increase(t,n).by(r)},Q.doesNotIncrease=function(e,t,n,r){return arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.doesNotIncrease,!0).to.not.increase(t,n)},Q.increasesButNotBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.increasesButNotBy,!0).to.increase(t,n).but.not.by(r)},Q.decreases=function(e,t,n,r){return arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.decreases,!0).to.decrease(t,n)},Q.decreasesBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.decreasesBy,!0).to.decrease(t,n).by(r)},Q.doesNotDecrease=function(e,t,n,r){return arguments.length===3&&typeof t==`function`&&(r=n,n=null),new Y(e,r,Q.doesNotDecrease,!0).to.not.decrease(t,n)},Q.doesNotDecreaseBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);return new Y(e,i,Q.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(r)},Q.decreasesButNotBy=function(e,t,n,r,i){if(arguments.length===4&&typeof t==`function`){let e=r;r=n,i=e}else arguments.length===3&&(r=n,n=null);new Y(e,i,Q.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(r)},Q.ifError=function(e){if(e)throw e},Q.isExtensible=function(e,t){new Y(e,t,Q.isExtensible,!0).to.be.extensible},Q.isNotExtensible=function(e,t){new Y(e,t,Q.isNotExtensible,!0).to.not.be.extensible},Q.isSealed=function(e,t){new Y(e,t,Q.isSealed,!0).to.be.sealed},Q.isNotSealed=function(e,t){new Y(e,t,Q.isNotSealed,!0).to.not.be.sealed},Q.isFrozen=function(e,t){new Y(e,t,Q.isFrozen,!0).to.be.frozen},Q.isNotFrozen=function(e,t){new Y(e,t,Q.isNotFrozen,!0).to.not.be.frozen},Q.isEmpty=function(e,t){new Y(e,t,Q.isEmpty,!0).to.be.empty},Q.isNotEmpty=function(e,t){new Y(e,t,Q.isNotEmpty,!0).to.not.be.empty},Q.containsSubset=function(e,t,n){new Y(e,n).to.containSubset(t)},Q.doesNotContainSubset=function(e,t,n){new Y(e,n).to.not.containSubset(t)};for(let[e,t]of[[`isOk`,`ok`],[`isNotOk`,`notOk`],[`throws`,`throw`],[`throws`,`Throw`],[`isExtensible`,`extensible`],[`isNotExtensible`,`notExtensible`],[`isSealed`,`sealed`],[`isNotSealed`,`notSealed`],[`isFrozen`,`frozen`],[`isNotFrozen`,`notFrozen`],[`isEmpty`,`empty`],[`isNotEmpty`,`notEmpty`],[`isCallable`,`isFunction`],[`isNotCallable`,`isNotFunction`],[`containsSubset`,`containSubset`]])Q[t]=Q[e];var yu=[];function bu(e){let t={use:bu,AssertionError:K,util:U,config:q,expect:mu,assert:Q,Assertion:Y,...hu};return~yu.indexOf(e)||(e(t,U),yu.push(e)),t}H(bu,`use`);const xu=Symbol.for(`matchers-object`),Su=Symbol.for(`$$jest-matchers-object`),Cu=Symbol.for(`expect-global`),wu=Symbol.for(`asymmetric-matchers-object`),Tu={toSatisfy(e,t,n){let{printReceived:r,printExpected:i,matcherHint:a}=this.utils,o=t(e);return{pass:o,message:()=>o?`\
${a(`.not.toSatisfy`,`received`,``)}

Expected value to not satisfy:
${n||i(t)}
Received:
${r(e)}`:`\
${a(`.toSatisfy`,`received`,``)}

Expected value to satisfy:
${n||i(t)}

Received:
${r(e)}`}},toBeOneOf(e,t){let{equals:n,customTesters:r}=this,{printReceived:i,printExpected:a,matcherHint:o}=this.utils,s;if(Array.isArray(t))s=t.length===0||t.some(t=>n(t,e,r));else if(t instanceof Set)s=t.size===0||t.has(e)||[...t].some(t=>n(t,e,r));else throw TypeError(`You must provide an array or set to ${o(`.toBeOneOf`)}, not '${typeof t}'.`);return{pass:s,message:()=>s?`\
${o(`.not.toBeOneOf`,`received`,``)}

Expected value to not be one of:
${a(t)}
Received:
${i(e)}`:`\
${o(`.toBeOneOf`,`received`,``)}

Expected value to be one of:
${a(t)}

Received:
${i(e)}`}}},Eu=R.green,Du=R.red,Ou=R.inverse,ku=R.bold,Au=R.dim;function ju(e,t=`received`,n=`expected`,r={}){let{comment:i=``,isDirectExpectCall:a=!1,isNot:o=!1,promise:s=``,secondArgument:c=``,expectedColor:l=Eu,receivedColor:u=Du,secondArgumentColor:d=Eu}=r,f=``,p=`expect`;return!a&&t!==``&&(f+=Au(`${p}(`)+u(t),p=`)`),s!==``&&(f+=Au(`${p}.`)+s,p=``),o&&(f+=`${Au(`${p}.`)}not`,p=``),e.includes(`.`)?p+=e:(f+=Au(`${p}.`)+e,p=``),n===``?p+=`()`:(f+=Au(`${p}(`)+l(n),c&&(f+=Au(`, `)+d(c)),p=`)`),i!==``&&(p+=` // ${i}`),p!==``&&(f+=Au(p)),f}function Mu(e){return e.replace(/\s+$/gm,e=>`·`.repeat(e.length))}function Nu(e){return Du(Mu(Ji(e)))}function Pu(e){return Eu(Mu(Ji(e)))}function Fu(){return{EXPECTED_COLOR:Eu,RECEIVED_COLOR:Du,INVERTED_COLOR:Ou,BOLD_WEIGHT:ku,DIM_COLOR:Au,diff:bo,matcherHint:ju,printReceived:Nu,printExpected:Pu,printDiffOrStringify:Ao,printWithType:Iu}}function Iu(e,t,n){let r=aa(t);return(r!==`null`&&r!==`undefined`?`${e} has type:  ${r}\n`:``)+`${e} has value: ${n(t)}`}function Lu(e){if(!Array.isArray(e))throw TypeError(`expect.customEqualityTesters: Must be set to an array of Testers. Was given "${aa(e)}"`);globalThis[Su].customEqualityTesters.push(...e)}function Ru(){return globalThis[Su].customEqualityTesters}function $(e,t,n,r){return n||=[],Vu(e,t,[],[],n,r?Gu:Wu)}Function.prototype.toString;function zu(e){return!!e&&typeof e==`object`&&`asymmetricMatch`in e&&Ku(`Function`,e.asymmetricMatch)}function Bu(e,t,n){let r=zu(e),i=zu(t);if(!(r&&i)){if(r)return e.asymmetricMatch(t,n);if(i)return t.asymmetricMatch(e,n)}}function Vu(e,t,n,r,i,a){let o=!0,s=Bu(e,t,i);if(s!==void 0)return s;let c={equals:$};for(let n=0;n<i.length;n++){let r=i[n].call(c,e,t,i);if(r!==void 0)return r}if(typeof URL==`function`&&e instanceof URL&&t instanceof URL)return e.href===t.href;if(Object.is(e,t))return!0;if(e===null||t===null)return e===t;let l=Object.prototype.toString.call(e);if(l!==Object.prototype.toString.call(t))return!1;switch(l){case`[object Boolean]`:case`[object String]`:case`[object Number]`:return typeof e==typeof t?typeof e!=`object`&&typeof t!=`object`?Object.is(e,t):Object.is(e.valueOf(),t.valueOf()):!1;case`[object Date]`:{let n=+e,r=+t;return n===r||Number.isNaN(n)&&Number.isNaN(r)}case`[object RegExp]`:return e.source===t.source&&e.flags===t.flags;case`[object Temporal.Instant]`:case`[object Temporal.ZonedDateTime]`:case`[object Temporal.PlainDateTime]`:case`[object Temporal.PlainDate]`:case`[object Temporal.PlainTime]`:case`[object Temporal.PlainYearMonth]`:case`[object Temporal.PlainMonthDay]`:return e.equals(t);case`[object Temporal.Duration]`:return e.toString()===t.toString()}if(typeof e!=`object`||typeof t!=`object`)return!1;if(qu(e)&&qu(t))return e.isEqualNode(t);let u=n.length;for(;u--;)if(n[u]===e)return r[u]===t;else if(r[u]===t)return!1;if(n.push(e),r.push(t),l===`[object Array]`&&e.length!==t.length)return!1;if(e instanceof Error&&t instanceof Error)try{return Hu(e,t,n,r,i,a)}finally{n.pop(),r.pop()}let d=Uu(e,a),f,p=d.length;if(Uu(t,a).length!==p)return!1;for(;p--;)if(f=d[p],o=a(t,f)&&Vu(e[f],t[f],n,r,i,a),!o)return!1;return n.pop(),r.pop(),o}function Hu(e,t,n,r,i,a){let o=Object.getPrototypeOf(e)===Object.getPrototypeOf(t)&&e.name===t.name&&e.message===t.message;return t.cause!==void 0&&(o&&=Vu(e.cause,t.cause,n,r,i,a)),e instanceof AggregateError&&t instanceof AggregateError&&(o&&=Vu(e.errors,t.errors,n,r,i,a)),o&&=Vu({...e},{...t},n,r,i,a),o}function Uu(e,t){let n=[];for(let r in e)t(e,r)&&n.push(r);return n.concat(Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable))}function Wu(e,t){return Gu(e,t)&&e[t]!==void 0}function Gu(e,t){return Object.hasOwn(e,t)}function Ku(e,t){return Object.prototype.toString.apply(t)===`[object ${e}]`}function qu(e){return typeof e==`object`&&!!e&&`nodeType`in e&&typeof e.nodeType==`number`&&`nodeName`in e&&typeof e.nodeName==`string`&&`isEqualNode`in e&&typeof e.isEqualNode==`function`}const Ju=`@@__IMMUTABLE_KEYED__@@`,Yu=`@@__IMMUTABLE_SET__@@`,Xu=`@@__IMMUTABLE_ORDERED__@@`;function Zu(e){return!!(e&&e[Ju]&&!e[Xu])}function Qu(e){return!!(e&&e[Yu]&&!e[Xu])}function $u(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}function ed(e){return!!(e&&$u(e)&&e[`@@__IMMUTABLE_LIST__@@`])}function td(e){return!!(e&&$u(e)&&e[Ju]&&e[Xu])}function nd(e){return!!(e&&$u(e)&&e[Yu]&&e[Xu])}function rd(e){return!!(e&&$u(e)&&e[`@@__IMMUTABLE_RECORD__@@`])}const id=Symbol.iterator;function ad(e){return!!(e!=null&&e[id])}function od(e,t,n=[],r=[],i=[]){if(typeof e!=`object`||typeof t!=`object`||Array.isArray(e)||Array.isArray(t)||!ad(e)||!ad(t))return;if(e.constructor!==t.constructor)return!1;let a=r.length;for(;a--;)if(r[a]===e)return i[a]===t;r.push(e),i.push(t);let o=[...n.filter(e=>e!==od),s];function s(e,t){return od(e,t,[...n],[...r],[...i])}if(e.size!==void 0){if(e.size!==t.size)return!1;if(Ku(`Set`,e)||Qu(e)){let n=!0;for(let r of e)if(!t.has(r)){let e=!1;for(let n of t)$(r,n,o)===!0&&(e=!0);if(e===!1){n=!1;break}}return r.pop(),i.pop(),n}else if(Ku(`Map`,e)||Zu(e)){let n=!0;for(let r of e)if(!t.has(r[0])||!$(r[1],t.get(r[0]),o)){let e=!1;for(let n of t){let t=$(r[0],n[0],o),i=!1;t===!0&&(i=$(r[1],n[1],o)),i===!0&&(e=!0)}if(e===!1){n=!1;break}}return r.pop(),i.pop(),n}}let c=t[id]();for(let t of e){let e=c.next();if(e.done||!$(t,e.value,o))return!1}return!c.next().done||!ed(e)&&!td(e)&&!nd(e)&&!rd(e)&&!$(Object.entries(e),Object.entries(t),o)?!1:(r.pop(),i.pop(),!0)}function sd(e,t){return!e||typeof e!=`object`||e===Object.prototype?!1:Object.hasOwn(e,t)||sd(Object.getPrototypeOf(e),t)}function cd(e){return ra(e)&&!(e instanceof Error)&&!Array.isArray(e)&&!(e instanceof Date)}function ld(e,t,n=[]){let r=n.filter(e=>e!==ld),i=(e=new WeakMap)=>(t,n)=>{if(cd(n))return Object.keys(n).every(a=>{if(n[a]!=null&&typeof n[a]==`object`){if(e.has(n[a]))return $(t[a],n[a],r);e.set(n[a],!0)}let o=t!=null&&sd(t,a)&&$(t[a],n[a],[...r,i(e)]);return e.delete(n[a]),o})};return i()(e,t)}function ud(e,t){if(!(e==null||t==null||e.constructor===t.constructor))return!1}function dd(e,t){let n=e,r=t;if(!(e instanceof DataView&&t instanceof DataView)){if(!(e instanceof ArrayBuffer)||!(t instanceof ArrayBuffer))return;try{n=new DataView(e),r=new DataView(t)}catch{return}}if(n.byteLength!==r.byteLength)return!1;for(let e=0;e<n.byteLength;e++)if(n.getUint8(e)!==r.getUint8(e))return!1;return!0}function fd(e,t,n=[]){if(!Array.isArray(e)||!Array.isArray(t))return;let r=Object.keys(e),i=Object.keys(t);return $(e,t,n.filter(e=>e!==fd),!0)&&$(r,i)}function pd(e,t=`#{this}`,n=`#{exp}`){let r=`expected ${t} to be ${n} // Object.is equality`;return[`toStrictEqual`,`toEqual`].includes(e)?`${r}\n\nIf it should pass with deep equality, replace "toBe" with "${e}"\n\nExpected: ${t}\nReceived: serializes to the same string\n`:r}function md(e,t){return`${t} ${e}${t===1?``:`s`}`}function hd(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t)?.enumerable)]}function gd(e,t,n){let r=0,i=(e=new WeakMap)=>(t,a)=>{if(Array.isArray(t)){if(Array.isArray(a)&&a.length===t.length)return a.map((n,r)=>i(e)(t[r],n))}else if(t instanceof Date)return t;else if(ra(t)&&ra(a)){if($(t,a,[...n,od,ld]))return a;let o={};e.set(t,o),typeof t.constructor==`function`&&typeof t.constructor.name==`string`&&Object.defineProperty(o,`constructor`,{enumerable:!1,value:t.constructor});for(let n of hd(t))sd(a,n)?o[n]=e.has(t[n])?e.get(t[n]):i(e)(t[n],a[n]):e.has(t[n])||(r+=1,ra(t[n])&&(r+=hd(t[n]).length),i(e)(t[n],a[n]));if(hd(o).length>0)return o}return t};return{subset:i()(e,t),stripped:r}}function _d(e){return!!e&&(typeof e==`object`||typeof e==`function`)&&e[`~standard`]&&typeof e[`~standard`].validate==`function`}if(!Object.hasOwn(globalThis,xu)){let e=new WeakMap,t=Object.create(null),n=[],r=Object.create(null);Object.defineProperty(globalThis,xu,{get:()=>e}),Object.defineProperty(globalThis,Su,{configurable:!0,get:()=>({state:e.get(globalThis[Cu]),matchers:t,customEqualityTesters:n})}),Object.defineProperty(globalThis,wu,{get:()=>r})}function vd(e){return globalThis[xu].get(e)}function yd(e,t){let n=globalThis[xu],r=n.get(t)||{},i=Object.defineProperties(r,{...Object.getOwnPropertyDescriptors(r),...Object.getOwnPropertyDescriptors(e)});n.set(t,i)}var bd=class{$$typeof=Symbol.for(`jest.asymmetricMatcher`);constructor(e,t=!1){this.sample=e,this.inverse=t}getMatcherContext(e){return{...vd(e||globalThis[Cu]),equals:$,isNot:this.inverse,customTesters:Ru(),utils:{...Fu(),diff:bo,stringify:Ji,iterableEquality:od,subsetEquality:ld}}}};bd.prototype[Symbol.for(`chai/inspect`)]=function(e){let t=Ji(this,e.depth,{min:!0});return t.length<=e.truncate?t:`${this.toString()}{…}`};var xd=class extends bd{constructor(e,t=!1){if(!Ku(`String`,e))throw Error(`Expected is not a string`);super(e,t)}asymmetricMatch(e){let t=Ku(`String`,e)&&e.includes(this.sample);return this.inverse?!t:t}toString(){return`String${this.inverse?`Not`:``}Containing`}getExpectedType(){return`string`}},Sd=class extends bd{asymmetricMatch(e){return e!=null}toString(){return`Anything`}toAsymmetricMatcher(){return`Anything`}},Cd=class extends bd{constructor(e,t=!1){super(e,t)}getPrototype(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.constructor.prototype===e?null:e.constructor.prototype}hasProperty(e,t){return e?Object.hasOwn(e,t)?!0:this.hasProperty(this.getPrototype(e),t):!1}getProperties(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t)?.enumerable)]}asymmetricMatch(e,t){if(typeof this.sample!=`object`)throw TypeError(`You must provide an object to ${this.toString()}, not '${typeof this.sample}'.`);let n=!0,r=this.getProperties(this.sample);for(let i of r){if(!this.hasProperty(e,i)){n=!1;break}if(!$(Object.getOwnPropertyDescriptor(this.sample,i)?.value??this.sample[i],Object.getOwnPropertyDescriptor(e,i)?.value??e[i],t)){n=!1;break}}return this.inverse?!n:n}toString(){return`Object${this.inverse?`Not`:``}Containing`}getExpectedType(){return`object`}},wd=class extends bd{constructor(e,t=!1){super(e,t)}asymmetricMatch(e,t){if(!Array.isArray(this.sample))throw TypeError(`You must provide an array to ${this.toString()}, not '${typeof this.sample}'.`);let n=this.sample.length===0||Array.isArray(e)&&this.sample.every(n=>e.some(e=>$(n,e,t)));return this.inverse?!n:n}toString(){return`Array${this.inverse?`Not`:``}Containing`}getExpectedType(){return`array`}},Td=class extends bd{constructor(e){if(e===void 0)throw TypeError(`any() expects to be passed a constructor function. Please pass one or use anything() to match any object.`);super(e)}fnNameFor(e){if(e.name)return e.name;let t=Function.prototype.toString.call(e).match(/^(?:async)?\s*function\s*(?:\*\s*)?([\w$]+)\s*\(/);return t?t[1]:`<anonymous>`}asymmetricMatch(e){return this.sample===String?typeof e==`string`||e instanceof String:this.sample===Number?typeof e==`number`||e instanceof Number:this.sample===Function?typeof e==`function`||typeof e==`function`:this.sample===Boolean?typeof e==`boolean`||e instanceof Boolean:this.sample===BigInt?typeof e==`bigint`||e instanceof BigInt:this.sample===Symbol?typeof e==`symbol`||e instanceof Symbol:this.sample===Object?typeof e==`object`:e instanceof this.sample}toString(){return`Any`}getExpectedType(){return this.sample===String?`string`:this.sample===Number?`number`:this.sample===Function?`function`:this.sample===Object?`object`:this.sample===Boolean?`boolean`:this.fnNameFor(this.sample)}toAsymmetricMatcher(){return`Any<${this.fnNameFor(this.sample)}>`}},Ed=class extends bd{constructor(e,t=!1){if(!Ku(`String`,e)&&!Ku(`RegExp`,e))throw Error(`Expected is not a String or a RegExp`);super(new RegExp(e),t)}asymmetricMatch(e){let t=Ku(`String`,e)&&this.sample.test(e);return this.inverse?!t:t}toString(){return`String${this.inverse?`Not`:``}Matching`}getExpectedType(){return`string`}},Dd=class extends bd{precision;constructor(e,t=2,n=!1){if(!Ku(`Number`,e))throw Error(`Expected is not a Number`);if(!Ku(`Number`,t))throw Error(`Precision is not a Number`);super(e),this.inverse=n,this.precision=t}asymmetricMatch(e){if(!Ku(`Number`,e))return!1;let t=!1;return t=e===1/0&&this.sample===1/0||e===-1/0&&this.sample===-1/0?!0:Math.abs(this.sample-e)<10**-this.precision/2,this.inverse?!t:t}toString(){return`Number${this.inverse?`Not`:``}CloseTo`}getExpectedType(){return`number`}toAsymmetricMatcher(){return[this.toString(),this.sample,`(${md(`digit`,this.precision)})`].join(` `)}},Od=class extends bd{result;constructor(e,t=!1){if(!_d(e))throw TypeError(`SchemaMatching expected to receive a Standard Schema.`);super(e,t)}asymmetricMatch(e){let t=this.sample[`~standard`].validate(e);if(t instanceof Promise)throw TypeError(`Async schema validation is not supported in asymmetric matchers.`);this.result=t;let n=!this.result.issues||this.result.issues.length===0;return this.inverse?!n:n}toString(){return`Schema${this.inverse?`Not`:``}Matching`}getExpectedType(){return`object`}toAsymmetricMatcher(){let{utils:e}=this.getMatcherContext();return(this.result?.issues||[]).length>0?`${this.toString()} ${e.stringify(this.result,void 0,{printBasicPrototype:!1})}`:this.toString()}};const kd=(e,t)=>{t.addMethod(e.expect,`anything`,()=>new Sd),t.addMethod(e.expect,`any`,e=>new Td(e)),t.addMethod(e.expect,`stringContaining`,e=>new xd(e)),t.addMethod(e.expect,`objectContaining`,e=>new Cd(e)),t.addMethod(e.expect,`arrayContaining`,e=>new wd(e)),t.addMethod(e.expect,`stringMatching`,e=>new Ed(e)),t.addMethod(e.expect,`closeTo`,(e,t)=>new Dd(e,t)),t.addMethod(e.expect,`schemaMatching`,e=>new Od(e)),e.expect.not={stringContaining:e=>new xd(e,!0),objectContaining:e=>new Cd(e,!0),arrayContaining:e=>new wd(e,!0),stringMatching:e=>new Ed(e,!0),closeTo:(e,t)=>new Dd(e,t,!0),schemaMatching:e=>new Od(e,!0)}};function Ad(e,t,n){let r=e.flag(t,`negate`)?`not.`:``,i=`${e.flag(t,`_name`)}(${n?`expected`:``})`,a=e.flag(t,`promise`);return`expect(actual)${a?`.${a}`:``}.${r}${i}`}function jd(e,t,n,r){let i=e;if(i&&t instanceof Promise){t=t.finally(()=>{if(!i.promises)return;let e=i.promises.indexOf(t);e!==-1&&i.promises.splice(e,1)}),i.promises||=[],i.promises.push(t);let e=!1;return i.onFinished??=[],i.onFinished.push(()=>{if(!e){let e=(globalThis.__vitest_worker__?.onFilterStackTrace||(e=>e||``))(r.stack);console.warn([`Promise returned by \`${n}\` was not awaited. `,`Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. `,`Please remember to await the assertion.
`,e].join(``))}}),{then(n,r){return e=!0,t.then(n,r)},catch(e){return t.catch(e)},finally(e){return t.finally(e)},[Symbol.toStringTag]:`Promise`}}return t}function Md(e,t){var n;e.result||={state:`fail`},e.result.state=`fail`,(n=e.result).errors||(n.errors=[]),e.result.errors.push(ms(t))}function Nd(e,t,n){return function(...r){if(t!==`withTest`&&e.flag(this,`_name`,t),!e.flag(this,`soft`))return n.apply(this,r);let i=e.flag(this,`vitest-test`);if(!i)throw Error(`expect.soft() can only be used inside a test`);try{let e=n.apply(this,r);return e&&typeof e==`object`&&typeof e.then==`function`?e.then(da,e=>{Md(i,e)}):e}catch(e){Md(i,e)}}}const Pd=(e,t)=>{let{AssertionError:n}=e,r=Ru();function i(n,r){let i=n=>{let i=Nd(t,n,r);t.addMethod(e.Assertion.prototype,n,i),t.addMethod(globalThis[Su].matchers,n,i)};Array.isArray(n)?n.forEach(e=>i(e)):i(n)}[`throw`,`throws`,`Throw`].forEach(r=>{t.overwriteMethod(e.Assertion.prototype,r,e=>function(...r){let i=t.flag(this,`promise`),a=t.flag(this,`object`),o=t.flag(this,`negate`);if(i===`rejects`)t.flag(this,`object`,()=>{throw a});else if(i===`resolves`&&typeof a!=`function`){if(o)return;throw new n(t.flag(this,`message`)||`expected promise to throw an error, but it didn't`,{showDiff:!1},t.flag(this,`ssfi`))}e.apply(this,r)})}),i(`withTest`,function(e){return t.flag(this,`vitest-test`,e),this}),i(`toEqual`,function(e){let n=t.flag(this,`object`),i=$(n,e,[...r,od]);return this.assert(i,`expected #{this} to deeply equal #{exp}`,`expected #{this} to not deeply equal #{exp}`,e,n)}),i(`toStrictEqual`,function(e){let n=t.flag(this,`object`),i=$(n,e,[...r,od,ud,fd,dd],!0);return this.assert(i,`expected #{this} to strictly equal #{exp}`,`expected #{this} to not strictly equal #{exp}`,e,n)}),i(`toBe`,function(e){let t=this._obj,n=Object.is(t,e),i=``;return n||($(t,e,[...r,od,ud,fd,dd],!0)?i=`toStrictEqual`:$(t,e,[...r,od])&&(i=`toEqual`)),this.assert(n,pd(i),`expected #{this} not to be #{exp} // Object.is equality`,e,t)}),i(`toMatchObject`,function(e){let i=this._obj,a=$(i,e,[...r,od,ld]),o=t.flag(this,`negate`),{subset:s,stripped:c}=gd(i,e,r);if(a&&o||!a&&!o){let r=t.getMessage(this,[a,`expected #{this} to match object #{exp}`,`expected #{this} to not match object #{exp}`,e,s,!1]);throw new n(c===0?r:`${r}\n(${c} matching ${c===1?`property`:`properties`} omitted from actual)`,{showDiff:!0,expected:e,actual:s})}}),i(`toMatch`,function(e){let t=this._obj;if(typeof t!=`string`)throw TypeError(`.toMatch() expects to receive a string, but got ${typeof t}`);return this.assert(typeof e==`string`?t.includes(e):t.match(e),`expected #{this} to match #{exp}`,`expected #{this} not to match #{exp}`,e,t)}),i(`toContain`,function(e){let n=this._obj;if(typeof Node<`u`&&n instanceof Node){if(!(e instanceof Node))throw TypeError(`toContain() expected a DOM node as the argument, but got ${typeof e}`);return this.assert(n.contains(e),`expected #{this} to contain element #{exp}`,`expected #{this} not to contain element #{exp}`,e,n)}if(typeof DOMTokenList<`u`&&n instanceof DOMTokenList){ta(e,`class name`,[`string`]);let r=t.flag(this,`negate`)?n.value.replace(e,``).trim():`${n.value} ${e}`;return this.assert(n.contains(e),`expected "${n.value}" to contain "${e}"`,`expected "${n.value}" not to contain "${e}"`,r,n.value)}return typeof n==`string`&&typeof e==`string`?this.assert(n.includes(e),`expected #{this} to contain #{exp}`,`expected #{this} not to contain #{exp}`,e,n):(n!=null&&typeof n!=`string`&&t.flag(this,`object`,Array.from(n)),this.contain(e))}),i(`toContainEqual`,function(e){let n=t.flag(this,`object`),i=Array.from(n).findIndex(t=>$(t,e,r));this.assert(i!==-1,`expected #{this} to deep equally contain #{exp}`,`expected #{this} to not deep equally contain #{exp}`,e)}),i(`toBeTruthy`,function(){let e=t.flag(this,`object`);this.assert(!!e,`expected #{this} to be truthy`,`expected #{this} to not be truthy`,!0,e)}),i(`toBeFalsy`,function(){let e=t.flag(this,`object`);this.assert(!e,`expected #{this} to be falsy`,`expected #{this} to not be falsy`,!1,e)}),i(`toBeGreaterThan`,function(e){let t=this._obj;return ta(t,`actual`,[`number`,`bigint`]),ta(e,`expected`,[`number`,`bigint`]),this.assert(t>e,`expected ${t} to be greater than ${e}`,`expected ${t} to be not greater than ${e}`,e,t,!1)}),i(`toBeGreaterThanOrEqual`,function(e){let t=this._obj;return ta(t,`actual`,[`number`,`bigint`]),ta(e,`expected`,[`number`,`bigint`]),this.assert(t>=e,`expected ${t} to be greater than or equal to ${e}`,`expected ${t} to be not greater than or equal to ${e}`,e,t,!1)}),i(`toBeLessThan`,function(e){let t=this._obj;return ta(t,`actual`,[`number`,`bigint`]),ta(e,`expected`,[`number`,`bigint`]),this.assert(t<e,`expected ${t} to be less than ${e}`,`expected ${t} to be not less than ${e}`,e,t,!1)}),i(`toBeLessThanOrEqual`,function(e){let t=this._obj;return ta(t,`actual`,[`number`,`bigint`]),ta(e,`expected`,[`number`,`bigint`]),this.assert(t<=e,`expected ${t} to be less than or equal to ${e}`,`expected ${t} to be not less than or equal to ${e}`,e,t,!1)}),i(`toBeNaN`,function(){let e=t.flag(this,`object`);this.assert(Number.isNaN(e),`expected #{this} to be NaN`,`expected #{this} not to be NaN`,NaN,e)}),i(`toBeUndefined`,function(){let e=t.flag(this,`object`);this.assert(e===void 0,`expected #{this} to be undefined`,`expected #{this} not to be undefined`,void 0,e)}),i(`toBeNull`,function(){let e=t.flag(this,`object`);this.assert(e===null,`expected #{this} to be null`,`expected #{this} not to be null`,null,e)}),i(`toBeNullable`,function(){let e=t.flag(this,`object`);this.assert(e==null,`expected #{this} to be nullish`,`expected #{this} not to be nullish`,null,e)}),i(`toBeDefined`,function(){let e=t.flag(this,`object`);this.assert(e!==void 0,`expected #{this} to be defined`,`expected #{this} to be undefined`,e)}),i(`toBeTypeOf`,function(e){let t=typeof this._obj,n=e===t;return this.assert(n,`expected #{this} to be type of #{exp}`,`expected #{this} not to be type of #{exp}`,e,t)}),i(`toBeInstanceOf`,function(e){return this.instanceOf(e)}),i(`toHaveLength`,function(e){return this.have.length(e)}),i(`toHaveProperty`,function(...e){Array.isArray(e[0])&&(e[0]=e[0].map(e=>String(e).replace(/([.[\]])/g,`\\$1`)).join(`.`));let n=this._obj,[i,a]=e,{value:o,exists:s}=Object.hasOwn(n,i)?{value:n[i],exists:!0}:t.getPathInfo(n,i),c=s&&(e.length===1||$(a,o,r)),l=e.length===1?``:` with value ${t.objDisplay(a)}`;return this.assert(c,`expected #{this} to have property "${i}"${l}`,`expected #{this} to not have property "${i}"${l}`,a,s?o:void 0)}),i(`toBeCloseTo`,function(e,t=2){let n=this._obj,r=!1,i=0,a=0;return e===1/0&&n===1/0||e===-1/0&&n===-1/0?r=!0:(i=10**-t/2,a=Math.abs(n-e),r=a<i),this.assert(r,`expected #{this} to be close to #{exp}, received difference is ${a}, but expected ${i}`,`expected #{this} to not be close to #{exp}, received difference is ${a}, but expected ${i}`,e,n,!1)});function a(e){if(!Lo(e._obj))throw TypeError(`${t.inspect(e._obj)} is not a spy or a call to a spy!`)}function o(e){return a(e),e._obj}i([`toHaveBeenCalledTimes`,`toBeCalledTimes`],function(e){let t=o(this),n=t.getMockName(),r=t.mock.calls.length;return this.assert(r===e,`expected "${n}" to be called #{exp} times, but got ${r} times`,`expected "${n}" to not be called #{exp} times`,e,r,!1)}),i(`toHaveBeenCalledOnce`,function(){let e=o(this),t=e.getMockName(),n=e.mock.calls.length;return this.assert(n===1,`expected "${t}" to be called once, but got ${n} times`,`expected "${t}" to not be called once`,1,n,!1)}),i([`toHaveBeenCalled`,`toBeCalled`],function(){let e=o(this),r=e.getMockName(),i=e.mock.calls.length,a=i>0,s=t.flag(this,`negate`),c=t.getMessage(this,[a,`expected "${r}" to be called at least once`,`expected "${r}" to not be called at all, but actually been called ${i} times`,!0,a]);if(a&&s&&(c=Id(e,c)),a&&s||!a&&!s)throw new n(c)});function s(e,t){return e.length===t.length&&e.every((e,n)=>$(e,t[n],[...r,od]))}i([`toHaveBeenCalledWith`,`toBeCalledWith`],function(...e){let r=o(this),i=r.getMockName(),a=r.mock.calls.some(t=>s(t,e)),c=t.flag(this,`negate`),l=t.getMessage(this,[a,`expected "${i}" to be called with arguments: #{exp}`,`expected "${i}" to not be called with arguments: #{exp}`,e]);if(a&&c||!a&&!c)throw new n(Id(r,l,e))}),i(`toHaveBeenCalledExactlyOnceWith`,function(...e){let r=o(this),i=r.getMockName(),a=r.mock.calls.length,c=r.mock.calls.some(t=>s(t,e))&&a===1,l=t.flag(this,`negate`),u=t.getMessage(this,[c,`expected "${i}" to be called once with arguments: #{exp}`,`expected "${i}" to not be called once with arguments: #{exp}`,e]);if(c&&l||!c&&!l)throw new n(Id(r,u,e))}),i([`toHaveBeenNthCalledWith`,`nthCalledWith`],function(e,...t){let n=o(this),r=n.getMockName(),i=n.mock.calls[e-1],a=n.mock.calls.length,c=e<=a;this.assert(i&&s(i,t),`expected ${Fd(e)} "${r}" call to have been called with #{exp}${c?``:`, but called only ${a} times`}`,`expected ${Fd(e)} "${r}" call to not have been called with #{exp}`,t,i,c)}),i([`toHaveBeenLastCalledWith`,`lastCalledWith`],function(...e){let t=o(this),n=t.getMockName(),r=t.mock.calls.at(-1);this.assert(r&&s(r,e),`expected last "${n}" call to have been called with #{exp}`,`expected last "${n}" call to not have been called with #{exp}`,e,r)});function c(e,t,n){let r=e.mock.invocationCallOrder,i=t.mock.invocationCallOrder;return r.length===0?!n:i.length===0?!1:r[0]<i[0]}i([`toHaveBeenCalledBefore`],function(e,n=!0){let r=o(this);if(!Lo(e))throw TypeError(`${t.inspect(e)} is not a spy or a call to a spy`);this.assert(c(r,e,n),`expected "${r.getMockName()}" to have been called before "${e.getMockName()}"`,`expected "${r.getMockName()}" to not have been called before "${e.getMockName()}"`,e,r)}),i([`toHaveBeenCalledAfter`],function(e,n=!0){let r=o(this);if(!Lo(e))throw TypeError(`${t.inspect(e)} is not a spy or a call to a spy`);this.assert(c(e,r,n),`expected "${r.getMockName()}" to have been called after "${e.getMockName()}"`,`expected "${r.getMockName()}" to not have been called after "${e.getMockName()}"`,e,r)}),i([`toThrow`,`toThrowError`],function(e){if(typeof e==`string`||e===void 0||e instanceof RegExp)return this.throws(e===``?/^$/:e);let i=this._obj,a=t.flag(this,`promise`),o=t.flag(this,`negate`),s=null;if(a===`rejects`)s=i;else if(a===`resolves`&&typeof i!=`function`){if(o)return;throw new n(t.flag(this,`message`)||`expected promise to throw an error, but it didn't`,{showDiff:!1},t.flag(this,`ssfi`))}else{let e=!1;try{i()}catch(t){e=!0,s=t}if(!e&&!o)throw new n(t.flag(this,`message`)||`expected function to throw an error, but it didn't`,{showDiff:!1},t.flag(this,`ssfi`))}if(typeof e==`function`){let t=e.name||e.prototype.constructor.name;return this.assert(s&&s instanceof e,`expected error to be instance of ${t}`,`expected error not to be instance of ${t}`,e,s)}if(e instanceof Error){let t=$(s,e,[...r,od]);return this.assert(t,`expected a thrown error to be #{exp}`,`expected a thrown error not to be #{exp}`,e,s)}if(typeof e==`object`&&`asymmetricMatch`in e&&typeof e.asymmetricMatch==`function`){let t=e;return this.assert(s&&t.asymmetricMatch(s),`expected error to match asymmetric matcher`,`expected error not to match asymmetric matcher`,t,s)}throw Error(`"toThrow" expects string, RegExp, function, Error instance or asymmetric matcher, got "${typeof e}"`)}),[{name:`toHaveResolved`,condition:e=>e.mock.settledResults.length>0&&e.mock.settledResults.some(({type:e})=>e===`fulfilled`),action:`resolved`},{name:[`toHaveReturned`,`toReturn`],condition:e=>e.mock.calls.length>0&&e.mock.results.some(({type:e})=>e!==`throw`),action:`called`}].forEach(({name:e,condition:t,action:n})=>{i(e,function(){let e=o(this),r=e.getMockName(),i=t(e);this.assert(i,`expected "${r}" to be successfully ${n} at least once`,`expected "${r}" to not be successfully ${n}`,i,!i,!1)})}),[{name:`toHaveResolvedTimes`,condition:(e,t)=>e.mock.settledResults.reduce((e,{type:t})=>t===`fulfilled`?++e:e,0)===t,action:`resolved`},{name:[`toHaveReturnedTimes`,`toReturnTimes`],condition:(e,t)=>e.mock.results.reduce((e,{type:t})=>t===`throw`?e:++e,0)===t,action:`called`}].forEach(({name:e,condition:t,action:n})=>{i(e,function(e){let r=o(this),i=r.getMockName(),a=t(r,e);this.assert(a,`expected "${i}" to be successfully ${n} ${e} times`,`expected "${i}" to not be successfully ${n} ${e} times`,`expected resolved times: ${e}`,`received resolved times: ${a}`,!1)})}),[{name:`toHaveResolvedWith`,condition:(e,t)=>e.mock.settledResults.some(({type:e,value:n})=>e===`fulfilled`&&$(t,n)),action:`resolve`},{name:[`toHaveReturnedWith`,`toReturnWith`],condition:(e,t)=>e.mock.results.some(({type:e,value:n})=>e===`return`&&$(t,n)),action:`return`}].forEach(({name:e,condition:r,action:a})=>{i(e,function(e){let i=o(this),s=r(i,e),c=t.flag(this,`negate`);if(s&&c||!s&&!c){let r=i.getMockName(),o=t.getMessage(this,[s,`expected "${r}" to ${a} with: #{exp} at least once`,`expected "${r}" to not ${a} with: #{exp}`,e]);throw new n(Ld(i,a===`return`?i.mock.results:i.mock.settledResults,o,e))}})}),[{name:`toHaveLastResolvedWith`,condition:(e,t)=>{let n=e.mock.settledResults.at(-1);return!!(n&&n.type===`fulfilled`&&$(n.value,t))},action:`resolve`},{name:[`toHaveLastReturnedWith`,`lastReturnedWith`],condition:(e,t)=>{let n=e.mock.results.at(-1);return!!(n&&n.type===`return`&&$(n.value,t))},action:`return`}].forEach(({name:e,condition:t,action:n})=>{i(e,function(e){let r=o(this),i=(n===`return`?r.mock.results:r.mock.settledResults).at(-1),a=r.getMockName();this.assert(t(r,e),`expected last "${a}" call to ${n} #{exp}`,`expected last "${a}" call to not ${n} #{exp}`,e,i?.value)})}),[{name:`toHaveNthResolvedWith`,condition:(e,t,n)=>{let r=e.mock.settledResults[t-1];return r&&r.type===`fulfilled`&&$(r.value,n)},action:`resolve`},{name:[`toHaveNthReturnedWith`,`nthReturnedWith`],condition:(e,t,n)=>{let r=e.mock.results[t-1];return r&&r.type===`return`&&$(r.value,n)},action:`return`}].forEach(({name:e,condition:t,action:n})=>{i(e,function(e,r){let i=o(this),a=i.getMockName(),s=(n===`return`?i.mock.results:i.mock.settledResults)[e-1],c=`${Fd(e)} call`;this.assert(t(i,e,r),`expected ${c} "${a}" call to ${n} #{exp}`,`expected ${c} "${a}" call to not ${n} #{exp}`,r,s?.value)})}),i(`withContext`,function(e){for(let n in e)t.flag(this,n,e[n]);return this}),t.addProperty(e.Assertion.prototype,`resolves`,function(){let r=Error(`resolves`);t.flag(this,`promise`,`resolves`),t.flag(this,`error`,r);let i=t.flag(this,`vitest-test`),a=t.flag(this,`object`);if(t.flag(this,`poll`))throw SyntaxError(`expect.poll() is not supported in combination with .resolves`);if(typeof a?.then!=`function`)throw TypeError(`You must provide a Promise to expect() when using .resolves, not '${typeof a}'.`);let o=new Proxy(this,{get:(s,c,l)=>{let u=Reflect.get(s,c,l);return typeof u==`function`?(...e)=>(t.flag(this,`_name`,c),jd(i,a.then(n=>(t.flag(this,`object`,n),u.call(this,...e)),e=>{let i=new n(`promise rejected "${t.inspect(e)}" instead of resolving`,{showDiff:!1});throw i.cause=e,i.stack=r.stack.replace(r.message,i.message),i}),Ad(t,this,!!e.length),r)):u instanceof e.Assertion?o:u}});return o}),t.addProperty(e.Assertion.prototype,`rejects`,function(){let r=Error(`rejects`);t.flag(this,`promise`,`rejects`),t.flag(this,`error`,r);let i=t.flag(this,`vitest-test`),a=t.flag(this,`object`),o=typeof a==`function`?a():a;if(t.flag(this,`poll`))throw SyntaxError(`expect.poll() is not supported in combination with .rejects`);if(typeof o?.then!=`function`)throw TypeError(`You must provide a Promise to expect() when using .rejects, not '${typeof o}'.`);let s=new Proxy(this,{get:(a,c,l)=>{let u=Reflect.get(a,c,l);return typeof u==`function`?(...e)=>(t.flag(this,`_name`,c),jd(i,o.then(e=>{let i=new n(`promise resolved "${t.inspect(e)}" instead of rejecting`,{showDiff:!0,expected:Error(`rejected promise`),actual:e});throw i.stack=r.stack.replace(r.message,i.message),i},n=>(t.flag(this,`object`,n),u.call(this,...e))),Ad(t,this,!!e.length),r)):u instanceof e.Assertion?s:u}});return s})};function Fd(e){let t=e%10,n=e%100;return t===1&&n!==11?`${e}st`:t===2&&n!==12?`${e}nd`:t===3&&n!==13?`${e}rd`:`${e}th`}function Id(e,t,n){return e.mock.calls.length&&(t+=R.gray(`\n\nReceived: \n\n${e.mock.calls.map((t,r)=>{let i=R.bold(`  ${Fd(r+1)} ${e.getMockName()} call:\n\n`);return n?i+=bo(n,t,{omitAnnotationLines:!0}):i+=Ji(t).split(`
`).map(e=>`    ${e}`).join(`
`),i+=`
`,i}).join(`
`)}`)),t+=R.gray(`\n\nNumber of calls: ${R.bold(e.mock.calls.length)}\n`),t}function Ld(e,t,n,r){return t.length&&(n+=R.gray(`\n\nReceived: \n\n${t.map((t,n)=>{let i=R.bold(`  ${Fd(n+1)} ${e.getMockName()} call return:\n\n`);return r?i+=bo(r,t.value,{omitAnnotationLines:!0}):i+=Ji(t).split(`
`).map(e=>`    ${e}`).join(`
`),i+=`
`,i}).join(`
`)}`)),n+=R.gray(`\n\nNumber of calls: ${R.bold(e.mock.calls.length)}\n`),n}function Rd(e,t){let n=e._obj,r=U.flag(e,`negate`),i=U.flag(e,`promise`)||``,a=U.flag(e,`message`),o={...Fu(),diff:bo,stringify:Ji,iterableEquality:od,subsetEquality:ld},s=U.flag(e,`vitest-test`),c=s?.fullTestName??``;return s?.type!==`test`&&(s=void 0),{state:{...vd(t),task:s,currentTestName:c,customTesters:Ru(),isNot:r,utils:o,promise:i,equals:$,suppressedErrors:[],soft:U.flag(e,`soft`),poll:U.flag(e,`poll`)},isNot:r,obj:n,customMessage:a}}var zd=class extends Error{constructor(e,t,n){super(e),this.actual=t,this.expected=n}};function Bd(e,t,n){return(r,i)=>{Object.entries(n).forEach(([n,r])=>{function a(...e){let{state:n,isNot:i,obj:a,customMessage:o}=Rd(this,t),s=r.call(n,a,...e);if(s&&typeof s==`object`&&typeof s.then==`function`)return s.then(({pass:e,message:t,actual:n,expected:r})=>{if(e&&i||!e&&!i)throw new zd(o??t(),n,r)});let{pass:c,message:l,actual:u,expected:d}=s;if(c&&i||!c&&!i)throw new zd(o??l(),u,d)}let o=Nd(i,n,a);i.addMethod(globalThis[Su].matchers,n,o),i.addMethod(e.Assertion.prototype,n,o);class s extends bd{constructor(e=!1,...t){super(t,e)}asymmetricMatch(e){let{pass:n}=r.call(this.getMatcherContext(t),e,...this.sample);return this.inverse?!n:n}toString(){return`${this.inverse?`not.`:``}${n}`}getExpectedType(){return`any`}toAsymmetricMatcher(){return`${this.toString()}<${this.sample.map(e=>Ji(e)).join(`, `)}>`}}let c=(...e)=>new s(!1,...e);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,value:c,writable:!0}),Object.defineProperty(t.not,n,{configurable:!0,enumerable:!0,value:(...e)=>new s(!0,...e),writable:!0}),Object.defineProperty(globalThis[wu],n,{configurable:!0,enumerable:!0,value:c,writable:!0})})}}const Vd=(e,t)=>{t.addMethod(e.expect,`extend`,(t,n)=>{bu(Bd(e,t,n))})},Hd=Symbol(`vitest:SAFE_TIMERS`);function Ud(){let{setTimeout:e,setInterval:t,clearInterval:n,clearTimeout:r,setImmediate:i,clearImmediate:a,queueMicrotask:o}=globalThis[Hd]||globalThis,{nextTick:s}=globalThis[Hd]||globalThis.process||{};return{nextTick:s,setTimeout:e,setInterval:t,clearInterval:n,clearTimeout:r,setImmediate:i,clearImmediate:a,queueMicrotask:o}}function Wd(e,t=setTimeout){return new Promise(n=>t(n,e))}const Gd=/^[A-Za-z]:\//;function Kd(e=``){return e&&e.replace(/\\/g,`/`).replace(Gd,e=>e.toUpperCase())}const qd=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/;function Jd(){return typeof process<`u`&&typeof process.cwd==`function`?process.cwd().replace(/\\/g,`/`):`/`}const Yd=function(...e){e=e.map(e=>Kd(e));let t=``,n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:Jd();!i||i.length===0||(t=`${i}/${t}`,n=Zd(i))}return t=Xd(t,!n),n&&!Zd(t)?`/${t}`:t.length>0?t:`.`};function Xd(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}const Zd=function(e){return qd.test(e)};var Qd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,$d=new Uint8Array(64),ef=new Uint8Array(128);for(let e=0;e<Qd.length;e++){let t=Qd.charCodeAt(e);$d[e]=t,ef[t]=e}const tf=/^\s*at .*(?:\S:\d+|\(native\))/m,nf=/^(?:eval@)?(?:\[native code\])?$/;function rf(e){if(!e.includes(`:`))return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/^\(|\)$/g,``));if(!t)return[e];let n=t[1];if(n.startsWith(`async `)&&(n=n.slice(6)),n.startsWith(`http:`)||n.startsWith(`https:`)){let e=new URL(n);e.searchParams.delete(`import`),e.searchParams.delete(`browserv`),n=e.pathname+e.hash+e.search}if(n.startsWith(`/@fs/`)){let e=/^\/@fs\/[a-zA-Z]:\//.test(n);n=n.slice(e?5:4)}return[n,t[2]||void 0,t[3]||void 0]}function af(e){let t=e.trim();if(nf.test(t)||(t.includes(` > eval`)&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,`:$1`)),!t.includes(`@`)))return null;let n=-1,r=``,i;for(let e=0;e<t.length;e++)if(t[e]===`@`){let a=t.slice(e+1);if(a.includes(`:`)&&a.length>=3){n=e,r=a,i=e>0?t.slice(0,e):void 0;break}}if(n===-1||!r.includes(`:`)||r.length<3)return null;let[a,o,s]=rf(r);return!a||!o||!s?null:{file:a,method:i||``,line:Number.parseInt(o),column:Number.parseInt(s)}}function of(e){let t=e.trim();return tf.test(t)?sf(t):af(t)}function sf(e){let t=e.trim();if(!tf.test(t))return null;t.includes(`(eval `)&&(t=t.replace(/eval code/g,`eval`).replace(/(\(eval at [^()]*)|(,.*$)/g,``));let n=t.replace(/^\s+/,``).replace(/\(eval code/g,`(`).replace(/^.*?\s+/,``),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],``):n;let[i,a,o]=rf(r?r[1]:n),s=r&&n||``,c=i&&[`eval`,`<anonymous>`].includes(i)?void 0:i;return!c||!a||!o?null:(s.startsWith(`async `)&&(s=s.slice(6)),c.startsWith(`file://`)&&(c=c.slice(7)),c=c.startsWith(`node:`)||c.startsWith(`internal:`)?c:Yd(c),s&&=s.replace(/__vite_ssr_import_\d+__\./g,``).replace(/(Object\.)?__vite_ssr_export_default__\s?/g,``),{method:s,file:c,line:Number.parseInt(a),column:Number.parseInt(o)})}function cf(e,t){function n(r){let i=function(...e){return t.apply(r,e)};Object.assign(i,t),i.withContext=()=>i.bind(r),i.setContext=(e,t)=>{r[e]=t},i.mergeContext=e=>{Object.assign(r,e)};for(let t of e)Object.defineProperty(i,t,{get(){return n({...r,[t]:!0})}});return i}let r=n({});return r.fn=t,r}function lf(e,t){let n=t.split(`
`).slice(1);for(let t of n){let n=of(t);if(n&&n.file===e)return n}}function uf(e){let t=[e.name],n=e;for(;n?.suite;)n=n.suite,n?.name&&t.unshift(n.name);return n!==e.file&&t.unshift(e.file.name),t}function df(e,t=` > `){return e.filter(e=>e!==void 0).join(t)}var ff=class extends Error{code=`VITEST_PENDING`;taskId;constructor(e,t,n){super(e),this.message=e,this.note=n,this.taskId=t.id}};const pf=new WeakMap,mf=new WeakMap,hf=new WeakMap;function gf(e,t){pf.set(e,t)}function _f(e,t){mf.set(e,t)}function vf(e){return mf.get(e)}function yf(e,t){hf.set(e,t)}function bf(e){return hf.get(e)}function xf(e,t){let n=t.reduce((e,t)=>(e[t.prop]=t,e),{}),r={};for(let t in e.forEach(e=>{let t=n[e.prop]||{...e};r[t.prop]=t}),r){let e=r[t];e.deps=e.deps?.map(e=>r[e.prop])}return Object.values(r)}function Sf(e,t,n){let r=[`auto`,`injected`,`scope`],i=Object.entries(e).map(([e,t])=>{let i={value:t};if(Array.isArray(t)&&t.length>=2&&ra(t[1])&&Object.keys(t[1]).some(e=>r.includes(e))){Object.assign(i,t[1]);let r=t[0];i.value=i.injected?n.injectValue?.call(n,e)??r:r}return i.scope=i.scope||`test`,i.scope===`worker`&&!n.getWorkerContext&&(i.scope=`file`),i.prop=e,i.isFn=typeof i.value==`function`,i});return Array.isArray(t.fixtures)?t.fixtures=t.fixtures.concat(i):t.fixtures=i,i.forEach(e=>{if(e.isFn){let r=Af(e.value);if(r.length&&(e.deps=t.fixtures.filter(({prop:t})=>t!==e.prop&&r.includes(t))),e.scope!==`test`){var n;(n=e.deps)==null||n.forEach(t=>{if(t.isFn&&!(e.scope===`worker`&&t.scope===`worker`)&&!(e.scope===`file`&&t.scope!==`test`))throw SyntaxError(`cannot use the ${t.scope} fixture "${t.prop}" inside the ${e.scope} fixture "${e.prop}"`)})}}}),t}const Cf=new Map,wf=new Map;function Tf(e,t,n){return r=>{let i=r||n;if(!i)return t({});let a=vf(i);if(!a?.length)return t(i);let o=Af(t),s=a.some(({auto:e})=>e);if(!o.length&&!s)return t(i);Cf.get(i)||Cf.set(i,new Map);let c=Cf.get(i);wf.has(i)||wf.set(i,[]);let l=wf.get(i),u=kf(a.filter(({prop:e,auto:t})=>t||o.includes(e)));if(!u.length)return t(i);async function d(){for(let t of u){if(c.has(t))continue;let n=await Df(e,t,i,l);i[t.prop]=n,c.set(t,n),t.scope===`test`&&l.unshift(()=>{c.delete(t)})}}return d().then(()=>t(i))}}const Ef=new WeakMap;function Df(e,t,n,r){let i=fp(n.task.file),a=e.getWorkerContext?.call(e);if(!t.isFn){var o;if(i[o=t.prop]??(i[o]=t.value),a){var s;a[s=t.prop]??(a[s]=t.value)}return t.value}if(t.scope===`test`)return Of(t.value,n,r);if(Ef.has(t))return Ef.get(t);let c;if(t.scope===`worker`){if(!a)throw TypeError("[@vitest/runner] The worker context is not available in the current test runner. Please, provide the `getWorkerContext` method when initiating the runner.");c=a}else c=i;if(t.prop in c)return c[t.prop];wf.has(c)||wf.set(c,[]);let l=wf.get(c),u=Of(t.value,c,l).then(e=>(c[t.prop]=e,Ef.delete(t),e));return Ef.set(t,u),u}async function Of(e,t,n){let r=pa(),i=!1,a=e(t,async e=>{i=!0,r.resolve(e);let t=pa();n.push(async()=>{t.resolve(),await a}),await t}).catch(e=>{if(!i){r.reject(e);return}throw e});return r}function kf(e,t=new Set,n=[]){return e.forEach(e=>{if(!n.includes(e)){if(!e.isFn||!e.deps){n.push(e);return}if(t.has(e))throw Error(`Circular fixture dependency detected: ${e.prop} <- ${[...t].reverse().map(e=>e.prop).join(` <- `)}`);t.add(e),kf(e.deps,t,n),n.push(e),t.clear()}}),n}function Af(e){let t=jf(e.toString());/__async\((?:this|null), (?:null|arguments|\[[_0-9, ]*\]), function\*/.test(t)&&(t=t.split(/__async\((?:this|null),/)[1]);let n=t.match(/[^(]*\(([^)]*)/);if(!n)return[];let r=Mf(n[1]);if(!r.length)return[];let i=r[0];if(`__VITEST_FIXTURE_INDEX__`in e&&(i=r[e.__VITEST_FIXTURE_INDEX__],!i))return[];if(!(i[0]===`{`&&i.endsWith(`}`)))throw Error(`The first argument inside a fixture must use object destructuring pattern, e.g. ({ test } => {}). Instead, received "${i}".`);let a=Mf(i.slice(1,-1).replace(/\s/g,``)).map(e=>e.replace(/:.*|=.*/g,``)),o=a.at(-1);if(o&&o.startsWith(`...`))throw Error(`Rest parameters are not supported in fixtures, received "${o}".`);return a}function jf(e){let t=[],n=`none`;for(let r=0;r<e.length;++r)n===`singleline`?e[r]===`
`&&(n=`none`):n===`multiline`?e[r-1]===`*`&&e[r]===`/`&&(n=`none`):n===`none`&&(e[r]===`/`&&e[r+1]===`/`?n=`singleline`:e[r]===`/`&&e[r+1]===`*`?(n=`multiline`,r+=2):t.push(e[r]));return t.join(``)}function Mf(e){let t=[],n=[],r=0;for(let i=0;i<e.length;i++)if(e[i]===`{`||e[i]===`[`)n.push(e[i]===`{`?`}`:`]`);else if(e[i]===n.at(-1))n.pop();else if(!n.length&&e[i]===`,`){let n=e.substring(r,i).trim();n&&t.push(n),r=i+1}let i=e.substring(r).trim();return i&&t.push(i),t}function Nf(){return Hf().config.hookTimeout}const Pf=Symbol.for(`VITEST_CLEANUP_TIMEOUT`),Ff=Symbol.for(`VITEST_CLEANUP_STACK_TRACE`);function If(e,t=Nf()){ta(e,`"beforeAll" callback`,[`function`]);let n=Error(`STACK_TRACE_ERROR`);return Uf().on(`beforeAll`,Object.assign(ap(e,t,!0,n),{[Pf]:t,[Ff]:n}))}function Lf(e,t){return ta(e,`"afterAll" callback`,[`function`]),Uf().on(`afterAll`,ap(e,t??Nf(),!0,Error(`STACK_TRACE_ERROR`)))}function Rf(e,t=Nf()){ta(e,`"beforeEach" callback`,[`function`]);let n=Error(`STACK_TRACE_ERROR`),r=Hf();return Uf().on(`beforeEach`,Object.assign(ap(Tf(r,e),t??Nf(),!0,n,sp),{[Pf]:t,[Ff]:n}))}function zf(e,t){ta(e,`"afterEach" callback`,[`function`]);let n=Hf();return Uf().on(`afterEach`,ap(Tf(n,e),t??Nf(),!0,Error(`STACK_TRACE_ERROR`),sp))}const Bf=Jf();Xf(function(e,t,n){Uf().test.fn.call(this,Zf(e),t,n)});function Vf(e,t){if(!e)throw Error(`Vitest failed to find ${t}. One of the following is possible:
- "vitest" is imported directly without running "vitest" command
- "vitest" is imported inside "globalSetup" (to fix this, use "setupFiles" instead, because "globalSetup" runs in a different context)
- "vitest" is imported inside Vite / Vitest config file
- Otherwise, it might be a Vitest bug. Please report it to https://github.com/vitest-dev/vitest/issues
`)}function Hf(){Vf(void 0,`the runner`)}function Uf(){let e=np.currentSuite||void 0;return Vf(e,`the current suite`),e}function Wf(){return{beforeAll:[],afterAll:[],beforeEach:[],afterEach:[]}}function Gf(e,t){if(typeof t==`object`&&t)throw TypeError(`Signature "test(name, fn, { ... })" was deprecated in Vitest 3 and removed in Vitest 4. Please, provide options as a second argument instead.`);let n={},r;if(typeof t==`number`?n={timeout:t}:typeof e==`object`&&(n=e),typeof e==`function`){if(typeof t==`function`)throw TypeError(`Cannot use two functions as arguments. Please use the second argument for options.`);r=e}else typeof t==`function`&&(r=t);return{options:n,handler:r}}function Kf(e,t=()=>{},n,r,i,a){let o=[],s;p(!0);let c=function(e=``,t={}){var n;let r=t?.timeout??(void 0).config.testTimeout,a=np.currentSuite?.suite,s={id:``,name:e,fullName:df([a?.fullName??((n=np.currentSuite)==null||(n=n.file)==null?void 0:n.fullName),e]),fullTestName:df([a?.fullTestName,e]),suite:a,each:t.each,fails:t.fails,context:void 0,type:`test`,file:a?.file??np.currentSuite?.file,timeout:r,retry:t.retry??(void 0).config.retry,repeats:t.repeats,mode:t.only?`only`:t.skip?`skip`:t.todo?`todo`:`run`,meta:t.meta??Object.create(null),annotations:[],artifacts:[]},c=t.handler;s.mode===`run`&&!c&&(s.mode=`todo`),(t.concurrent||!t.sequential&&(void 0).config.sequence.concurrent)&&(s.concurrent=!0),s.shuffle=i?.shuffle;let l=lp(s,void 0);Object.defineProperty(s,`context`,{value:l,enumerable:!1}),_f(l,t.fixtures);let u=Error.stackTraceLimit;Error.stackTraceLimit=15;let d=Error(`STACK_TRACE_ERROR`);if(Error.stackTraceLimit=u,c&&gf(s,ap(qf(Tf(void 0,c,l),s),r,!1,d,(e,t)=>sp([l],t))),(void 0).config.includeTaskLocation){let e=d.stack,t=lf(void 0,e);t&&(s.location={line:t.line,column:t.column})}return o.push(s),s},l=Xf(function(e,t,n){let{options:r,handler:a}=Gf(t,n);typeof i==`object`&&(r=Object.assign({},i,r)),r.concurrent=this.concurrent||!this.sequential&&r?.concurrent,r.sequential=this.sequential||!this.concurrent&&r?.sequential;let o=c(Zf(e),{...this,...r,handler:a});o.type=`test`}),u=a,d={type:`collector`,name:e,mode:n,suite:s,options:i,test:l,tasks:o,collect:h,task:c,clear:m,on:f,fixtures(){return u},scoped(e){let t=Sf(e,{fixtures:u},void 0);t.fixtures&&(u=t.fixtures)}};function f(e,...t){bf(s)[e].push(...t)}function p(t){var a;typeof i==`number`&&(i={timeout:i});let o=np.currentSuite?.suite;s={id:``,type:`suite`,name:e,fullName:df([o?.fullName??((a=np.currentSuite)==null||(a=a.file)==null?void 0:a.fullName),e]),fullTestName:df([o?.fullTestName,e]),suite:o,mode:n,each:r,file:o?.file??np.currentSuite?.file,shuffle:i?.shuffle,tasks:[],meta:Object.create(null),concurrent:i?.concurrent},yf(s,Wf())}function m(){o.length=0,p(!1)}async function h(e){if(!e)throw TypeError(`File is required to collect tasks.`);t&&await ip(d,()=>t(l));let n=[];for(let t of o)n.push(t.type===`collector`?await t.collect(e):t);return s.tasks=n,s}return rp(d),d}function qf(e,t){return(async(...n)=>{let r=await e(...n);if(t.promises){let e=(await Promise.allSettled(t.promises)).map(e=>e.status===`rejected`?e.reason:void 0).filter(Boolean);if(e.length)throw e}return r})}function Jf(){function e(e,t,n){var r;let i=this.only?`only`:this.skip?`skip`:this.todo?`todo`:`run`,a=np.currentSuite||void 0,{options:o,handler:s}=Gf(t,n);i===`run`&&!s&&(i=`todo`);let c=o.concurrent||this.concurrent||o.sequential===!1,l=o.sequential||this.sequential||o.concurrent===!1;o={...a?.options,...o,shuffle:this.shuffle??o.shuffle??(a==null||(r=a.options)==null?void 0:r.shuffle)??void 0};let u=c||o.concurrent&&!l,d=l||o.sequential&&!c;return o.concurrent=u&&!d,o.sequential=d&&!u,Kf(Zf(e),s,i,this.each,o,a?.fixtures())}return e.each=function(e,...t){let n=this.withContext();return this.setContext(`each`,!0),Array.isArray(e)&&t.length&&(e=ep(e,t)),(t,r,i)=>{let a=Zf(t),o=e.every(Array.isArray),{options:s,handler:c}=Gf(r,i),l=typeof r==`function`;e.forEach((e,t)=>{let r=Array.isArray(e)?e:[e];l?o?n(Qf(a,r,t),c?()=>c(...r):void 0,s.timeout):n(Qf(a,r,t),c?()=>c(e):void 0,s.timeout):o?n(Qf(a,r,t),s,c?()=>c(...r):void 0):n(Qf(a,r,t),s,c?()=>c(e):void 0)}),this.setContext(`each`,void 0)}},e.for=function(e,...t){return Array.isArray(e)&&t.length&&(e=ep(e,t)),(t,n,r)=>{let i=Zf(t),{options:a,handler:o}=Gf(n,r);e.forEach((e,t)=>{Bf(Qf(i,na(e),t),a,o?()=>o(e):void 0)})}},e.skipIf=e=>e?Bf.skip:Bf,e.runIf=e=>e?Bf:Bf.skip,cf([`concurrent`,`sequential`,`shuffle`,`skip`,`only`,`todo`],e)}function Yf(e,t){let n=e;n.each=function(e,...t){let n=this.withContext();return this.setContext(`each`,!0),Array.isArray(e)&&t.length&&(e=ep(e,t)),(t,r,i)=>{let a=Zf(t),o=e.every(Array.isArray),{options:s,handler:c}=Gf(r,i),l=typeof r==`function`;e.forEach((e,t)=>{let r=Array.isArray(e)?e:[e];l?o?n(Qf(a,r,t),c?()=>c(...r):void 0,s.timeout):n(Qf(a,r,t),c?()=>c(e):void 0,s.timeout):o?n(Qf(a,r,t),s,c?()=>c(...r):void 0):n(Qf(a,r,t),s,c?()=>c(e):void 0)}),this.setContext(`each`,void 0)}},n.for=function(e,...t){let n=this.withContext();return Array.isArray(e)&&t.length&&(e=ep(e,t)),(t,r,i)=>{let a=Zf(t),{options:o,handler:s}=Gf(r,i);e.forEach((e,t)=>{let r=s?t=>s(e,t):void 0;r&&(r.__VITEST_FIXTURE_INDEX__=1,r.toString=()=>s.toString()),n(Qf(a,na(e),t),o,r)})}},n.skipIf=function(e){return e?this.skip:this},n.runIf=function(e){return e?this:this.skip},n.scoped=function(e){Uf().scoped(e)},n.extend=function(n){let r=Sf(n,t||{},void 0),i=e;return Xf(function(e,t,n){let r=Uf().fixtures(),a={...this};r&&(a.fixtures=xf(a.fixtures||[],r)),i.call(a,Zf(e),t,n)},r)},n.beforeEach=Rf,n.afterEach=zf,n.beforeAll=If,n.afterAll=Lf;let r=cf([`concurrent`,`sequential`,`skip`,`only`,`todo`,`fails`],n);return t&&r.mergeContext(t),r}function Xf(e,t){return Yf(e,t)}function Zf(e){return typeof e==`string`?e:typeof e==`function`?e.name||`<anonymous>`:String(e)}function Qf(e,t,n){(e.includes(`%#`)||e.includes(`%$`))&&(e=e.replace(/%%/g,`__vitest_escaped_%__`).replace(/%#/g,`${n}`).replace(/%\$/g,`${n+1}`).replace(/__vitest_escaped_%__/g,`%%`));let r=e.split(`%`).length-1;e.includes(`%f`)&&(e.match(/%f/g)||[]).forEach((n,r)=>{if(ma(t[r])||Object.is(t[r],-0)){let t=0;e=e.replace(/%f/g,e=>(t++,t===r+1?`-%f`:e))}});let i=ra(t[0]);function a(e){return e.replace(/\$([$\w.]+)/g,(e,n)=>{let r=/^\d+$/.test(n);if(!i&&!r)return`$${n}`;let a=r?fa(t,n):void 0;return $i(i?fa(t[0],n,a):a,{truncate:void 0})})}let o=``,s=0;return $f(e,Yi,e=>{s<r?o+=Zi(e[0],t[s++]):o+=e[0]},e=>{o+=a(e)}),o}function $f(e,t,n,r){let i=0;for(let a of e.matchAll(t))i<a.index&&r(e.slice(i,a.index)),n(a),i=a.index+a[0].length;i<e.length&&r(e.slice(i))}function ep(e,t){let n=e.join(``).trim().replace(/ /g,``).split(`
`).map(e=>e.split(`|`))[0],r=[];for(let e=0;e<Math.floor(t.length/n.length);e++){let i={};for(let r=0;r<n.length;r++)i[n[r]]=t[e*n.length+r];r.push(i)}return r}const tp=Date.now,np={tasks:[],currentSuite:null};function rp(e){var t;(t=np.currentSuite)==null||t.tasks.push(e)}async function ip(e,t){let n=np.currentSuite;np.currentSuite=e,await t(),np.currentSuite=n}function ap(e,t,n=!1,r,i){if(t<=0||t===1/0)return e;let{setTimeout:a,clearTimeout:o}=Ud();return(function(...s){let c=tp(),l=Hf();return l._currentTaskStartTime=c,l._currentTaskTimeout=t,new Promise((u,d)=>{var f;let p=a(()=>{o(p),m()},t);(f=p.unref)==null||f.call(p);function m(){let e=up(n,t,r);i?.(s,e),d(e)}function h(e){if(l._currentTaskStartTime=void 0,l._currentTaskTimeout=void 0,o(p),tp()-c>=t){m();return}u(e)}function g(e){l._currentTaskStartTime=void 0,l._currentTaskTimeout=void 0,o(p),d(e)}try{let t=e(...s);typeof t==`object`&&t&&typeof t.then==`function`?t.then(h,g):h(t)}catch(e){g(e)}})})}const op=new WeakMap;function sp([e],t){e&&cp(e,t)}function cp(e,t){op.get(e)?.abort(t)}function lp(e,t){let n=function(){throw Error(`done() callback is deprecated, use promise instead`)},r=op.get(n);return r||(r=new AbortController,op.set(n,r)),n.signal=r.signal,n.task=e,n.skip=(t,n)=>{if(t!==!1)throw e.result??={state:`skip`},e.result.pending=!0,new ff(`test is skipped; abort execution`,e,typeof t==`string`?t:n)},n.annotate=((n,r,i)=>{if(e.result&&e.result.state!==`run`)throw Error(`Cannot annotate tests outside of the test run. The test "${e.name}" finished running with the "${e.result.state}" state already.`);let a={message:n,type:typeof r==`object`||r===void 0?`notice`:r},o=typeof r==`object`?r:i;return o&&(a.attachment=o,wp(a.attachment)),Cp(e,bp(e,{type:`internal:annotation`,annotation:a}).then(async({annotation:n})=>{if(!t.onTestAnnotate)throw Error(`Test runner doesn't support test annotations.`);await yp(t);let r=await t.onTestAnnotate(e,n);return e.annotations.push(r),r}))}),n.onTestFailed=(n,i)=>{e.onFailed||=[],e.onFailed.push(ap(n,i??t.config.hookTimeout,!0,Error(`STACK_TRACE_ERROR`),(e,t)=>r.abort(t)))},n.onTestFinished=(n,i)=>{e.onFinished||=[],e.onFinished.push(ap(n,i??t.config.hookTimeout,!0,Error(`STACK_TRACE_ERROR`),(e,t)=>r.abort(t)))},t.extendTaskContext?.call(t,n)||n}function up(e,t,n){let r=`${e?`Hook`:`Test`} timed out in ${t}ms.\nIf this is a long-running ${e?`hook`:`test`}, pass a timeout value as the last argument or configure it globally with "${e?`hookTimeout`:`testTimeout`}".`,i=Error(r);return n?.stack&&(i.stack=n.stack.replace(i.message,n.message)),i}const dp=new WeakMap;function fp(e){let t=dp.get(e);if(!t)throw Error(`Cannot find file context for ${e.name}`);return t}globalThis.performance?globalThis.performance.now.bind(globalThis.performance):Date.now,globalThis.performance?globalThis.performance.now.bind(globalThis.performance):Date.now,Date.now;const{clearTimeout:pp,setTimeout:mp}=Ud(),hp=new Map,gp=[],_p=[];function vp(e){if(hp.size){let t=Array.from(hp).map(([e,t])=>[e,t[0],t[1]]),n=e.onTaskUpdate?.call(e,t,gp);n&&(_p.push(n),n.then(()=>_p.splice(_p.indexOf(n),1),()=>{})),gp.length=0,hp.clear()}}async function yp(e){vp(e),await Promise.all(_p)}async function bp(e,t){let n=Hf();if(e.result&&e.result.state!==`run`)throw Error(`Cannot record a test artifact outside of the test run. The test "${e.name}" finished running with the "${e.result.state}" state already.`);let r=lf(e.file.filepath,Error(`STACK_TRACE`).stack);if(r&&(t.location={file:r.file,line:r.line,column:r.column},t.type===`internal:annotation`&&(t.annotation.location=t.location)),Array.isArray(t.attachments))for(let e of t.attachments)wp(e);if(t.type===`internal:annotation`)return t;if(!n.onTestArtifactRecord)throw Error(`Test runner doesn't support test artifacts.`);await yp(n);let i=await n.onTestArtifactRecord(e,t);return e.artifacts.push(i),i}const xp=[];for(let e=65;e<91;e++)xp.push(String.fromCharCode(e));for(let e=97;e<123;e++)xp.push(String.fromCharCode(e));for(let e=0;e<10;e++)xp.push(e.toString(10));xp.push(`+`,`/`);function Sp(e){let t=``,n=e.byteLength;for(let r=0;r<n;r+=3)if(n===r+1){let n=(e[r]&252)>>2,i=(e[r]&3)<<4;t+=xp[n],t+=xp[i],t+=`==`}else if(n===r+2){let n=(e[r]&252)>>2,i=(e[r]&3)<<4|(e[r+1]&240)>>4,a=(e[r+1]&15)<<2;t+=xp[n],t+=xp[i],t+=xp[a],t+=`=`}else{let n=(e[r]&252)>>2,i=(e[r]&3)<<4|(e[r+1]&240)>>4,a=(e[r+1]&15)<<2|(e[r+2]&192)>>6,o=e[r+2]&63;t+=xp[n],t+=xp[i],t+=xp[a],t+=xp[o]}return t}function Cp(e,t){return t=t.finally(()=>{if(!e.promises)return;let n=e.promises.indexOf(t);n!==-1&&e.promises.splice(n,1)}),e.promises||=[],e.promises.push(t),t}function wp(e){if(e.body==null&&!e.path)throw TypeError(`Test attachment requires "body" or "path" to be set. Both are missing.`);if(e.body&&e.path)throw TypeError(`Test attachment requires only one of "body" or "path" to be set. Both are specified.`);e.body instanceof Uint8Array&&(e.body=Sp(e.body))}function Tp(){let e=globalThis.__vitest_worker__;if(!e)throw Error(`Vitest failed to access its internal state.

One of the following is possible:
- "vitest" is imported directly without running "vitest" command
- "vitest" is imported inside "globalSetup" (to fix this, use "setupFiles" instead, because "globalSetup" runs in a different context)
- "vitest" is imported inside Vite / Vitest config file
- Otherwise, it might be a Vitest bug. Please report it to https://github.com/vitest-dev/vitest/issues
`);return e}function Ep(){return typeof process<`u`&&!!process.send}function Dp(e,t=!1){let n=[/\/vitest\/dist\//,/vitest-virtual-\w+\/dist/,/@vitest\/dist/,...t?[]:[/^mock:/]];e.idToModuleMap.forEach((e,t)=>{n.some(e=>e.test(t))||(e.promise=void 0,e.exports=void 0,e.evaluated=!1,e.importers.clear())})}function Op(){let{setTimeout:e}=Ud();return new Promise(t=>e(t,0))}async function kp(){await Op();let e=Tp(),t=[],n=e.resolvingModules.size;for(let[n,r]of e.evaluatedModules.idToModuleMap)r.promise&&!r.evaluated&&t.push(r.promise);!t.length&&!n||(await Promise.allSettled(t),await kp())}var Ap=44,jp=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,Mp=new Uint8Array(64),Np=new Uint8Array(128);for(let e=0;e<jp.length;e++){let t=jp.charCodeAt(e);Mp[e]=t,Np[t]=e}function Pp(e,t){let n=0,r=0,i=0;do i=Np[e.next()],n|=(i&31)<<r,r+=5;while(i&32);let a=n&1;return n>>>=1,a&&(n=-2147483648|-n),t+n}function Fp(e,t){return e.pos>=t?!1:e.peek()!==Ap}var Ip=class{constructor(e){this.pos=0,this.buffer=e}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(e){let{buffer:t,pos:n}=this,r=t.indexOf(e,n);return r===-1?t.length:r}};function Lp(e){let{length:t}=e,n=new Ip(e),r=[],i=0,a=0,o=0,s=0,c=0;do{let e=n.indexOf(`;`),t=[],l=!0,u=0;for(i=0;n.pos<e;){let r;i=Pp(n,i),i<u&&(l=!1),u=i,Fp(n,e)?(a=Pp(n,a),o=Pp(n,o),s=Pp(n,s),Fp(n,e)?(c=Pp(n,c),r=[i,a,o,s,c]):r=[i,a,o,s]):r=[i],t.push(r),n.pos++}l||Rp(t),r.push(t),n.pos=e+1}while(n.pos<=t);return r}function Rp(e){e.sort(zp)}function zp(e,t){return e[0]-t[0]}var Bp=0,Vp=1,Hp=2,Up=3,Wp=4,Gp=!1;function Kp(e,t,n,r){for(;n<=r;){let i=n+(r-n>>1),a=e[i][Bp]-t;if(a===0)return Gp=!0,i;a<0?n=i+1:r=i-1}return Gp=!1,n-1}function qp(e,t,n){for(let r=n+1;r<e.length&&e[r][Bp]===t;n=r++);return n}function Jp(e,t,n){for(let r=n-1;r>=0&&e[r][Bp]===t;n=r--);return n}function Yp(e,t,n,r){let{lastKey:i,lastNeedle:a,lastIndex:o}=n,s=0,c=e.length-1;if(r===i){if(t===a)return Gp=o!==-1&&e[o][Bp]===t,o;t>=a?s=o===-1?0:o:c=o}return n.lastKey=r,n.lastNeedle=t,n.lastIndex=Kp(e,t,s,c)}var Xp="`line` must be greater than 0 (lines start at line 1)",Zp="`column` must be greater than or equal to 0 (columns start at column 0)",Qp=-1,$p=1;function em(e){return e}function tm(e){var t;return(t=em(e))._decoded||(t._decoded=Lp(em(e)._encoded))}function nm(e,t){let{line:n,column:r,bias:i}=t;if(n--,n<0)throw Error(Xp);if(r<0)throw Error(Zp);let a=tm(e);if(n>=a.length)return rm(null,null,null,null);let o=a[n],s=im(o,em(e)._decodedMemo,n,r,i||$p);if(s===-1)return rm(null,null,null,null);let c=o[s];if(c.length===1)return rm(null,null,null,null);let{names:l,resolvedSources:u}=e;return rm(u[c[Vp]],c[Hp]+1,c[Up],c.length===5?l[c[Wp]]:null)}function rm(e,t,n,r){return{source:e,line:t,column:n,name:r}}function im(e,t,n,r,i){let a=Yp(e,r,t,n);return Gp?a=(i===Qp?qp:Jp)(e,r,a):i===Qp&&a++,a===-1||a===e.length?-1:a}function am(e){return e!=null}function om(e){return e===null||typeof e!=`function`&&typeof e!=`object`}function sm(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}function cm(e){let t=-1,n=null,r=0,i=0,a=null;for(;t<=e.length;){a=e[t],t++;let o=e[t];if((o===`"`||o===`'`||o==="`")&&a!==`\\`&&(n===o?n=null:n||=o),n||(o===`(`&&r++,o===`)`&&i++),r&&i&&r===i)return t}return null}const lm=/^\s*at .*(?:\S:\d+|\(native\))/m,um=/^(?:eval@)?(?:\[native code\])?$/,dm=[`node:internal`,/\/packages\/\w+\/dist\//,/\/@vitest\/\w+\/dist\//,`/vitest/dist/`,`/vitest/src/`,`/node_modules/chai/`,`/node_modules/tinyspy/`,`/vite/dist/node/module-runner`,`/rolldown-vite/dist/node/module-runner`,`/deps/chunk-`,`/deps/@vitest`,`/deps/loupe`,`/deps/chai`,`/browser-playwright/dist/locators.js`,`/browser-webdriverio/dist/locators.js`,`/browser-preview/dist/locators.js`,/node:\w+/,/__vitest_test__/,/__vitest_browser__/,/\/deps\/vitest_/];function fm(e){if(!e.includes(`:`))return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/^\(|\)$/g,``));if(!t)return[e];let n=t[1];if(n.startsWith(`async `)&&(n=n.slice(6)),n.startsWith(`http:`)||n.startsWith(`https:`)){let e=new URL(n);e.searchParams.delete(`import`),e.searchParams.delete(`browserv`),n=e.pathname+e.hash+e.search}if(n.startsWith(`/@fs/`)){let e=/^\/@fs\/[a-zA-Z]:\//.test(n);n=n.slice(e?5:4)}return[n,t[2]||void 0,t[3]||void 0]}function pm(e){let t=e.trim();if(um.test(t)||(t.includes(` > eval`)&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,`:$1`)),!t.includes(`@`)))return null;let n=-1,r=``,i;for(let e=0;e<t.length;e++)if(t[e]===`@`){let a=t.slice(e+1);if(a.includes(`:`)&&a.length>=3){n=e,r=a,i=e>0?t.slice(0,e):void 0;break}}if(n===-1||!r.includes(`:`)||r.length<3)return null;let[a,o,s]=fm(r);return!a||!o||!s?null:{file:a,method:i||``,line:Number.parseInt(o),column:Number.parseInt(s)}}function mm(e){let t=e.trim();if(!lm.test(t))return null;t.includes(`(eval `)&&(t=t.replace(/eval code/g,`eval`).replace(/(\(eval at [^()]*)|(,.*$)/g,``));let n=t.replace(/^\s+/,``).replace(/\(eval code/g,`(`).replace(/^.*?\s+/,``),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],``):n;let[i,a,o]=fm(r?r[1]:n),s=r&&n||``,c=i&&[`eval`,`<anonymous>`].includes(i)?void 0:i;return!c||!a||!o?null:(s.startsWith(`async `)&&(s=s.slice(6)),c.startsWith(`file://`)&&(c=c.slice(7)),c=c.startsWith(`node:`)||c.startsWith(`internal:`)?c:_e(c),s&&=s.replace(/__vite_ssr_import_\d+__\./g,``).replace(/(Object\.)?__vite_ssr_export_default__\s?/g,``),{method:s,file:c,line:Number.parseInt(a),column:Number.parseInt(o)})}function hm(e,t={}){let{ignoreStackEntries:n=dm}=t;return(lm.test(e)?vm(e):_m(e)).map(e=>{t.getUrlId&&(e.file=t.getUrlId(e.file));let r=t.getSourceMap?.call(t,e.file);if(!r||typeof r!=`object`||!r.version)return gm(n,e.file)?null:e;let i=Sm(new bm(r,e.file),e);if(!i)return e;let{line:a,column:o,source:s,name:c}=i,l=s||e.file;return l.match(/\/\w:\//)&&(l=l.slice(1)),gm(n,l)?null:a!=null&&o!=null?{line:a,column:o,file:l,method:c||e.method}:e}).filter(e=>e!=null)}function gm(e,t){return e.some(e=>t.match(e))}function _m(e){return e.split(`
`).map(e=>pm(e)).filter(am)}function vm(e){return e.split(`
`).map(e=>mm(e)).filter(am)}function ym(e,t={}){if(!e||om(e))return[];if(`stacks`in e&&e.stacks)return e.stacks;let n=e.stack||``,r=typeof n==`string`?hm(n,t):[];if(!r.length){let n=e;n.fileName!=null&&n.lineNumber!=null&&n.columnNumber!=null&&(r=hm(`${n.fileName}:${n.lineNumber}:${n.columnNumber}`,t)),n.sourceURL!=null&&n.line!=null&&n._column!=null&&(r=hm(`${n.sourceURL}:${n.line}:${n.column}`,t))}return t.frameFilter&&(r=r.filter(n=>t.frameFilter(e,n)!==!1)),e.stacks=r,r}var bm=class{_encoded;_decoded;_decodedMemo;url;version;names=[];resolvedSources;constructor(e,t){this.map=e;let{mappings:n,names:r,sources:i}=e;this.version=e.version,this.names=r||[],this._encoded=n||``,this._decodedMemo=xm(),this.url=t,this.resolvedSources=(i||[]).map(e=>_e(e||``,t))}};function xm(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Sm(e,t){let n=nm(e,t);return n.column==null?null:n}const Cm=/\r?\n/;function wm(e,t,n){let r=e.split(Cm),i=/\r\n/.test(e)?2:1,a=0;if(t>r.length)return e.length;for(let e=0;e<t-1;e++)a+=r[e].length+i;return a+n}function Tm(e,t){if(t>e.length)throw Error(`offset is longer than source length! offset ${t} > length ${e.length}`);let n=e.split(Cm),r=/\r\n/.test(e)?2:1,i=0,a=0;for(;a<n.length;a++){let e=n[a].length+r;if(i+e>=t)break;i+=e}return a+1}async function Em(e,t){let n=(await import(`./magic-string.es-DPZbE5H2.mjs`)).default,r=new Set(t.map(e=>e.file));await Promise.all(Array.from(r).map(async r=>{let i=t.filter(e=>e.file===r),a=await e.readSnapshotFile(r),o=new n(a);for(let e of i)Nm(a,o,wm(a,e.line,e.column),e.snapshot);let s=o.toString();s!==a&&await e.saveSnapshotFile(r,s)}))}const Dm=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\s\S]*\*\/\s*|\/\/.*(?:[\n\r\u2028\u2029]\s*|[\t\v\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]))*\{/;function Om(e,t,n,r){let i=e.slice(n),a=Dm.exec(i);if(!a)return!1;i=i.slice(a.index);let o=cm(i);if(o===null)return!1;o+=n+a.index;let s=km(e,n+a.index+a[0].length),c=`, ${Am(r,e,n)}`;return s===o?t.appendLeft(o,c):t.overwrite(s,o,c),!0}function km(e,t){let n=1,r=0;for(;n!==r&&t<e.length;){let i=e[t++];i===`{`?n++:i===`}`&&r++}return t}function Am(e,t,n){let r=Tm(t,n),i=t.split(Cm)[r-1].match(/^\s*/)[0]||``,a=i.includes(`	`)?`${i}\t`:`${i}  `,o=e.trim().replace(/\\/g,`\\\\`).split(/\n/g);return o.length<=1?`\`${o.join(`
`).replace(/`/g,"\\`").replace(/\$\{/g,"\\${")}\``:`\`\n${o.map(e=>e?a+e:``).join(`
`).replace(/`/g,"\\`").replace(/\$\{/g,"\\${")}\n${i}\``}function jm(e,t){let n=t-21;if(e.slice(n,t)===`toMatchInlineSnapshot`)return{code:e.slice(n),index:n};let r=t-34;return e.slice(t-r,t)===`toThrowErrorMatchingInlineSnapshot`?{code:e.slice(t-r),index:t-r}:{code:e.slice(t),index:t}}const Mm=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\s\S]*\*\/\s*|\/\/.*(?:[\n\r\u2028\u2029]\s*|[\t\v\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]))*[\w$]*(['"`)])/;function Nm(e,t,n,r){let{code:i,index:a}=jm(e,n),o=Mm.exec(i),s=/toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot/.exec(i);if(!o||o.index!==s?.index)return Om(e,t,a,r);let c=o[1],l=a+o.index+o[0].length,u=Am(r,e,a);if(c===`)`)return t.appendRight(l-1,u),!0;let d=RegExp(`(?:^|[^\\\\])${c}`).exec(e.slice(l));if(!d)return!1;let f=l+d.index+d[0].length;return t.overwrite(l-1,f,u),!0}const Pm=/^([^\S\n]*)\S/m;function Fm(e){let t=e.match(Pm);if(!t||!t[1])return e;let n=t[1],r=e.split(/\n/g);if(r.length<=2||r[0].trim()!==``||r.at(-1)?.trim()!==``)return e;for(let t=1;t<r.length-1;t++)if(r[t]!==``){if(r[t].indexOf(n)!==0)return e;r[t]=r[t].substring(n.length)}return r[r.length-1]=``,e=r.join(`
`),e}async function Im(e,t){await Promise.all(t.map(async t=>{t.readonly||await e.saveSnapshotFile(t.file,t.snapshot)}))}function Lm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}var Rm={exports:{}},zm;function Bm(){if(zm)return Rm.exports;zm=1;
/*
* @version    1.4.0
* @date       2015-10-26
* @stability  3 - Stable
* @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
* @license    MIT License
*/
var e=function(e,t){var n,r,i=1,a=0,o=0,s=String.alphabet;function c(e,t,r){if(r){for(n=t;r=c(e,n),r<76&&r>65;)++n;return+e.slice(t-1,n)}return r=s&&s.indexOf(e.charAt(t)),r>-1?r+76:(r=e.charCodeAt(t)||0,r<45||r>127?r:r<46?65:r<48?r-1:r<58?r+18:r<65?r-11:r<91?r+11:r<97?r-37:r<123?r+5:r-63)}if((e+=``)!=(t+=``)){for(;i;)if(r=c(e,a++),i=c(t,o++),r<76&&i<76&&r>66&&i>66&&(r=c(e,a,a),i=c(t,o,a=n),o=n),r!=i)return r<i?-1:1}return 0};try{Rm.exports=e}catch{String.naturalCompare=e}return Rm.exports}var Vm=Lm(Bm());const Hm={serialize:(e,t,n,r,i,a)=>{let o=e.getMockName(),s=o===`vi.fn()`?``:` ${o}`,c=``;if(e.mock.calls.length!==0){let o=n+t.indent;c=` {${t.spacingOuter}${o}"calls": ${a(e.mock.calls,t,o,r,i)}${t.min?`, `:`,`}${t.spacingOuter}${o}"results": ${a(e.mock.results,t,o,r,i)}${t.min?``:`,`}${t.spacingOuter}${n}}`}return`[MockFunction${s}]${c}`},test:e=>e&&!!e._isMockFunction},{DOMCollection:Um,DOMElement:Wm,Immutable:Gm,ReactElement:Km,ReactTestComponent:qm,AsymmetricMatcher:Jm}=qr;let Ym=[qm,Km,Wm,Um,Gm,Jm,Hm];function Xm(e){Ym=[e].concat(Ym)}function Zm(){return Ym}function Qm(e,t){return`${e} ${t}`}function $m(e){if(!/ \d+$/.test(e))throw Error(`Snapshot keys must end with a number.`);return e.replace(/ \d+$/,``)}function eh(e,t){let n=t.updateSnapshot,r=Object.create(null),i=``,a=!1;if(e!=null)try{i=e,Function(`exports`,i)(r)}catch{}return(n===`all`||n===`new`)&&i&&(a=!0),{data:r,dirty:a}}function th(e){return e.includes(`
`)?`\n${e}\n`:e}function nh(e){return e.length>2&&e[0]===`
`&&e.endsWith(`
`)?e.slice(1,-1):e}function rh(e,t=2,n={}){return oh(Kr(e,{escapeRegex:!0,indent:t,plugins:Zm(),printFunctionName:!1,...n}))}function ih(e){return e.replace(/`|\\|\$\{/g,`\\$&`)}function ah(e){return`\`${ih(e)}\``}function oh(e){return e.replace(/\r\n|\r/g,`
`)}async function sh(e,t,n){let r=Object.keys(t).sort(Vm).map(e=>`exports[${ah(e)}] = ${ah(oh(t[e]))};`),i=`${e.getHeader()}\n\n${r.join(`

`)}\n`,a=await e.readSnapshotFile(n);a!=null&&a===i||await e.saveSnapshotFile(n,i)}function ch(e=[],t=[]){let n=Array.from(e);return t.forEach((t,r)=>{let i=n[r];Array.isArray(e[r])?n[r]=ch(e[r],t):sm(i)?n[r]=lh(e[r],t):n[r]=t}),n}function lh(e,t){if(sm(e)&&sm(t)){let n={...e};return Object.keys(t).forEach(r=>{sm(t[r])&&!t[r].$$typeof?r in e?n[r]=lh(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Array.isArray(t[r])?n[r]=ch(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}else if(Array.isArray(e)&&Array.isArray(t))return ch(e,t);return e}var uh=class extends Map{constructor(e,t){super(t),this.defaultFn=e}get(e){return this.has(e)||this.set(e,this.defaultFn(e)),super.get(e)}},dh=class extends uh{constructor(){super(()=>0)}_total;valueOf(){return this._total=this.total()}increment(e){this._total!==void 0&&this._total++,this.set(e,this.get(e)+1)}total(){if(this._total!==void 0)return this._total;let e=0;for(let t of this.values())e+=t;return e}};function fh(e,t){return e.file===t.file&&e.column===t.column&&e.line===t.line}var ph=class e{_counters=new dh;_dirty;_updateSnapshot;_snapshotData;_initialData;_inlineSnapshots;_inlineSnapshotStacks;_testIdToKeys=new uh(()=>[]);_rawSnapshots;_uncheckedKeys;_snapshotFormat;_environment;_fileExists;expand;_added=new dh;_matched=new dh;_unmatched=new dh;_updated=new dh;get added(){return this._added}set added(e){this._added._total=e}get matched(){return this._matched}set matched(e){this._matched._total=e}get unmatched(){return this._unmatched}set unmatched(e){this._unmatched._total=e}get updated(){return this._updated}set updated(e){this._updated._total=e}constructor(e,t,n,r){this.testFilePath=e,this.snapshotPath=t;let{data:i,dirty:a}=eh(n,r);this._fileExists=n!=null,this._initialData={...i},this._snapshotData={...i},this._dirty=a,this._inlineSnapshots=[],this._inlineSnapshotStacks=[],this._rawSnapshots=[],this._uncheckedKeys=new Set(Object.keys(this._snapshotData)),this.expand=r.expand||!1,this._updateSnapshot=r.updateSnapshot,this._snapshotFormat={printBasicPrototype:!1,escapeString:!1,...r.snapshotFormat},this._environment=r.snapshotEnvironment}static async create(t,n){let r=await n.snapshotEnvironment.resolvePath(t);return new e(t,r,await n.snapshotEnvironment.readSnapshotFile(r),n)}get environment(){return this._environment}markSnapshotsAsCheckedForTest(e){this._uncheckedKeys.forEach(t=>{/ \d+$| > /.test(t.slice(e.length))&&this._uncheckedKeys.delete(t)})}clearTest(e){this._inlineSnapshots=this._inlineSnapshots.filter(t=>t.testId!==e),this._inlineSnapshotStacks=this._inlineSnapshotStacks.filter(t=>t.testId!==e);for(let t of this._testIdToKeys.get(e)){let e=$m(t),n=this._counters.get(e);n>0&&((t in this._snapshotData||t in this._initialData)&&(this._snapshotData[t]=this._initialData[t]),this._counters.set(e,n-1))}this._testIdToKeys.delete(e),this.added.delete(e),this.updated.delete(e),this.matched.delete(e),this.unmatched.delete(e)}_inferInlineSnapshotStack(e){let t=e.findIndex(e=>e.method.match(/__VITEST_(RESOLVES|REJECTS)__/));if(t!==-1)return e[t+3];let n=e.findIndex(e=>e.method.includes(`__INLINE_SNAPSHOT__`));return n===-1?null:e[n+2]}_addSnapshot(e,t,n){this._dirty=!0,n.stack?this._inlineSnapshots.push({snapshot:t,testId:n.testId,...n.stack}):n.rawSnapshot?this._rawSnapshots.push({...n.rawSnapshot,snapshot:t}):this._snapshotData[e]=t}async save(){let e=Object.keys(this._snapshotData).length,t=this._inlineSnapshots.length,n=this._rawSnapshots.length,r=!e&&!t&&!n,i={deleted:!1,saved:!1};return(this._dirty||this._uncheckedKeys.size)&&!r?(e&&(await sh(this._environment,this._snapshotData,this.snapshotPath),this._fileExists=!0),t&&await Em(this._environment,this._inlineSnapshots),n&&await Im(this._environment,this._rawSnapshots),i.saved=!0):!e&&this._fileExists&&(this._updateSnapshot===`all`&&(await this._environment.removeSnapshotFile(this.snapshotPath),this._fileExists=!1),i.deleted=!0),i}getUncheckedCount(){return this._uncheckedKeys.size||0}getUncheckedKeys(){return Array.from(this._uncheckedKeys)}removeUncheckedKeys(){this._updateSnapshot===`all`&&this._uncheckedKeys.size&&(this._dirty=!0,this._uncheckedKeys.forEach(e=>delete this._snapshotData[e]),this._uncheckedKeys.clear())}match({testId:e,testName:t,received:n,key:r,inlineSnapshot:i,isInline:a,error:o,rawSnapshot:s}){this._counters.increment(t);let c=this._counters.get(t);r||=Qm(t,c),this._testIdToKeys.get(e).push(r),a&&this._snapshotData[r]!==void 0||this._uncheckedKeys.delete(r);let l=s&&typeof n==`string`?n:rh(n,void 0,this._snapshotFormat);s||(l=th(l)),s&&s.content&&s.content.match(/\r\n/)&&!l.match(/\r\n/)&&(s.content=oh(s.content));let u=a?i:s?s.content:this._snapshotData[r],d=s?u:u?.trim(),f=d===(s?l:l.trim()),p=u!==void 0,m=a||this._fileExists||s&&s.content!=null;f&&!a&&!s&&(this._snapshotData[r]=l);let h;if(a){var g;let t=ym(o||Error(`snapshot`),{ignoreStackEntries:[]}),n=this._inferInlineSnapshotStack(t);if(!n)throw Error(`@vitest/snapshot: Couldn't infer stack frame for inline snapshot.\n${JSON.stringify(t)}`);h=(g=this.environment).processStackTrace?.call(g,n)||n,h.column--;let r=this._inlineSnapshotStacks.filter(e=>fh(e,h));if(r.length>0){this._inlineSnapshots=this._inlineSnapshots.filter(e=>!fh(e,h));let e=r.find(e=>e.snapshot!==l);if(e)throw Object.assign(Error(`toMatchInlineSnapshot with different snapshots cannot be called at the same location`),{actual:l,expected:e.snapshot})}this._inlineSnapshotStacks.push({...h,testId:e,snapshot:l})}return p&&this._updateSnapshot===`all`||(!p||!m)&&(this._updateSnapshot===`new`||this._updateSnapshot===`all`)?(this._updateSnapshot===`all`?f?this.matched.increment(e):(p?this.updated.increment(e):this.added.increment(e),this._addSnapshot(r,l,{stack:h,testId:e,rawSnapshot:s})):(this._addSnapshot(r,l,{stack:h,testId:e,rawSnapshot:s}),this.added.increment(e)),{actual:``,count:c,expected:``,key:r,pass:!0}):f?(this.matched.increment(e),{actual:``,count:c,expected:``,key:r,pass:!0}):(this.unmatched.increment(e),{actual:s?l:nh(l),count:c,expected:d===void 0?void 0:s?d:nh(d),key:r,pass:!1})}async pack(){let e={filepath:this.testFilePath,added:0,fileDeleted:!1,matched:0,unchecked:0,uncheckedKeys:[],unmatched:0,updated:0},t=this.getUncheckedCount(),n=this.getUncheckedKeys();t&&this.removeUncheckedKeys();let r=await this.save();return e.fileDeleted=r.deleted,e.added=this.added.total(),e.matched=this.matched.total(),e.unmatched=this.unmatched.total(),e.updated=this.updated.total(),e.unchecked=r.deleted?0:t,e.uncheckedKeys=Array.from(n),e}};function mh(e,t,n,r){let i=Error(e);return Object.defineProperty(i,`actual`,{value:n,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(i,`expected`,{value:r,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(i,`diffOptions`,{value:{expand:t}}),i}var hh=class{snapshotStateMap=new Map;constructor(e={}){this.options=e}async setup(e,t){this.snapshotStateMap.has(e)||this.snapshotStateMap.set(e,await ph.create(e,t))}async finish(e){let t=await this.getSnapshotState(e).pack();return this.snapshotStateMap.delete(e),t}skipTest(e,t){this.getSnapshotState(e).markSnapshotsAsCheckedForTest(t)}clearTest(e,t){this.getSnapshotState(e).clearTest(t)}getSnapshotState(e){let t=this.snapshotStateMap.get(e);if(!t)throw Error(`The snapshot state for '${e}' is not found. Did you call 'SnapshotClient.setup()'?`);return t}assert(e){let{filepath:t,name:n,testId:r=n,message:i,isInline:a=!1,properties:o,inlineSnapshot:s,error:c,errorMessage:l,rawSnapshot:u}=e,{received:d}=e;if(!t)throw Error(`Snapshot cannot be used outside of test`);let f=this.getSnapshotState(t);if(typeof o==`object`){if(typeof d!=`object`||!d)throw Error(`Received value must be an object when the matcher has properties`);try{var p;if((p=this.options).isEqual?.call(p,d,o)??!1)d=lh(d,o);else throw mh(`Snapshot properties mismatched`,f.expand,d,o)}catch(e){throw e.message=l||`Snapshot mismatched`,e}}let m=[n,...i?[i]:[]].join(` > `),{actual:h,expected:g,key:_,pass:v}=f.match({testId:r,testName:m,received:d,isInline:a,error:c,inlineSnapshot:s,rawSnapshot:u});if(!v)throw mh(`Snapshot \`${_||`unknown`}\` mismatched`,f.expand,u?h:h?.trim(),u?g:g?.trim())}async assertRaw(e){if(!e.rawSnapshot)throw Error(`Raw snapshot is required`);let{filepath:t,rawSnapshot:n}=e;if(n.content==null){if(!t)throw Error(`Snapshot cannot be used outside of test`);let r=this.getSnapshotState(t);e.filepath||=t,n.file=await r.environment.resolveRawPath(t,n.file),n.content=await r.environment.readSnapshotFile(n.file)??void 0}return this.assert(e)}clear(){this.snapshotStateMap.clear()}},gh=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{};const _h=Date;let vh=null;var yh=class e extends _h{constructor(t,n,r,i,a,o,s){super();let c;switch(arguments.length){case 0:c=vh===null?new _h:new _h(vh.valueOf());break;case 1:c=new _h(t);break;default:r=r===void 0?1:r,i||=0,a||=0,o||=0,s||=0,c=new _h(t,n,r,i,a,o,s);break}return Object.setPrototypeOf(c,e.prototype),c}};yh.UTC=_h.UTC,yh.now=function(){return new yh().valueOf()},yh.parse=function(e){return _h.parse(e)},yh.toString=function(){return _h.toString()};function bh(e){let t=new _h(e.valueOf());if(Number.isNaN(t.getTime()))throw TypeError(`mockdate: The time set is an invalid date: ${e}`);globalThis.Date=yh,vh=t.valueOf()}function xh(){globalThis.Date=_h}const Sh=[`matchSnapshot`,`toMatchSnapshot`,`toMatchInlineSnapshot`,`toThrowErrorMatchingSnapshot`,`toThrowErrorMatchingInlineSnapshot`,`throws`,`Throw`,`throw`,`toThrow`,`toThrowError`];function Ch(e,t){throw e.cause??=Error(`Matcher did not succeed in time.`),Th(e,t)}function wh(e){return function(t,n={}){let r=Tp().config.expect?.poll??{},{interval:i=r.interval??50,timeout:a=r.timeout??1e3,message:o}=n,s=e(null,o).withContext({poll:!0});t=t.bind(s);let c=U.flag(s,`vitest-test`);if(!c)throw Error(`expect.poll() must be called inside a test`);let l=new Proxy(s,{get(e,n,r){let o=Reflect.get(e,n,r);if(typeof o!=`function`)return o instanceof Y?l:o;if(n===`assert`)return o;if(typeof n==`string`&&Sh.includes(n))throw SyntaxError(`expect.poll() is not supported in combination with .${n}(). Use vi.waitFor() if your assertion condition is unstable.`);return function(...e){let r=Error(`STACK_TRACE_ERROR`),l=async()=>{let{setTimeout:c,clearTimeout:l}=Ud(),u=`fn`,d=!1,f=c(()=>{d=!0},a);U.flag(s,`_name`,n);try{for(;;){let n=d;n&&U.flag(s,`_isLastPollAttempt`,!0);try{u=`fn`;let n=await t();return U.flag(s,`object`,n),u=`assertion`,await o.call(s,...e)}catch(e){(n||u===`assertion`&&U.flag(s,`_poll.assert_once`))&&Ch(e,r),await Wd(i,c)}}}finally{l(f)}},u=!1;c.onFinished??=[],c.onFinished.push(()=>{if(!u){let e=U.flag(s,`negate`)?`not.`:``,t=`expect.${U.flag(s,`_poll.element`)?`element(locator)`:`poll(assertion)`}.${e}${String(n)}()`;throw Th(Error(`${t} was not awaited. This assertion is asynchronous and must be awaited; otherwise, it is not executed to avoid unhandled rejections:\n\nawait ${t}\n`),r)}});let d;return{then(e,t){return u=!0,(d||=l()).then(e,t)},catch(e){return(d||=l()).catch(e)},finally(e){return(d||=l()).finally(e)},[Symbol.toStringTag]:`Promise`}}}});return l}}function Th(e,t){return t.stack!==void 0&&(e.stack=t.stack.replace(t.message,e.message)),e}function Eh(e,t,n){let r=e.flag(t,`negate`)?`not.`:``,i=`${e.flag(t,`_name`)}(expected)`,a=e.flag(t,`promise`);return`expect(actual)${a?`.${a}`:``}.${r}${i}`}function Dh(e,t,n,r){let i=e;if(i&&t instanceof Promise){t=t.finally(()=>{if(!i.promises)return;let e=i.promises.indexOf(t);e!==-1&&i.promises.splice(e,1)}),i.promises||=[],i.promises.push(t);let e=!1;return i.onFinished??=[],i.onFinished.push(()=>{if(!e){let e=(globalThis.__vitest_worker__?.onFilterStackTrace||(e=>e||``))(r.stack);console.warn([`Promise returned by \`${n}\` was not awaited. `,`Vitest currently auto-awaits hanging assertions at the end of the test, but this will cause the test to fail in Vitest 3. `,`Please remember to await the assertion.
`,e].join(``))}}),{then(n,r){return e=!0,t.then(n,r)},catch(e){return t.catch(e)},finally(e){return t.finally(e)},[Symbol.toStringTag]:`Promise`}}return t}let Oh;function kh(){return Oh||=new hh({isEqual:(e,t)=>$(e,t,[od,ld])}),Oh}function Ah(e,t){if(typeof e!=`function`){if(!t)throw Error(`expected must be a function, received ${typeof e}`);return e}try{e()}catch(e){return e}throw Error(`snapshot function didn't throw`)}function jh(e){return{filepath:e.file.filepath,name:uf(e).slice(1).join(` > `),testId:e.id}}bu(Vd),bu(Pd),bu((e,t)=>{function n(e,n){let r=t.flag(n,`vitest-test`);if(!r)throw Error(`'${e}' cannot be used without test context`);return r}for(let r of[`matchSnapshot`,`toMatchSnapshot`])t.addMethod(e.Assertion.prototype,r,function(e,i){if(t.flag(this,`_name`,r),t.flag(this,`negate`))throw Error(`${r} cannot be used with "not"`);let a=t.flag(this,`object`),o=n(r,this);typeof e==`string`&&i===void 0&&(i=e,e=void 0);let s=t.flag(this,`message`);kh().assert({received:a,message:i,isInline:!1,properties:e,errorMessage:s,...jh(o)})});t.addMethod(e.Assertion.prototype,`toMatchFileSnapshot`,function(e,r){if(t.flag(this,`_name`,`toMatchFileSnapshot`),t.flag(this,`negate`))throw Error(`toMatchFileSnapshot cannot be used with "not"`);let i=Error(`resolves`),a=t.flag(this,`object`),o=n(`toMatchFileSnapshot`,this),s=t.flag(this,`message`);return Dh(o,kh().assertRaw({received:a,message:r,isInline:!1,rawSnapshot:{file:e},errorMessage:s,...jh(o)}),Eh(t,this),i)}),t.addMethod(e.Assertion.prototype,`toMatchInlineSnapshot`,function(e,r,i){if(t.flag(this,`_name`,`toMatchInlineSnapshot`),t.flag(this,`negate`))throw Error(`toMatchInlineSnapshot cannot be used with "not"`);let a=n(`toMatchInlineSnapshot`,this);if(a.each||a.suite?.each)throw Error(`InlineSnapshot cannot be used inside of test.each or describe.each`);let o=t.flag(this,`object`),s=t.flag(this,`error`);typeof e==`string`&&(i=r,r=e,e=void 0),r&&=Fm(r);let c=t.flag(this,`message`);kh().assert({received:o,message:i,isInline:!0,properties:e,inlineSnapshot:r,error:s,errorMessage:c,...jh(a)})}),t.addMethod(e.Assertion.prototype,`toThrowErrorMatchingSnapshot`,function(e){if(t.flag(this,`_name`,`toThrowErrorMatchingSnapshot`),t.flag(this,`negate`))throw Error(`toThrowErrorMatchingSnapshot cannot be used with "not"`);let r=t.flag(this,`object`),i=n(`toThrowErrorMatchingSnapshot`,this),a=t.flag(this,`promise`),o=t.flag(this,`message`);kh().assert({received:Ah(r,a),message:e,errorMessage:o,...jh(i)})}),t.addMethod(e.Assertion.prototype,`toThrowErrorMatchingInlineSnapshot`,function(e,r){if(t.flag(this,`negate`))throw Error(`toThrowErrorMatchingInlineSnapshot cannot be used with "not"`);let i=n(`toThrowErrorMatchingInlineSnapshot`,this);if(i.each||i.suite?.each)throw Error(`InlineSnapshot cannot be used inside of test.each or describe.each`);let a=t.flag(this,`object`),o=t.flag(this,`error`),s=t.flag(this,`promise`),c=t.flag(this,`message`);e&&=Fm(e),kh().assert({received:Ah(a,s),message:r,inlineSnapshot:e,isInline:!0,error:o,errorMessage:c,...jh(i)})}),t.addMethod(e.expect,`addSnapshotSerializer`,Xm)}),bu(kd);function Mh(e){let t=((n,r)=>{let{assertionCalls:i}=vd(t);yd({assertionCalls:i+1},t);let a=mu(n,r),o=e||void 0;return o?a.withTest(o):a});Object.assign(t,mu),Object.assign(t,globalThis[wu]),t.getState=()=>vd(t),t.setState=e=>yd(e,t);let n=vd(globalThis[Cu])||{};yd({...n,assertionCalls:0,isExpectingAssertions:!1,isExpectingAssertionsError:null,expectedAssertionsNumber:null,expectedAssertionsNumberErrorGen:null,get testPath(){return Tp().filepath},currentTestName:e?e.fullTestName??``:n.currentTestName},t),t.assert=Q,t.extend=e=>mu.extend(t,e),t.addEqualityTesters=e=>Lu(e),t.soft=(...e)=>t(...e).withContext({soft:!0}),t.poll=wh(t),t.unreachable=e=>{Q.fail(`expected${e?` "${e}" `:` `}not to be reached`)};function r(e){let n=()=>Error(`expected number of assertions to be ${e}, but got ${t.getState().assertionCalls}`);Error.captureStackTrace&&Error.captureStackTrace(n(),r),t.setState({expectedAssertionsNumber:e,expectedAssertionsNumberErrorGen:n})}function i(){let e=Error(`expected any number of assertion, but got none`);Error.captureStackTrace&&Error.captureStackTrace(e,i),t.setState({isExpectingAssertions:!0,isExpectingAssertionsError:e})}return U.addMethod(t,`assertions`,r),U.addMethod(t,`hasAssertions`,i),t.extend(Tu),t}const Nh=Mh();Object.defineProperty(globalThis,Cu,{value:Nh,writable:!0,configurable:!0});var Ph={},Fh,Ih;function Lh(){return Ih?Fh:(Ih=1,Fh=gh===void 0?typeof window<`u`?window:self:gh,Fh)}var Rh,zh;function Bh(){if(zh)return Rh;zh=1;let e;try{({}).__proto__,e=!1}catch{e=!0}return Rh=e,Rh}var Vh,Hh;function Uh(){if(Hh)return Vh;Hh=1;var e=Function.call,t=Bh(),n=[`size`,`caller`,`callee`,`arguments`];return t&&n.push(`__proto__`),Vh=function(t){return Object.getOwnPropertyNames(t).reduce(function(r,i){return n.includes(i)||typeof t[i]!=`function`||(r[i]=e.bind(t[i])),r},Object.create(null))},Vh}var Wh,Gh;function Kh(){return Gh?Wh:(Gh=1,Wh=Uh()(Array.prototype),Wh)}var qh,Jh;function Yh(){if(Jh)return qh;Jh=1;var e=Kh().every;function t(e,t){return e[t.id]===void 0&&(e[t.id]=0),e[t.id]<t.callCount}function n(e,n,r,i){var a=!0;return r!==i.length-1&&(a=n.calledBefore(i[r+1])),t(e,n)&&a?(e[n.id]+=1,!0):!1}function r(t){return e(arguments.length>1?arguments:t,n.bind(null,{}))}return qh=r,qh}var Xh,Zh;function Qh(){if(Zh)return Xh;Zh=1;function e(e){return e.constructor&&e.constructor.name||null}return Xh=e,Xh}var $h={},eg;function tg(){return eg?$h:(eg=1,(function(e){e.wrap=function(t,n){var r=function(){return e.printWarning(n),t.apply(this,arguments)};return t.prototype&&(r.prototype=t.prototype),r},e.defaultMsg=function(e,t){return`${e}.${t} is deprecated and will be removed from the public API in a future version of ${e}.`},e.printWarning=function(e){typeof process==`object`&&process.emitWarning?process.emitWarning(e):console.info?console.info(e):console.log(e)}})($h),$h)}var ng,rg;function ig(){return rg?ng:(rg=1,ng=function(e,t){var n=!0;try{e.forEach(function(){if(!t.apply(this,arguments))throw Error()})}catch{n=!1}return n},ng)}var ag,og;function sg(){return og?ag:(og=1,ag=function(e){if(!e)return``;try{return e.displayName||e.name||(String(e).match(/function ([^\s(]+)/)||[])[1]}catch{return``}},ag)}var cg,lg;function ug(){if(lg)return cg;lg=1;var e=Kh().sort,t=Kh().slice;function n(e,t){var n=e.getCall(0),r=t.getCall(0);return(n&&n.callId||-1)<(r&&r.callId||-1)?-1:1}function r(r){return e(t(r),n)}return cg=r,cg}var dg,fg;function pg(){return fg?dg:(fg=1,dg=Uh()(Function.prototype),dg)}var mg,hg;function gg(){return hg?mg:(hg=1,mg=Uh()(Map.prototype),mg)}var _g,vg;function yg(){return vg?_g:(vg=1,_g=Uh()(Object.prototype),_g)}var bg,xg;function Sg(){return xg?bg:(xg=1,bg=Uh()(Set.prototype),bg)}var Cg,wg;function Tg(){return wg?Cg:(wg=1,Cg=Uh()(String.prototype),Cg)}var Eg,Dg;function Og(){return Dg?Eg:(Dg=1,Eg={array:Kh(),function:pg(),map:gg(),object:yg(),set:Sg(),string:Tg()},Eg)}var kg={exports:{}},Ag=kg.exports,jg;function Mg(){return jg?kg.exports:(jg=1,(function(e,t){(function(t,n){e.exports=n()})(Ag,(function(){var e=typeof Promise==`function`,t=typeof self==`object`?self:gh,n=typeof Symbol<`u`,r=typeof Map<`u`,i=typeof Set<`u`,a=typeof WeakMap<`u`,o=typeof WeakSet<`u`,s=typeof DataView<`u`,c=n&&Symbol.iterator!==void 0,l=n&&Symbol.toStringTag!==void 0,u=i&&typeof Set.prototype.entries==`function`,d=r&&typeof Map.prototype.entries==`function`,f=u&&Object.getPrototypeOf(new Set().entries()),p=d&&Object.getPrototypeOf(new Map().entries()),m=c&&typeof Array.prototype[Symbol.iterator]==`function`,h=m&&Object.getPrototypeOf([][Symbol.iterator]()),g=c&&typeof String.prototype[Symbol.iterator]==`function`,_=g&&Object.getPrototypeOf(``[Symbol.iterator]()),v=8,y=-1;function b(n){var c=typeof n;if(c!==`object`)return c;if(n===null)return`null`;if(n===t)return`global`;if(Array.isArray(n)&&(l===!1||!(Symbol.toStringTag in n)))return`Array`;if(typeof window==`object`&&window!==null){if(typeof window.location==`object`&&n===window.location)return`Location`;if(typeof window.document==`object`&&n===window.document)return`Document`;if(typeof window.navigator==`object`){if(typeof window.navigator.mimeTypes==`object`&&n===window.navigator.mimeTypes)return`MimeTypeArray`;if(typeof window.navigator.plugins==`object`&&n===window.navigator.plugins)return`PluginArray`}if((typeof window.HTMLElement==`function`||typeof window.HTMLElement==`object`)&&n instanceof window.HTMLElement){if(n.tagName===`BLOCKQUOTE`)return`HTMLQuoteElement`;if(n.tagName===`TD`)return`HTMLTableDataCellElement`;if(n.tagName===`TH`)return`HTMLTableHeaderCellElement`}}var u=l&&n[Symbol.toStringTag];if(typeof u==`string`)return u;var d=Object.getPrototypeOf(n);return d===RegExp.prototype?`RegExp`:d===Date.prototype?`Date`:e&&d===Promise.prototype?`Promise`:i&&d===Set.prototype?`Set`:r&&d===Map.prototype?`Map`:o&&d===WeakSet.prototype?`WeakSet`:a&&d===WeakMap.prototype?`WeakMap`:s&&d===DataView.prototype?`DataView`:r&&d===p?`Map Iterator`:i&&d===f?`Set Iterator`:m&&d===h?`Array Iterator`:g&&d===_?`String Iterator`:d===null?`Object`:Object.prototype.toString.call(n).slice(v,y)}return b}))})(kg),kg.exports)}var Ng,Pg;function Fg(){if(Pg)return Ng;Pg=1;var e=Mg();return Ng=function(t){return e(t).toLowerCase()},Ng}var Ig,Lg;function Rg(){if(Lg)return Ig;Lg=1;function e(e){return e&&e.toString?e.toString():String(e)}return Ig=e,Ig}var zg,Bg;function Vg(){return Bg?zg:(Bg=1,zg={global:Lh(),calledInOrder:Yh(),className:Qh(),deprecated:tg(),every:ig(),functionName:sg(),orderByFirstCall:ug(),prototypes:Og(),typeOf:Fg(),valueToString:Rg()},zg)}var Hg;function Ug(){if(Hg)return Ph;Hg=1;let e=Vg().global,t,n;if(typeof __vitest_required__<`u`){try{t=__vitest_required__.timers}catch{}try{n=__vitest_required__.timersPromises}catch{}}function r(i){let a=2**31-1,o=0xe8d4a51000,s=function(){},c=function(){return[]},l={},u,d=!1;i.setTimeout&&(l.setTimeout=!0,u=i.setTimeout(s,0),d=typeof u==`object`),l.clearTimeout=!!i.clearTimeout,l.setInterval=!!i.setInterval,l.clearInterval=!!i.clearInterval,l.hrtime=i.process&&typeof i.process.hrtime==`function`,l.hrtimeBigint=l.hrtime&&typeof i.process.hrtime.bigint==`function`,l.nextTick=i.process&&typeof i.process.nextTick==`function`;let f=i.process&&i.__vitest_required__&&i.__vitest_required__.util.promisify;l.performance=i.performance&&typeof i.performance.now==`function`;let p=i.Performance&&(typeof i.Performance).match(/^(function|object)$/),m=i.performance&&i.performance.constructor&&i.performance.constructor.prototype;l.queueMicrotask=i.hasOwnProperty(`queueMicrotask`),l.requestAnimationFrame=i.requestAnimationFrame&&typeof i.requestAnimationFrame==`function`,l.cancelAnimationFrame=i.cancelAnimationFrame&&typeof i.cancelAnimationFrame==`function`,l.requestIdleCallback=i.requestIdleCallback&&typeof i.requestIdleCallback==`function`,l.cancelIdleCallbackPresent=i.cancelIdleCallback&&typeof i.cancelIdleCallback==`function`,l.setImmediate=i.setImmediate&&typeof i.setImmediate==`function`,l.clearImmediate=i.clearImmediate&&typeof i.clearImmediate==`function`,l.Intl=i.Intl&&typeof i.Intl==`object`,i.clearTimeout&&i.clearTimeout(u);let h=i.Date,g=l.Intl?Object.defineProperties(Object.create(null),Object.getOwnPropertyDescriptors(i.Intl)):void 0,_=o;if(h===void 0)throw Error("The global scope doesn't have a `Date` object (see https://github.com/sinonjs/sinon/issues/1852#issuecomment-419622780)");l.Date=!0;class v{constructor(e,t,n,r){this.name=e,this.entryType=t,this.startTime=n,this.duration=r}toJSON(){return JSON.stringify({...this})}}function y(e){return Number.isFinite?Number.isFinite(e):isFinite(e)}let b=!1;function x(e,t){e.loopLimit&&t===e.loopLimit-1&&(b=!0)}function S(){b=!1}function C(e){if(!e)return 0;let t=e.split(`:`),n=t.length,r=n,i=0,a;if(n>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw Error(`tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits`);for(;r--;){if(a=parseInt(t[r],10),a>=60)throw Error(`Invalid time ${e}`);i+=a*60**(n-r-1)}return i*1e3}function w(e){let t=1e6,n=e*1e6%t,r=n<0?n+t:n;return Math.floor(r)}function T(e){if(!e)return 0;if(typeof e.getTime==`function`)return e.getTime();if(typeof e==`number`)return e;throw TypeError(`now should be milliseconds since UNIX epoch`)}function ee(e,t,n){return n&&n.callAt>=e&&n.callAt<=t}function te(e,t){let n=Error(`Aborting after running ${e.loopLimit} timers, assuming an infinite loop!`);if(!t.error)return n;let r=/target\.*[<|(|[].*?[>|\]|)]\s*/,i=new RegExp(String(Object.keys(e).join(`|`)));d&&(i=RegExp(`\\s+at (Object\\.)?(?:${Object.keys(e).join(`|`)})\\s+`));let a=-1;t.error.stack.split(`
`).some(function(e,t){return e.match(r)?(a=t,!0):e.match(i)?(a=t,!1):a>=0});let o=`${n}\n${t.type||`Microtask`} - ${t.func.name||`anonymous`}\n${t.error.stack.split(`
`).slice(a+1).join(`
`)}`;try{Object.defineProperty(n,`stack`,{value:o})}catch{}return n}function E(){class e extends h{constructor(t,n,r,i,a,o,s){arguments.length===0?super(e.clock.now):super(...arguments),Object.defineProperty(this,`constructor`,{value:h,enumerable:!1})}static[Symbol.hasInstance](e){return e instanceof h}}return e.isFake=!0,h.now&&(e.now=function(){return e.clock.now}),h.toSource&&(e.toSource=function(){return h.toSource()}),e.toString=function(){return h.toString()},new Proxy(e,{apply(){if(this instanceof e)throw TypeError("A Proxy should only capture `new` calls with the `construct` handler. This is not supposed to be possible, so check the logic.");return new h(e.clock.now).toString()}})}function ne(){let e={};return Object.getOwnPropertyNames(g).forEach(t=>e[t]=g[t]),e.DateTimeFormat=function(...t){let n=new g.DateTimeFormat(...t),r={};return[`formatRange`,`formatRangeToParts`,`resolvedOptions`].forEach(e=>{r[e]=n[e].bind(n)}),[`format`,`formatToParts`].forEach(t=>{r[t]=function(r){return n[t](r||e.clock.now)}}),r},e.DateTimeFormat.prototype=Object.create(g.DateTimeFormat.prototype),e.DateTimeFormat.supportedLocalesOf=g.DateTimeFormat.supportedLocalesOf,e}function D(e,t){e.jobs||=[],e.jobs.push(t)}function O(e){if(e.jobs){for(let t=0;t<e.jobs.length;t++){let n=e.jobs[t];if(n.func.apply(null,n.args),x(e,t),e.loopLimit&&t>e.loopLimit)throw te(e,n)}S(),e.jobs=[]}}function k(e,t){if(t.func===void 0)throw Error(`Callback must be provided to timer calls`);if(d&&typeof t.func!=`function`)throw TypeError(`[ERR_INVALID_CALLBACK]: Callback must be a function. Received ${t.func} of type ${typeof t.func}`);if(b&&(t.error=Error()),t.type=t.immediate?`Immediate`:`Timeout`,t.hasOwnProperty(`delay`)&&(typeof t.delay!=`number`&&(t.delay=parseInt(t.delay,10)),y(t.delay)||(t.delay=0),t.delay=t.delay>a?1:t.delay,t.delay=Math.max(0,t.delay)),t.hasOwnProperty(`interval`)&&(t.type=`Interval`,t.interval=t.interval>a?1:t.interval),t.hasOwnProperty(`animation`)&&(t.type=`AnimationFrame`,t.animation=!0),t.hasOwnProperty(`idleCallback`)&&(t.type=`IdleCallback`,t.idleCallback=!0),e.timers||={},t.id=_++,t.createdAt=e.now,t.callAt=e.now+(parseInt(t.delay)||(e.duringTick?1:0)),e.timers[t.id]=t,d){let n={refed:!0,ref:function(){return this.refed=!0,n},unref:function(){return this.refed=!1,n},hasRef:function(){return this.refed},refresh:function(){return t.callAt=e.now+(parseInt(t.delay)||(e.duringTick?1:0)),e.timers[t.id]=t,n},[Symbol.toPrimitive]:function(){return t.id}};return n}return t.id}function A(e,t){if(e.callAt<t.callAt)return-1;if(e.callAt>t.callAt)return 1;if(e.immediate&&!t.immediate)return-1;if(!e.immediate&&t.immediate)return 1;if(e.createdAt<t.createdAt)return-1;if(e.createdAt>t.createdAt)return 1;if(e.id<t.id)return-1;if(e.id>t.id)return 1}function re(e,t,n){let r=e.timers,i=null,a,o;for(a in r)r.hasOwnProperty(a)&&(o=ee(t,n,r[a]),o&&(!i||A(i,r[a])===1)&&(i=r[a]));return i}function ie(e){let t=e.timers,n=null,r;for(r in t)t.hasOwnProperty(r)&&(!n||A(n,t[r])===1)&&(n=t[r]);return n}function ae(e){let t=e.timers,n=null,r;for(r in t)t.hasOwnProperty(r)&&(!n||A(n,t[r])===-1)&&(n=t[r]);return n}function oe(e,t){if(typeof t.interval==`number`?e.timers[t.id].callAt+=t.interval:delete e.timers[t.id],typeof t.func==`function`)t.func.apply(null,t.args);else{let e=eval;(function(){e(t.func)})()}}function se(e){return e===`IdleCallback`||e===`AnimationFrame`?`cancel${e}`:`clear${e}`}function ce(e){return e===`IdleCallback`||e===`AnimationFrame`?`request${e}`:`set${e}`}function le(){let e=0;return function(t){!e++&&console.warn(t)}}let ue=le();function j(e,t,n){if(!t)return;e.timers||={};let r=Number(t);if(Number.isNaN(r)||r<o){let r=se(n);if(e.shouldClearNativeTimers===!0){let n=e[`_${r}`];return typeof n==`function`?n(t):void 0}ue(`FakeTimers: ${r} was invoked to clear a native timer instead of one created by this library.
To automatically clean-up native timers, use \`shouldClearNativeTimers\`.`)}if(e.timers.hasOwnProperty(r)){let t=e.timers[r];if(t.type===n||t.type===`Timeout`&&n===`Interval`||t.type===`Interval`&&n===`Timeout`)delete e.timers[r];else{let e=se(n),r=ce(t.type);throw Error(`Cannot clear timer: timer created with ${r}() but cleared with ${e}()`)}}}function de(e,r){let a,o,s;for(o=0,s=e.methods.length;o<s;o++){if(a=e.methods[o],a===`hrtime`&&i.process)i.process.hrtime=e._hrtime;else if(a===`nextTick`&&i.process)i.process.nextTick=e._nextTick;else if(a===`performance`){let t=Object.getOwnPropertyDescriptor(e,`_${a}`);t&&t.get&&!t.set?Object.defineProperty(i,a,t):t.configurable&&(i[a]=e[`_${a}`])}else if(i[a]&&i[a].hadOwnProperty)i[a]=e[`_${a}`];else try{delete i[a]}catch{}if(e.timersModuleMethods!==void 0)for(let n=0;n<e.timersModuleMethods.length;n++){let r=e.timersModuleMethods[n];t[r.methodName]=r.original}if(e.timersPromisesModuleMethods!==void 0)for(let t=0;t<e.timersPromisesModuleMethods.length;t++){let r=e.timersPromisesModuleMethods[t];n[r.methodName]=r.original}}r.shouldAdvanceTime===!0&&i.clearInterval(e.attachedInterval),e.methods=[];for(let[t,n]of e.abortListenerMap.entries())n.removeEventListener(`abort`,t),e.abortListenerMap.delete(t);return e.timers?Object.keys(e.timers).map(function(t){return e.timers[t]}):[]}function fe(e,t,n){if(n[t].hadOwnProperty=Object.prototype.hasOwnProperty.call(e,t),n[`_${t}`]=e[t],t===`Date`)e[t]=n[t];else if(t===`Intl`)e[t]=n[t];else if(t===`performance`){let r=Object.getOwnPropertyDescriptor(e,t);if(r&&r.get&&!r.set){Object.defineProperty(n,`_${t}`,r);let i=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,i)}else e[t]=n[t]}else e[t]=function(){return n[t].apply(n,arguments)},Object.defineProperties(e[t],Object.getOwnPropertyDescriptors(n[t]));e[t].clock=n}function pe(e,t){e.tick(t)}let M={setTimeout:i.setTimeout,clearTimeout:i.clearTimeout,setInterval:i.setInterval,clearInterval:i.clearInterval,Date:i.Date};l.setImmediate&&(M.setImmediate=i.setImmediate),l.clearImmediate&&(M.clearImmediate=i.clearImmediate),l.hrtime&&(M.hrtime=i.process.hrtime),l.nextTick&&(M.nextTick=i.process.nextTick),l.performance&&(M.performance=i.performance),l.requestAnimationFrame&&(M.requestAnimationFrame=i.requestAnimationFrame),l.queueMicrotask&&(M.queueMicrotask=i.queueMicrotask),l.cancelAnimationFrame&&(M.cancelAnimationFrame=i.cancelAnimationFrame),l.requestIdleCallback&&(M.requestIdleCallback=i.requestIdleCallback),l.cancelIdleCallback&&(M.cancelIdleCallback=i.cancelIdleCallback),l.Intl&&(M.Intl=g);let me=i.setImmediate||i.setTimeout;function he(e,t){e=Math.floor(T(e)),t||=1e3;let n=0,r=[0,0],a={now:e,Date:E(),loopLimit:t};a.Date.clock=a;function o(){return 16-(a.now-e)%16}function s(t){let i=a.now-r[0]-e,o=Math.floor(i/1e3),s=(i-o*1e3)*1e6+n-r[1];if(Array.isArray(t)){if(t[1]>1e9)throw TypeError(`Number of nanoseconds can't exceed a billion`);let e=t[0],n=s-t[1],r=o-e;return n<0&&(n+=1e9,--r),[r,n]}return[o,s]}function c(){let e=s();return e[0]*1e3+e[1]/1e6}l.hrtimeBigint&&(s.bigint=function(){let e=s();return BigInt(e[0])*BigInt(1e9)+BigInt(e[1])}),l.Intl&&(a.Intl=ne(),a.Intl.clock=a),a.requestIdleCallback=function(e,t){let n=0;a.countTimers()>0&&(n=50);let r=k(a,{func:e,args:Array.prototype.slice.call(arguments,2),delay:t===void 0?n:Math.min(t,n),idleCallback:!0});return Number(r)},a.cancelIdleCallback=function(e){return j(a,e,`IdleCallback`)},a.setTimeout=function(e,t){return k(a,{func:e,args:Array.prototype.slice.call(arguments,2),delay:t})},i.Promise!==void 0&&f&&(a.setTimeout[f.custom]=function(e,t){return new i.Promise(function(n){k(a,{func:n,args:[t],delay:e})})}),a.clearTimeout=function(e){return j(a,e,`Timeout`)},a.nextTick=function(e){return D(a,{func:e,args:Array.prototype.slice.call(arguments,1),error:b?Error():null})},a.queueMicrotask=function(e){return a.nextTick(e)},a.setInterval=function(e,t){return t=parseInt(t,10),k(a,{func:e,args:Array.prototype.slice.call(arguments,2),delay:t,interval:t})},a.clearInterval=function(e){return j(a,e,`Interval`)},l.setImmediate&&(a.setImmediate=function(e){return k(a,{func:e,args:Array.prototype.slice.call(arguments,1),immediate:!0})},i.Promise!==void 0&&f&&(a.setImmediate[f.custom]=function(e){return new i.Promise(function(t){k(a,{func:t,args:[e],immediate:!0})})}),a.clearImmediate=function(e){return j(a,e,`Immediate`)}),a.countTimers=function(){return Object.keys(a.timers||{}).length+(a.jobs||[]).length},a.requestAnimationFrame=function(e){let t=k(a,{func:e,delay:o(),get args(){return[c()]},animation:!0});return Number(t)},a.cancelAnimationFrame=function(e){return j(a,e,`AnimationFrame`)},a.runMicrotasks=function(){O(a)};function u(e,t,r,i){let o=typeof e==`number`?e:C(e),s=Math.floor(o),c=w(o),l=n+c,u=a.now+s;if(o<0)throw TypeError(`Negative ticks are not supported`);l>=1e6&&(u+=1,l-=1e6),n=l;let d=a.now,f=a.now,p,m,h,g,_,v;a.duringTick=!0,h=a.now,O(a),h!==a.now&&(d+=a.now-h,u+=a.now-h);function y(){for(p=re(a,d,u);p&&d<=u;){if(a.timers[p.id]){d=p.callAt,a.now=p.callAt,h=a.now;try{O(a),oe(a,p)}catch(e){m||=e}if(t){me(g);return}_()}v()}if(h=a.now,O(a),h!==a.now&&(d+=a.now-h,u+=a.now-h),a.duringTick=!1,p=re(a,d,u),p)try{a.tick(u-a.now)}catch(e){m||=e}else a.now=u,n=l;if(m)throw m;if(t)r(a.now);else return a.now}return g=t&&function(){try{_(),v(),y()}catch(e){i(e)}},_=function(){h!==a.now&&(d+=a.now-h,u+=a.now-h,f+=a.now-h)},v=function(){p=re(a,f,u),f=d},y()}return a.tick=function(e){return u(e,!1)},i.Promise!==void 0&&(a.tickAsync=function(e){return new i.Promise(function(t,n){me(function(){try{u(e,!0,t,n)}catch(e){n(e)}})})}),a.next=function(){O(a);let e=ie(a);if(!e)return a.now;a.duringTick=!0;try{return a.now=e.callAt,oe(a,e),O(a),a.now}finally{a.duringTick=!1}},i.Promise!==void 0&&(a.nextAsync=function(){return new i.Promise(function(e,t){me(function(){try{let n=ie(a);if(!n){e(a.now);return}let r;a.duringTick=!0,a.now=n.callAt;try{oe(a,n)}catch(e){r=e}a.duringTick=!1,me(function(){r?t(r):e(a.now)})}catch(e){t(e)}})})}),a.runAll=function(){let e,t;for(O(a),t=0;t<a.loopLimit;t++){if(!a.timers||(e=Object.keys(a.timers).length,e===0))return S(),a.now;a.next(),x(a,t)}throw te(a,ie(a))},a.runToFrame=function(){return a.tick(o())},i.Promise!==void 0&&(a.runAllAsync=function(){return new i.Promise(function(e,t){let n=0;function r(){me(function(){try{O(a);let i;if(n<a.loopLimit){if(!a.timers){S(),e(a.now);return}if(i=Object.keys(a.timers).length,i===0){S(),e(a.now);return}a.next(),n++,r(),x(a,n);return}t(te(a,ie(a)))}catch(e){t(e)}})}r()})}),a.runToLast=function(){let e=ae(a);return e?a.tick(e.callAt-a.now):(O(a),a.now)},i.Promise!==void 0&&(a.runToLastAsync=function(){return new i.Promise(function(e,t){me(function(){try{let t=ae(a);t||(O(a),e(a.now)),e(a.tickAsync(t.callAt-a.now))}catch(e){t(e)}})})}),a.reset=function(){n=0,a.timers={},a.jobs=[],a.now=e},a.setSystemTime=function(e){let t=T(e),i=t-a.now,o,s;for(o in r[0]+=i,r[1]+=n,a.now=t,n=0,a.timers)a.timers.hasOwnProperty(o)&&(s=a.timers[o],s.createdAt+=i,s.callAt+=i)},a.jump=function(e){let t=typeof e==`number`?e:C(e),n=Math.floor(t);for(let e of Object.values(a.timers))a.now+n>e.callAt&&(e.callAt=a.now+n);a.tick(n)},l.performance&&(a.performance=Object.create(null),a.performance.now=c),l.hrtime&&(a.hrtime=s),a}function ge(r){if(arguments.length>1||r instanceof Date||Array.isArray(r)||typeof r==`number`)throw TypeError(`FakeTimers.install called with ${String(r)} install requires an object parameter`);if(i.Date.isFake===!0)throw TypeError(`Can't install fake timers twice on the same global object.`);if(r=r===void 0?{}:r,r.shouldAdvanceTime=r.shouldAdvanceTime||!1,r.advanceTimeDelta=r.advanceTimeDelta||20,r.shouldClearNativeTimers=r.shouldClearNativeTimers||!1,r.target)throw TypeError("config.target is no longer supported. Use `withGlobal(target)` instead.");function a(e){if(!r.ignoreMissingTimers)throw ReferenceError(`non-existent timers and/or objects cannot be faked: '${e}'`)}let o,u,d=he(r.now,r.loopLimit);if(d.shouldClearNativeTimers=r.shouldClearNativeTimers,d.uninstall=function(){return de(d,r)},d.abortListenerMap=new Map,d.methods=r.toFake||[],d.methods.length===0&&(d.methods=Object.keys(M)),r.shouldAdvanceTime===!0){let e=pe.bind(null,d,r.advanceTimeDelta);d.attachedInterval=i.setInterval(e,r.advanceTimeDelta)}if(d.methods.includes(`performance`)){let e=(()=>{if(m)return i.performance.constructor.prototype;if(p)return i.Performance.prototype})();if(e)Object.getOwnPropertyNames(e).forEach(function(e){e!==`now`&&(d.performance[e]=e.indexOf(`getEntries`)===0?c:s)}),d.performance.mark=e=>new v(e,`mark`,0,0),d.performance.measure=e=>new v(e,`measure`,0,100),d.performance.timeOrigin=T(r.now);else if((r.toFake||[]).includes(`performance`))return a(`performance`)}for(i===e&&t&&(d.timersModuleMethods=[]),i===e&&n&&(d.timersPromisesModuleMethods=[]),o=0,u=d.methods.length;o<u;o++){let e=d.methods[o];if(!l[e]){a(e);continue}if(e===`hrtime`?i.process&&typeof i.process.hrtime==`function`&&fe(i.process,e,d):e===`nextTick`?i.process&&typeof i.process.nextTick==`function`&&fe(i.process,e,d):fe(i,e,d),d.timersModuleMethods!==void 0&&t[e]){let n=t[e];d.timersModuleMethods.push({methodName:e,original:n}),t[e]=i[e]}d.timersPromisesModuleMethods!==void 0&&(e===`setTimeout`?(d.timersPromisesModuleMethods.push({methodName:`setTimeout`,original:n.setTimeout}),n.setTimeout=(e,t,n={})=>new Promise((r,i)=>{let a=()=>{n.signal.removeEventListener(`abort`,a),d.abortListenerMap.delete(a),d.clearTimeout(o),i(n.signal.reason)},o=d.setTimeout(()=>{n.signal&&(n.signal.removeEventListener(`abort`,a),d.abortListenerMap.delete(a)),r(t)},e);n.signal&&(n.signal.aborted?a():(n.signal.addEventListener(`abort`,a),d.abortListenerMap.set(a,n.signal)))})):e===`setImmediate`?(d.timersPromisesModuleMethods.push({methodName:`setImmediate`,original:n.setImmediate}),n.setImmediate=(e,t={})=>new Promise((n,r)=>{let i=()=>{t.signal.removeEventListener(`abort`,i),d.abortListenerMap.delete(i),d.clearImmediate(a),r(t.signal.reason)},a=d.setImmediate(()=>{t.signal&&(t.signal.removeEventListener(`abort`,i),d.abortListenerMap.delete(i)),n(e)});t.signal&&(t.signal.aborted?i():(t.signal.addEventListener(`abort`,i),d.abortListenerMap.set(i,t.signal)))})):e===`setInterval`&&(d.timersPromisesModuleMethods.push({methodName:`setInterval`,original:n.setInterval}),n.setInterval=(e,t,n={})=>({[Symbol.asyncIterator]:()=>{let r=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},i=!1,a=!1,o,s=0,c=[],l=d.setInterval(()=>{c.length>0?c.shift().resolve():s++},e),u=()=>{n.signal.removeEventListener(`abort`,u),d.abortListenerMap.delete(u),d.clearInterval(l),i=!0;for(let e of c)e.resolve()};return n.signal&&(n.signal.aborted?i=!0:(n.signal.addEventListener(`abort`,u),d.abortListenerMap.set(u,n.signal))),{next:async()=>{if(n.signal?.aborted&&!a)throw a=!0,n.signal.reason;if(i)return{done:!0,value:void 0};if(s>0)return s--,{done:!1,value:t};let e=r();if(c.push(e),await e,o&&c.length===0&&o.resolve(),n.signal?.aborted&&!a)throw a=!0,n.signal.reason;return i?{done:!0,value:void 0}:{done:!1,value:t}},return:async()=>i?{done:!0,value:void 0}:(c.length>0&&(o=r(),await o),d.clearInterval(l),i=!0,n.signal&&(n.signal.removeEventListener(`abort`,u),d.abortListenerMap.delete(u)),{done:!0,value:void 0})}}})))}return d}return{timers:M,createClock:he,install:ge,withGlobal:r}}let i=r(e);return Ph.timers=i.timers,Ph.createClock=i.createClock,Ph.install=i.install,Ph.withGlobal=r,Ph}var Wg=Ug(),Gg=class{_global;_clock;_fakingTime;_fakingDate;_fakeTimers;_userConfig;_now=_h.now;constructor({global:e,config:t}){this._userConfig=t,this._fakingDate=null,this._fakingTime=!1,this._fakeTimers=Wg.withGlobal(e),this._global=e}clearAllTimers(){this._fakingTime&&this._clock.reset()}dispose(){this.useRealTimers()}runAllTimers(){this._checkFakeTimers()&&this._clock.runAll()}async runAllTimersAsync(){this._checkFakeTimers()&&await this._clock.runAllAsync()}runOnlyPendingTimers(){this._checkFakeTimers()&&this._clock.runToLast()}async runOnlyPendingTimersAsync(){this._checkFakeTimers()&&await this._clock.runToLastAsync()}advanceTimersToNextTimer(e=1){if(this._checkFakeTimers())for(let t=e;t>0&&(this._clock.next(),this._clock.tick(0),this._clock.countTimers()!==0);t--);}async advanceTimersToNextTimerAsync(e=1){if(this._checkFakeTimers())for(let t=e;t>0&&(await this._clock.nextAsync(),this._clock.tick(0),this._clock.countTimers()!==0);t--);}advanceTimersByTime(e){this._checkFakeTimers()&&this._clock.tick(e)}async advanceTimersByTimeAsync(e){this._checkFakeTimers()&&await this._clock.tickAsync(e)}advanceTimersToNextFrame(){this._checkFakeTimers()&&this._clock.runToFrame()}runAllTicks(){this._checkFakeTimers()&&this._clock.runMicrotasks()}useRealTimers(){this._fakingDate&&=(xh(),null),this._fakingTime&&=(this._clock.uninstall(),!1)}useFakeTimers(){let e=this._fakingDate||Date.now();this._fakingDate&&=(xh(),null),this._fakingTime&&this._clock.uninstall();let t=Object.keys(this._fakeTimers.timers).filter(e=>e!==`nextTick`&&e!==`queueMicrotask`);if(this._userConfig?.toFake?.includes(`nextTick`)&&Ep())throw Error(`process.nextTick cannot be mocked inside child_process`);this._clock=this._fakeTimers.install({now:e,...this._userConfig,toFake:this._userConfig?.toFake||t,ignoreMissingTimers:!0}),this._fakingTime=!0}reset(){if(this._checkFakeTimers()){let{now:e}=this._clock;this._clock.reset(),this._clock.setSystemTime(e)}}setSystemTime(e){let t=e===void 0||e instanceof Date?e:new Date(e);this._fakingTime?this._clock.setSystemTime(t):(this._fakingDate=t??new Date(this.getRealSystemTime()),bh(this._fakingDate))}getMockedSystemTime(){return this._fakingTime?new Date(this._clock.now):this._fakingDate}getRealSystemTime(){return this._now()}getTimerCount(){return this._checkFakeTimers()?this._clock.countTimers():0}configure(e){this._userConfig=e}isFakeTimers(){return this._fakingTime}_checkFakeTimers(){if(!this._fakingTime)throw Error("A function to advance timers was called but the timers APIs are not mocked. Call `vi.useFakeTimers()` in the test file first.");return this._fakingTime}};function Kg(e,t){return t.stack!==void 0&&(e.stack=t.stack.replace(t.message,e.message)),e}function qg(e,t={}){let{setTimeout:n,setInterval:r,clearTimeout:i,clearInterval:a}=Ud(),{interval:o=50,timeout:s=1e3}=typeof t==`number`?{timeout:t}:t,c=Error(`STACK_TRACE_ERROR`);return new Promise((t,l)=>{let u,d=`idle`,f,p,m=e=>{f&&i(f),p&&a(p),t(e)},h=()=>{p&&a(p);let e=u;e||=Kg(Error(`Timed out in waitFor!`),c),l(e)},g=()=>{if(Xg.isFakeTimers()&&Xg.advanceTimersByTime(o),d!==`pending`)try{let t=e();if(typeof t==`object`&&t&&typeof t.then==`function`){let e=t;d=`pending`,e.then(e=>{d=`resolved`,m(e)},e=>{d=`rejected`,u=e})}else return m(t),!0}catch(e){u=e}};g()!==!0&&(f=n(h,s),p=r(g,o))})}function Jg(e,t={}){let{setTimeout:n,setInterval:r,clearTimeout:i,clearInterval:a}=Ud(),{interval:o=50,timeout:s=1e3}=typeof t==`number`?{timeout:t}:t,c=Error(`STACK_TRACE_ERROR`);return new Promise((t,l)=>{let u=`idle`,d,f,p=e=>{f&&a(f),e||=Kg(Error(`Timed out in waitUntil!`),c),l(e)},m=e=>{if(e)return d&&i(d),f&&a(f),t(e),!0},h=()=>{if(Xg.isFakeTimers()&&Xg.advanceTimersByTime(o),u!==`pending`)try{let t=e();if(typeof t==`object`&&t&&typeof t.then==`function`){let e=t;u=`pending`,e.then(e=>{u=`resolved`,m(e)},e=>{u=`rejected`,p(e)})}else return m(t)}catch(e){p(e)}};h()!==!0&&(d=n(p,s),f=r(h,o))})}function Yg(){let e=null,t=()=>Tp(),n,r=()=>n||=new Gg({global:globalThis,config:t().config.fakeTimers}),i=new Map,a=new Map,o=[`PROD`,`DEV`,`SSR`],s={useFakeTimers(e){if(Ep()&&(e?.toFake?.includes(`nextTick`)||t().config?.fakeTimers?.toFake?.includes(`nextTick`)))throw Error(`vi.useFakeTimers({ toFake: ["nextTick"] }) is not supported in node:child_process. Use --pool=threads if mocking nextTick is required.`);return e?r().configure({...t().config.fakeTimers,...e}):r().configure(t().config.fakeTimers),r().useFakeTimers(),s},isFakeTimers(){return r().isFakeTimers()},useRealTimers(){return r().useRealTimers(),s},runOnlyPendingTimers(){return r().runOnlyPendingTimers(),s},async runOnlyPendingTimersAsync(){return await r().runOnlyPendingTimersAsync(),s},runAllTimers(){return r().runAllTimers(),s},async runAllTimersAsync(){return await r().runAllTimersAsync(),s},runAllTicks(){return r().runAllTicks(),s},advanceTimersByTime(e){return r().advanceTimersByTime(e),s},async advanceTimersByTimeAsync(e){return await r().advanceTimersByTimeAsync(e),s},advanceTimersToNextTimer(){return r().advanceTimersToNextTimer(),s},async advanceTimersToNextTimerAsync(){return await r().advanceTimersToNextTimerAsync(),s},advanceTimersToNextFrame(){return r().advanceTimersToNextFrame(),s},getTimerCount(){return r().getTimerCount()},setSystemTime(e){return r().setSystemTime(e),s},getMockedSystemTime(){return r().getMockedSystemTime()},getRealSystemTime(){return r().getRealSystemTime()},clearAllTimers(){return r().clearAllTimers(),s},spyOn:Uo,fn:Ho,waitFor:qg,waitUntil:Jg,hoisted(e){return ta(e,`"vi.hoisted" factory`,[`function`]),e()},mock(e,t){if(typeof e!=`string`)throw TypeError(`vi.mock() expects a string path, but received a ${typeof e}`);let n=Qg(`mock`);Zg().queueMock(e,n,typeof t==`function`?()=>t(()=>Zg().importActual(e,n,Zg().getMockContext().callstack)):t)},unmock(e){if(typeof e!=`string`)throw TypeError(`vi.unmock() expects a string path, but received a ${typeof e}`);Zg().queueUnmock(e,Qg(`unmock`))},doMock(e,t){if(typeof e!=`string`)throw TypeError(`vi.doMock() expects a string path, but received a ${typeof e}`);let n=Qg(`doMock`);Zg().queueMock(e,n,typeof t==`function`?()=>t(()=>Zg().importActual(e,n,Zg().getMockContext().callstack)):t)},doUnmock(e){if(typeof e!=`string`)throw TypeError(`vi.doUnmock() expects a string path, but received a ${typeof e}`);let t=Qg(`doUnmock`);Zg().queueUnmock(e,t)},async importActual(e){let t=Qg(`importActual`);return Zg().importActual(e,t,Zg().getMockContext().callstack)},async importMock(e){let t=Qg(`importMock`);return Zg().importMock(e,t)},mockObject(e,t){return Zg().mockObject({value:e},void 0,t?.spy?`autospy`:`automock`).value},mocked(e,t={}){return e},isMockFunction(e){return Lo(e)},clearAllMocks(){return os(),s},resetAllMocks(){return ss(),s},restoreAllMocks(){return as(),s},stubGlobal(e,t){return i.has(e)||i.set(e,Object.getOwnPropertyDescriptor(globalThis,e)),Object.defineProperty(globalThis,e,{value:t,writable:!0,configurable:!0,enumerable:!0}),s},stubEnv(e,n){let r=t().metaEnv;return a.has(e)||a.set(e,r[e]),o.includes(e)?r[e]=n?`1`:``:n===void 0?delete r[e]:r[e]=String(n),s},unstubAllGlobals(){return i.forEach((e,t)=>{e?Object.defineProperty(globalThis,t,e):Reflect.deleteProperty(globalThis,t)}),i.clear(),s},unstubAllEnvs(){let e=t().metaEnv;return a.forEach((t,n)=>{t===void 0?delete e[n]:e[n]=t}),a.clear(),s},resetModules(){return Dp(t().evaluatedModules),s},async dynamicImportSettled(){return kp()},setConfig(n){e||={...t().config},Object.assign(t().config,n)},resetConfig(){e&&Object.assign(t().config,e)}};return s}const Xg=Yg();function Zg(){return typeof __vitest_mocker__<`u`?__vitest_mocker__:new Proxy({},{get(e,t){throw Error(`Vitest mocker was not initialized in this environment. vi.${String(t)}() is forbidden.`)}})}function Qg(e){let t=ea({stackTraceLimit:5}).split(`
`);return of(t[t.findLastIndex(t=>t.includes(` at Object.${e}`)||t.includes(`${e}@`)||t.includes(` at ${e} (`))+1])?.file||``}function $g(e){let t=``;for(let n=0;n<e.length;n++){if(e[n]===`-`){n++,n<=e.length-1&&(t+=e[n].toUpperCase());continue}t+=e[n].toLocaleLowerCase()}return t}var e_=class{IGNORED_PROPERTIES=[`registry`,`registries`,`paths`];importDeclarations=[];withinExportDefaultDeclaration=!1;withinDefineConfig=!1;withinMainObjectExpression=!1;withinIgnoredProperty=!1;lastImportDeclaration=null;configKeyPropertyDeclaration=null;mainObjectExpression=null};async function t_({plugins:e,key:t,config:n}){if(e.length===0)return(0,F.ok)(n.code);let r=await et(n.path,n.code),i=new Pt(n.code),a=new e_;if(a.withinDefineConfig=!0,new $e({ImportDeclaration(e){a.withinDefineConfig&&(a.lastImportDeclaration=e,a.importDeclarations.push(e))},ExportDefaultDeclaration(){a.withinExportDefaultDeclaration=!0},"ExportDefaultDeclaration:exit"(){a.withinExportDefaultDeclaration=!1},ObjectExpression(e){a.withinExportDefaultDeclaration&&a.withinDefineConfig&&(a.withinIgnoredProperty||(a.withinMainObjectExpression||=(a.mainObjectExpression=e,!0)))},CallExpression(e){a.withinExportDefaultDeclaration&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(a.withinDefineConfig=!0)},"CallExpression:exit"(e){a.withinDefineConfig&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(a.withinDefineConfig=!1,a.withinMainObjectExpression=!1)},Property(e){if(a.withinDefineConfig&&a.withinMainObjectExpression&&!a.withinIgnoredProperty){if(a.IGNORED_PROPERTIES.includes(e.key.type===`Identifier`?e.key.name:``)){a.withinIgnoredProperty=!0;return}if(e.key.type===`Identifier`&&(e.kind===`init`||e.kind===`get`)&&e.key.name===t){if(e.value.type!==`ArrayExpression`)return(0,F.err)(new Ve({key:t,type:`array`}));a.configKeyPropertyDeclaration=e}}},"Property:exit"(e){if(a.withinDefineConfig&&a.IGNORED_PROPERTIES.includes(e.key.type===`Identifier`?e.key.name:``)){a.withinIgnoredProperty=!1;return}}}).visit(r.program),e=e.filter(e=>!a.importDeclarations.some(t=>t.source.value===e.packageName)),e.length===0)return(0,F.ok)(n.code);a.lastImportDeclaration!==null&&i.appendRight(a.lastImportDeclaration.end,e.map(e=>`\nimport ${e.name} from '${e.packageName}';`).join(``));let o=null;t===`providers`?o=`DEFAULT_PROVIDERS`:t===`languages`&&(o=`DEFAULT_LANGS`);let s=a.importDeclarations.find(e=>e.source.value===`jsrepo`);if(s===void 0)return(0,F.err)(new Re);let c=o?{added:!1,name:o}:null;if(c!==null){for(let e of s.specifiers)if(e.type===`ImportSpecifier`&&e.imported.type===`Identifier`&&e.imported.name===o){c.added=!0,e.local.name!==o&&(c.name=e.local.name);break}}if(a.configKeyPropertyDeclaration!==null){if(a.configKeyPropertyDeclaration.value.type!==`ArrayExpression`)return(0,F.err)(new Ve({key:t,type:`array`}));let n=i.slice(a.configKeyPropertyDeclaration.value.start,a.configKeyPropertyDeclaration.value.end).lastIndexOf(`,`),r=n===-1?-1:n+a.configKeyPropertyDeclaration.value.start+1;if(a.configKeyPropertyDeclaration.value.elements.length===0)c=null,i.appendRight(a.configKeyPropertyDeclaration.value.start+1,`${e.map(e=>`${e.name}()`).join(`, `)}`);else{let t=a.configKeyPropertyDeclaration.value.elements[a.configKeyPropertyDeclaration.value.elements.length-1],n=!1;n=!(r!==-1&&r>t.end),c=null,i.appendRight(n?t.end:r,`${n?`,`:``} ${e.map(e=>`${e.name}()`).join(`, `)}`)}}else{if(a.mainObjectExpression===null)return(0,F.err)(new He);let n=i.slice(a.mainObjectExpression.start,a.mainObjectExpression.end).lastIndexOf(`,`),r=n===-1?-1:n+a.mainObjectExpression.start+1;if(a.mainObjectExpression.properties.length===0)i.appendRight(a.mainObjectExpression.start+1,`\n\t${t}: [${c?`...${c.name}, `:``}${e.map(e=>`${e.name}()`).join(`, `)}]`);else{let n=a.mainObjectExpression.properties[a.mainObjectExpression.properties.length-1],o=!1;o=!(r!==-1&&r>n.end),i.appendRight(o?n.end:r,`${o?`,`:``}\n\t${t}: [${c?`...${c.name}, `:``}${e.map(e=>`${e.name}()`).join(`, `)}]`)}if(c&&!c.added){let e=i.slice(s.start,s.end).lastIndexOf(`,`),t=e===-1?-1:e+s.start+1,n=s.specifiers[s.specifiers.length-1],r=!1;r=!(t!==-1&&t>n.end),i.appendRight(r?n.end:t,`${r?`,`:``} ${c.name}`)}}return(0,F.ok)(i.toString())}async function n_({plugins:e,config:t}){let n=Xg.fn(),r=await o(t.code,{fileName:t.path,warn:n});return e.filter(e=>!r.includes(e.package))}const r_=[{shorthand:`prettier`,name:`@jsrepo/transform-prettier`},{shorthand:`biome`,name:`@jsrepo/transform-biome`},{shorthand:`javascript`,name:`@jsrepo/transform-javascript`},{shorthand:`oxfmt`,name:`@jsrepo/transform-oxfmt`}];function i_(e,t){let n=e.map(e=>a_(e,t)),r=[];for(let e of n){if(e.isErr())return(0,F.err)(e.error);r.push(e.value)}return(0,F.ok)(r)}function a_(e,t){let n=r_.find(t=>t.shorthand===e);if(n){let e=a_(n.name,t);return e.isErr()?(0,F.err)(e.error):(0,F.ok)({name:e.value.name,packageName:n.name,version:void 0})}let r=m(e);if(r.isErr())return(0,F.err)(new Le(e));let i=r.value.name;return r.value.name.startsWith(`@`)&&(i=r.value.name.startsWith(`@jsrepo/`)?r.value.name.split(`/`)[1]?.includes(t)?`jsrepo-${r.value.name.split(`/`)[1]}`:`jsrepo-${t}-${r.value.name.split(`/`)[1]}`:r.value.name.split(`/`)[1]),(0,F.ok)({name:$g(i.replace(`jsrepo-${t}-`,``)),packageName:r.value.name,version:r.value.version})}const o_=it.extend({yes:E()}),s_=new Ye(`language`).description(`Add a language to your config.`).argument(`[languages...]`,`Names of the languages you want to add to your config. ex: (jsrepo-language-go, jsrepo-language-rust)`).addOption(L.cwd).addOption(L.yes).action(async(e,t)=>{let n=at(o_,t);j();let r=await f({cwd:n.cwd,promptForContinueIfNull:!n.yes});r||st(new We(n.cwd)),we(l_(await ot(c_(e,{...n,cwd:r?x.dirname(r.path):n.cwd},r))))});async function c_(e,t,n){let r=performance.now(),i=i_(e,`language`);if(i.isErr())return(0,F.err)(i.error);let a=i.value,o=fe(n.path);if(o.isErr())return(0,F.err)(o.error);let s=o.value,c=await t_({plugins:a,key:`languages`,config:{path:n.path,code:s}});if(c.isErr())return(0,F.err)(c.error);let l=c.value,u=A(n.path,l);return u.isErr()?(0,F.err)(u.error):(await _({devDependencies:a.map(e=>({name:e.packageName,version:e.version})),dependencies:[]},{options:t,configPath:n.path}),(0,F.ok)({duration:performance.now()-r,languages:e.length}))}function l_({duration:e,languages:t}){return`Added ${I.default.green(t.toString())} ${t>1?`languages`:`language`} in ${I.default.green(`${e.toFixed(2)}ms`)}.`}const u_=[`cursor`,`claude`,`vscode`,`codex`,`antigravity`],d_=it.extend({client:ee(he(u_)).optional(),all:E().optional()}),f_=new Ye(`mcp`).description(`Configure the jsrepo MCP server for your environment.`).addOption(new Xe(`--client <clients...>`,`The MCP client(s) to configure`).choices(u_)).option(`--all`,`Configure all supported MCP clients`,!1).addOption(L.cwd).action(async e=>{let t=at(d_,e);j(),we(m_({...await ot(p_(t)),cwd:t.cwd}))});async function p_(e){let t;if(e.all)t=Object.keys(E_);else if(e.client&&e.client.length>0)t=e.client;else{let e=await De({message:`Which clients would you like to configure?`,options:Object.entries(E_).map(([e,t])=>({value:e,label:t.name}))});N(e)&&(P(`Canceled!`),process.exit(0)),t=e}let n=performance.now(),r=[];for(let n of t){let t=E_[n],i=t.filePath(e.cwd),a=t.writeConfig(i);r.push({name:t.name,result:a.isErr()?(0,F.err)(a.error):(0,F.ok)({filePath:i})})}return(0,F.ok)({duration:performance.now()-n,results:r})}function m_({duration:e,results:t,cwd:n}){return`Configured ${t.length} ${t.length>1?`clients`:`client`} in ${I.default.green(`${e.toFixed(2)}ms`)}:\n${t.map(e=>h_(e,n)).join(`
`)}`}function h_({name:e,result:t},n){if(t.isErr())return`   ${I.default.cyan(e)}: ${I.default.red(t.error.message)}`;let{filePath:r}=t.value;return`   ${I.default.cyan(e)} → ${I.default.dim(x.relative(n,r))}`}function g_(e,t){try{return A(e,t),(0,F.ok)(void 0)}catch(t){return(0,F.err)(new Ie(`Failed to write config to ${e}: ${t instanceof Error?t.message:String(t)}`,{suggestion:`Please try again.`}))}}const __={command:`npx`,args:[`@jsrepo/mcp`]},v_=`[mcp_servers.jsrepo]
command = "npx"
args = ["@jsrepo/mcp"]
`;function y_(e){return e?e.includes(`[mcp_servers.jsrepo]`)?e:(e.endsWith(`
`)||(e+=`
`),`${e}${v_}`):v_}const b_=se({command:D(),args:ee(D()),env:k(D(),D()).optional()}),x_=se({mcpServers:k(D(),b_)}),S_=se({servers:k(D(),b_)});function C_({existingContent:e,serverName:t,serverConfig:n}){if(e.trim().length===0)return(0,F.ok)(l({mcpServers:{[t]:n}},{format:!0}));let r=le(x_,e);return r.isErr()?(0,F.err)(new Ie(`Failed to parse MCP server config: ${r.error.message}`,{suggestion:`Please try again.`})):(0,F.ok)(l({mcpServers:{...r.value.mcpServers,[t]:n}},{format:!0}))}function w_({existingContent:e,serverName:t,serverConfig:n}){if(e.trim().length===0)return(0,F.ok)(l({servers:{[t]:n}},{format:!0}));let r=le(S_,e);return r.isErr()?(0,F.err)(new Ie(`Failed to parse MCP server config: ${r.error.message}`,{suggestion:`Please try again.`})):(0,F.ok)(l({servers:{...r.value.servers,[t]:n}},{format:!0}))}function T_(e,t,n=`generic`){let r=ce(e)?fe(e)._unsafeUnwrap():``,i=n===`vscode`?w_({existingContent:r,serverName:`jsrepo`,serverConfig:t}):C_({existingContent:r,serverName:`jsrepo`,serverConfig:t});return i.isErr()?(0,F.err)(i.error):g_(e,i.value)}const E_={cursor:{name:`Cursor`,filePath:e=>S(e,`.cursor/mcp.json`),writeConfig:e=>T_(e,__)},claude:{name:`Claude Code`,filePath:e=>S(e,`.mcp.json`),writeConfig:e=>T_(e,__)},vscode:{name:`VS Code`,filePath:e=>S(e,`.vscode/mcp.json`),writeConfig:e=>T_(e,__,`vscode`)},codex:{name:`Codex`,filePath:()=>S(tt.homedir(),`.codex/config.toml`),writeConfig:e=>g_(e,y_(ce(e)?fe(e)._unsafeUnwrap():``))},antigravity:{name:`Antigravity`,filePath:()=>S(tt.homedir(),`.gemini/antigravity/mcp_config.json`),writeConfig:e=>T_(e,__)}},D_=it.extend({yes:E()}),O_=new Ye(`provider`).description(`Add a provider to your config.`).argument(`[providers...]`,`Names of the providers you want to add to your config. ex: (jsrepo-provider-jsr, jsrepo-provider-npm)`).addOption(L.cwd).addOption(L.yes).action(async(e,t)=>{let n=at(D_,t);j();let r=await f({cwd:n.cwd,promptForContinueIfNull:!n.yes});r||st(new We(n.cwd)),we(A_(await ot(k_(e,{...n,cwd:r?x.dirname(r.path):n.cwd},r))))});async function k_(e,t,n){let r=performance.now(),i=i_(e,`provider`);if(i.isErr())return(0,F.err)(i.error);let a=i.value,o=fe(n.path);if(o.isErr())return(0,F.err)(o.error);let s=o.value,c=await t_({plugins:a,key:`providers`,config:{path:n.path,code:s}});if(c.isErr())return(0,F.err)(c.error);let l=c.value,u=A(n.path,l);return u.isErr()?(0,F.err)(u.error):(await _({devDependencies:a.map(e=>({name:e.packageName,version:e.version})),dependencies:[]},{options:t,configPath:n.path}),(0,F.ok)({duration:performance.now()-r,providers:e.length}))}function A_({duration:e,providers:t}){return`Added ${I.default.green(t.toString())} ${t>1?`providers`:`provider`} in ${I.default.green(`${e.toFixed(2)}ms`)}.`}const j_=it.extend({yes:E()}),M_=new Ye(`transform`).description(`Add a transform to your config.`).argument(`[transforms...]`,`Names of the transforms you want to add to your config. ex: (@jsrepo/transform-prettier, @jsrepo/transform-biome)`).addOption(L.cwd).addOption(L.yes).action(async(e,t)=>{let n=at(j_,t);j();let r=await f({cwd:n.cwd,promptForContinueIfNull:!n.yes});r||st(new We(n.cwd)),we(P_(await ot(N_(e,{...n,cwd:r?x.dirname(r.path):n.cwd},r))))});async function N_(e,t,n){let r=performance.now(),i=i_(e,`transform`);if(i.isErr())return(0,F.err)(i.error);let a=i.value,o=fe(n.path);if(o.isErr())return(0,F.err)(o.error);let s=o.value,c=await t_({plugins:a,key:`transforms`,config:{path:n.path,code:s}});if(c.isErr())return(0,F.err)(c.error);let l=c.value,u=A(n.path,l);return u.isErr()?(0,F.err)(u.error):(await _({devDependencies:a.map(e=>({name:e.packageName,version:e.version})),dependencies:[]},{options:t,configPath:n.path}),(0,F.ok)({duration:performance.now()-r,transforms:e.length}))}function P_({duration:e,transforms:t}){return`Added ${I.default.green(t.toString())} ${t>1?`transforms`:`transform`} in ${I.default.green(`${e.toFixed(2)}ms`)}.`}const F_=new Ye(`config`).description(`Modify your jsrepo config.`).addCommand(M_).addCommand(O_).addCommand(s_).addCommand(f_);var I_=class{withinExportDefaultDeclaration=!1;withinDefineConfig=!1;withinMainObjectExpression=!1;withinIgnoredProperty=!1;configKeyPropertyDeclaration=null;mainObjectExpression=null};async function L_(e,{config:t}){if(e.length===0)return(0,F.ok)(t.code);let n=await et(t.path,t.code),r=new Pt(t.code),i=new I_;if(i.withinDefineConfig=!0,new $e({ExportDefaultDeclaration(){i.withinExportDefaultDeclaration=!0},"ExportDefaultDeclaration:exit"(){i.withinExportDefaultDeclaration=!1},ObjectExpression(e){i.withinExportDefaultDeclaration&&i.withinDefineConfig&&(i.withinIgnoredProperty||(i.withinMainObjectExpression||=(i.mainObjectExpression=e,!0)))},CallExpression(e){i.withinExportDefaultDeclaration&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(i.withinDefineConfig=!0)},"CallExpression:exit"(e){i.withinDefineConfig&&e.callee.type===`Identifier`&&e.callee.name===`defineConfig`&&(i.withinDefineConfig=!1,i.withinMainObjectExpression=!1)},Property(e){if(i.withinDefineConfig&&i.withinMainObjectExpression&&!i.withinIgnoredProperty){if(e.key.type===`Identifier`&&e.key.name!==`registries`){i.withinIgnoredProperty=!0;return}if(e.key.type===`Identifier`&&(e.kind===`init`||e.kind===`get`)&&e.key.name===`registries`){if(e.value.type!==`ArrayExpression`)return(0,F.err)(new Ve({key:`registries`,type:`array`}));i.configKeyPropertyDeclaration=e}}},"Property:exit"(e){if(i.withinDefineConfig&&e.key.type===`Identifier`&&e.key.name!==`registries`){i.withinIgnoredProperty=!1;return}}}).visit(n.program),i.configKeyPropertyDeclaration!==null){if(i.configKeyPropertyDeclaration.value.type!==`ArrayExpression`)return(0,F.err)(new Ve({key:`registries`,type:`array`}));for(let t of i.configKeyPropertyDeclaration.value.elements)!t||t.type!==`Literal`||typeof t.value==`string`&&(e=e.filter(e=>e!==t.value));if(e.length===0)return(0,F.ok)(t.code);let n=r.slice(i.configKeyPropertyDeclaration.value.start,i.configKeyPropertyDeclaration.value.end).lastIndexOf(`,`),a=n===-1?-1:n+i.configKeyPropertyDeclaration.value.start+1;if(i.configKeyPropertyDeclaration.value.elements.length===0)r.appendRight(i.configKeyPropertyDeclaration.value.start+1,`${e.map(e=>`'${e}'`).join(`, `)}`);else{let t=i.configKeyPropertyDeclaration.value.elements[i.configKeyPropertyDeclaration.value.elements.length-1],n=!1;n=!(a!==-1&&a>t.end),r.appendRight(n?t.end:a,`${n?`,`:``} ${e.map(e=>`'${e}'`).join(`, `)}`)}}else{if(i.mainObjectExpression===null)return(0,F.err)(new He);let t=r.slice(i.mainObjectExpression.start,i.mainObjectExpression.end).lastIndexOf(`,`),n=t===-1?-1:t+i.mainObjectExpression.start+1;if(i.mainObjectExpression.properties.length===0)r.appendRight(i.mainObjectExpression.start+1,`\n\tregistries: [${e.map(e=>`'${e}'`).join(`, `)}]`);else{let t=i.mainObjectExpression.properties[i.mainObjectExpression.properties.length-1],a=!1;a=!(n!==-1&&n>t.end),r.appendRight(a?t.end:n,`${a?`,`:``}\n\tregistries: [${e.map(e=>`'${e}'`).join(`, `)}]`)}}return(0,F.ok)(r.toString())}const R_=it.extend({yes:E(),overwrite:E(),verbose:E(),expand:E(),maxUnchanged:ue(),js:E()}),z_=new Ye(`init`).description(`Initialize a new jsrepo project.`).argument(`[registries...]`,`The registries to initialize.`).option(`--js`,`Initialize the project and automatically add the @jsrepo/transform-javascript transform plugin.`,!1).addOption(L.cwd).addOption(L.yes).addOption(L.verbose).addOption(L.overwrite).addOption(L.expand).addOption(L.maxUnchanged).action(async(e,t)=>{let n=at(R_,t),r=await f({cwd:n.cwd,promptForContinueIfNull:!1});j(),await ot(B_(e,{...n,cwd:r?x.dirname(r.path):n.cwd},r)),we(I.default.green(`Initialization complete!`))});async function B_(e,t,n){let{verbose:r,spinner:i}=d({options:t}),a=S(t.cwd,`package.json`),o=te(a);if(o.isErr())return(0,F.err)(new Ue);let c=o.value,{config:l,path:u}=n??{config:null,path:S(t.cwd,c.type===`module`?`jsrepo.config.ts`:`jsrepo.config.mts`)},f=l?.providers??M,p;if(l===null)p=G_();else{let e=fe(u);if(e.isErr())return(0,F.err)(e.error);p=e.value}let m=!0;if(c.dependencies?.jsrepo===void 0&&c.devDependencies?.jsrepo===void 0){c.devDependencies||={},c.devDependencies.jsrepo=`^${g}`;let e=A(a,JSON.stringify(c,null,`	`));if(e.isErr())return(0,F.err)(e.error);m=!1}if(t.js){let e=await t_({plugins:[{name:`stripTypes`,packageName:`@jsrepo/transform-javascript`,version:void 0}],key:`transforms`,config:{path:u,code:p}});if(e.isErr())return(0,F.err)(e.error);p=e.value}if(e.length===0){if(l!==null)return(0,F.err)(new Ge);let e=A(u,p);return e.isErr()?(0,F.err)(e.error):(Ee.success(`Wrote config to ${I.default.cyan(x.relative(t.cwd,u))}`),m||await _({dependencies:[],devDependencies:[...t.js?[{name:`@jsrepo/transform-javascript`}]:[]]},{configPath:u,options:t}),(0,F.ok)())}let h=e.length>0?e:l?.registries??[];i.start(`Retrieving manifest${h.length>1?`s`:``} from ${I.default.cyan(h.join(`, `))}`);let b=await C(h,{cwd:t.cwd,providers:f});if(b.isErr())return i.stop(`Failed to retrieve manifests`),(0,F.err)(b.error);i.stop(`Retrieved manifest${h.length>1?`s`:``} from ${I.default.cyan(h.join(`, `))}`);let w=b.value,T=new Map;for(let[e,n]of w){let e=await V_(n,{configCode:p,configPath:u,options:t,pluginChoices:T,config:l});if(e.isErr())return(0,F.err)(e.error);p=e.value}let ee=await L_(e,{config:{path:u,code:p}});if(ee.isErr())return(0,F.err)(ee.error);p=ee.value;let E=A(u,p);if(E.isErr())return(0,F.err)(E.error);Ee.success(`Wrote config to ${I.default.cyan(x.relative(t.cwd,u))}`);let ne=new Map(Array.from(T.values()).filter(e=>e.install).map(e=>[`js:${e.plugin.packageName}@${e.plugin.version??``}`,{name:e.plugin.packageName,version:e.plugin.version,ecosystem:`js`}]));ne.size>0&&await _({dependencies:[],devDependencies:[...Array.from(ne.values()),...t.js?[{name:`@jsrepo/transform-javascript`}]:[]]},{options:{yes:!0},configPath:u}),ne.clear();let D=await re({cwd:x.parse(u).dir});if(D.isErr())return(0,F.err)(D.error);l=D.value;let O=Array.from(w.values()).flatMap(e=>e.manifest.items.filter(e=>e.add===`on-init`||e.name===`index`).map(t=>({registry:e,item:t}))),k=Array.from(w.values()).flatMap(e=>e.manifest.items.filter(e=>e.add===`optionally-on-init`).map(t=>({registry:e,item:t})));if(k.length>0){let e=await De({message:`Would you like to add any of the following items?`,options:k.map(e=>({label:e.item.name,value:e.item.name})),required:!1});N(e)&&(P(`Canceled!`),process.exit(0)),O.push(...k.filter(t=>e.includes(t.item.name)))}let ie={dependencies:[],devDependencies:[]};if(O.length>0){i.start(`Fetching ${I.default.cyan(O.map(e=>e.item.name).join(`, `))}...`);let e=await be(O,{options:{withExamples:!1,withDocs:!1,withTests:!1}});if(e.isErr())return i.stop(`Failed to fetch items`),(0,F.err)(e.error);i.stop(`Fetched ${I.default.cyan(O.map(e=>e.item.name).join(`, `))}`);let n=e.value,r=await oe({items:n,config:l,options:t});if(r.isErr())return(0,F.err)(r.error);let{itemPaths:a}=r.value,o=await ge({configResult:{path:u,config:l},options:{cwd:t.cwd,yes:t.yes,withExamples:!1,withDocs:!1,withTests:!1},itemPaths:a,items:n});if(o.isErr())return(0,F.err)(o.error);let{neededDependencies:c,neededEnvVars:d,neededFiles:f}=o.value,p=await s({files:f,options:t});if(p.isErr())return(0,F.err)(p.error);let m=p.value;if(Ee.success(`Updated ${I.default.green(m.length)} files`),d){let e=await v(d,{options:t});e&&Ee.success(`Updated ${I.default.green(Object.keys(e).length)} environment variables`)}c.dependencies.push(...ie.dependencies),c.devDependencies.push(...ie.devDependencies)}if(l.paths!==void 0){let e=await It(l.paths,{config:{path:u,code:p}});if(e.isErr())return(0,F.err)(e.error);p=e.value;let t=A(u,p);if(t.isErr())return(0,F.err)(t.error);Ee.success(`Updated paths`)}return await y(ie,{options:t,config:l}),(0,F.ok)()}async function V_(e,{configCode:t,configPath:n,options:r,pluginChoices:i,config:a}){let o=await H_(e,{configCode:t,configPath:n,options:r,pluginChoices:i});if(o.isErr())return(0,F.err)(o.error);t=o.value;let s=await U_(e,{configCode:t,configPath:n,options:r,config:a});return s.isErr()?(0,F.err)(s.error):(t=s.value,(0,F.ok)(t))}async function H_(e,{configCode:t,configPath:n,options:r,pluginChoices:i}){if(!e.manifest.plugins)return(0,F.ok)(t);for(let[a,o]of Object.entries(e.manifest.plugins)){let e=await W_(o,{pluginChoices:i,options:r,type:a.slice(0,-1),config:{path:n,code:t}});if(e.isErr())return(0,F.err)(e.error);let s=e.value,c=await t_({plugins:s,key:a,config:{path:n,code:t}});if(c.isErr())return(0,F.err)(c.error);t=c.value}return(0,F.ok)(t)}async function U_(e,{configCode:t,configPath:n,config:r,options:i}){let a=Array.from(new Set(e.manifest.items.flatMap(e=>e.files.filter(e=>e.target===void 0).map(e=>ne(e.type))))),o=r?.paths??{};if(!i.yes&&a.length>0){let t=await De({message:`Which paths would you like to configure?`,options:a.map(t=>({label:t,value:t,hint:e.manifest.defaultPaths?.[t]?`Default: ${e.manifest.defaultPaths?.[t]}`:void 0})),required:!1});if(N(t)&&(P(`Canceled!`),process.exit(0)),t.length>0)for(let n of t){let t=o[n]??e.manifest.defaultPaths?.[n],r=await Ae({message:`Where should ${n} be added in your project?`,validate(e){if(!e||e.trim()===``)return`Please provide a value`},placeholder:t||`./src/${n}`,defaultValue:t,initialValue:t});N(r)&&(P(`Canceled!`),process.exit(0)),o[n]=r}}return o={...e.manifest.defaultPaths,...o},await It(o,{config:{path:n,code:t}})}async function W_(e,{pluginChoices:t,options:n,type:r,config:i}){let a=[],o=(e,n)=>{t.set(e.packageName,{install:n,plugin:e}),a.push(e)},s=await n_({config:i,plugins:e});for(let e of s){if(t.has(e.package))continue;let i=a_(e.package,r);if(i.isErr())return(0,F.err)(i.error);let a={name:i.value.name,packageName:e.package,version:e.version};if(e.optional!==!0){o(a,!0);continue}let s=n.yes;if(!n.yes){let t=await je({message:`Would you like to add the ${I.default.cyan(e.package)} ${r} plugin?`});N(t)&&(P(`Canceled!`),process.exit(0)),s=t}if(!s){t.set(e.package,{install:!1,plugin:a});continue}o(a,!0)}return(0,F.ok)(a)}function G_(){return`import { defineConfig } from 'jsrepo';

export default defineConfig({
    // configure where stuff comes from here
    registries: [],
    // configure were stuff goes here
    paths: {},
});`}var K_=t(((e,t)=>{t.exports=n(`events`)})),q_=t(((e,t)=>{t.exports=class{constructor(e){if(!(e>0)||e-1&e)throw Error(`Max size for a FixedFIFO should be a power of two`);this.buffer=Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]===void 0?(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0):!1}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}})),J_=t(((e,t)=>{let n=q_();t.exports=class{constructor(e){this.hwm=e||16,this.head=new n(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let t=this.head;this.head=t.next=new n(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}})),Y_=t(((e,t)=>{function n(e){return Buffer.isBuffer(e)||e instanceof Uint8Array}function r(e){return Buffer.isEncoding(e)}function i(e,t,n){return Buffer.alloc(e,t,n)}function a(e){return Buffer.allocUnsafe(e)}function o(e){return Buffer.allocUnsafeSlow(e)}function s(e,t){return Buffer.byteLength(e,t)}function c(e,t){return Buffer.compare(e,t)}function l(e,t){return Buffer.concat(e,t)}function u(e,t,n,r,i){return b(e).copy(t,n,r,i)}function d(e,t){return b(e).equals(t)}function f(e,t,n,r,i){return b(e).fill(t,n,r,i)}function p(e,t,n){return Buffer.from(e,t,n)}function m(e,t,n,r){return b(e).includes(t,n,r)}function h(e,t,n,r){return b(e).indexOf(t,n,r)}function g(e,t,n,r){return b(e).lastIndexOf(t,n,r)}function _(e){return b(e).swap16()}function v(e){return b(e).swap32()}function y(e){return b(e).swap64()}function b(e){return Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)}function x(e,t,n,r){return b(e).toString(t,n,r)}function S(e,t,n,r,i){return b(e).write(t,n,r,i)}function C(e,t){return b(e).readDoubleBE(t)}function w(e,t){return b(e).readDoubleLE(t)}function T(e,t){return b(e).readFloatBE(t)}function ee(e,t){return b(e).readFloatLE(t)}function te(e,t){return b(e).readInt32BE(t)}function E(e,t){return b(e).readInt32LE(t)}function ne(e,t){return b(e).readUInt32BE(t)}function D(e,t){return b(e).readUInt32LE(t)}function O(e,t,n){return b(e).writeDoubleBE(t,n)}function k(e,t,n){return b(e).writeDoubleLE(t,n)}function A(e,t,n){return b(e).writeFloatBE(t,n)}function re(e,t,n){return b(e).writeFloatLE(t,n)}function ie(e,t,n){return b(e).writeInt32BE(t,n)}function ae(e,t,n){return b(e).writeInt32LE(t,n)}function oe(e,t,n){return b(e).writeUInt32BE(t,n)}function se(e,t,n){return b(e).writeUInt32LE(t,n)}t.exports={isBuffer:n,isEncoding:r,alloc:i,allocUnsafe:a,allocUnsafeSlow:o,byteLength:s,compare:c,concat:l,copy:u,equals:d,fill:f,from:p,includes:m,indexOf:h,lastIndexOf:g,swap16:_,swap32:v,swap64:y,toBuffer:b,toString:x,write:S,readDoubleBE:C,readDoubleLE:w,readFloatBE:T,readFloatLE:ee,readInt32BE:te,readInt32LE:E,readUInt32BE:ne,readUInt32LE:D,writeDoubleBE:O,writeDoubleLE:k,writeFloatBE:A,writeFloatLE:re,writeInt32BE:ie,writeInt32LE:ae,writeUInt32BE:oe,writeUInt32LE:se}})),X_=t(((e,t)=>{let n=Y_();t.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return n.toString(e,this.encoding)}flush(){return``}}})),Z_=t(((e,t)=>{let n=Y_();t.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let t=!0;for(let n=Math.max(0,e.byteLength-4),r=e.byteLength;n<r&&t;n++)t=e[n]<=127;if(t)return n.toString(e,`utf8`)}let t=``;for(let n=0,r=e.byteLength;n<r;n++){let r=e[n];if(this.bytesNeeded===0){r<=127?t+=String.fromCharCode(r):(this.bytesSeen=1,r>=194&&r<=223?(this.bytesNeeded=2,this.codePoint=r&31):r>=224&&r<=239?(r===224?this.lowerBoundary=160:r===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=r&15):r>=240&&r<=244?(r===240&&(this.lowerBoundary=144),r===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=r&7):t+=`�`);continue}if(r<this.lowerBoundary||r>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,t+=`�`;continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|r&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(t+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return t}flush(){let e=this.bytesNeeded>0?`�`:``;return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}})),Q_=t(((e,t)=>{let n=X_(),r=Z_();t.exports=class{constructor(e=`utf8`){switch(this.encoding=i(e),this.encoding){case`utf8`:this.decoder=new r;break;case`utf16le`:case`base64`:throw Error(`Unsupported encoding: `+this.encoding);default:this.decoder=new n(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e==`string`?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let t=``;return e&&(t=this.push(e)),t+=this.decoder.flush(),t}};function i(e){switch(e=e.toLowerCase(),e){case`utf8`:case`utf-8`:return`utf8`;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return`utf16le`;case`latin1`:case`binary`:return`latin1`;case`base64`:case`ascii`:case`hex`:return e;default:throw Error(`Unknown encoding: `+e)}}})),$_=t(((e,t)=>{let{EventEmitter:n}=K_(),r=Error(`Stream was destroyed`),i=Error(`Premature close`),a=J_(),o=Q_(),s=typeof queueMicrotask>`u`?e=>global.process.nextTick(e):queueMicrotask,c=(1<<29)-1,l=c^1;c^2;let u=1024,d=2048,f=4096,p=8192,m=16384,h=32768,g=65536,_=131072;16|g,f|128;let v=256|_;c^16,c^64,c^(64|g);let y=c^g;c^256,c^(128|p),c^u;let b=c^768,x=c^h;c^32;let S=c^_;c^v;let C=1<<18,w=2<<18,T=4<<18,ee=8<<18,te=16<<18,E=32<<18,ne=64<<18,D=128<<18,O=256<<18,k=512<<18,A=1024<<18;c^(C|O);let re=c^T;c^(C|k),c^te,c^ee;let ie=c^D;c^w;let ae=c^A,oe=16|C,se=c^oe,ce=m|E,le=14|ce;re&536870847;let ue=D|h,j=15|ue&se;u|16399;let de=m|143;u|143,u|16398,h|1,k|8388623,ee|te,ee|C;let fe=270794767;T|C,C|O,E|134217742;let pe=Symbol.asyncIterator||Symbol(`asyncIterator`);var M=class{constructor(e,{highWaterMark:t=16384,map:n=null,mapWritable:r,byteLength:i,byteLengthWritable:o}={}){this.stream=e,this.queue=new a,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||i||We,this.map=r||n,this.afterWrite=be.bind(this),this.afterUpdateNextTick=N.bind(this)}get ended(){return(this.stream._duplexState&E)!==0}push(e){return this.stream._duplexState&142606350?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=ee,!0):(this.stream._duplexState|=6291456,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=534773759),e}end(e){typeof e==`function`?this.stream.once(`finish`,e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|k)&re}autoBatch(e,t){let n=[],r=this.stream;for(n.push(e);(r._duplexState&fe)===2359296;)n.push(r._writableState.shift());if(r._duplexState&15)return t(null);r._writev(n,t)}update(){let e=this.stream;e._duplexState|=w;do{for(;(e._duplexState&fe)===ee;){let t=this.shift();e._duplexState|=67371008,e._write(t,this.afterWrite)}e._duplexState&1310720||this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=536346623}updateNonPrimary(){let e=this.stream;if((e._duplexState&144965647)===k){e._duplexState|=C,e._final(ve.bind(this));return}if((e._duplexState&14)==4){(e._duplexState&ue)===0&&(e._duplexState|=oe,e._destroy(ye.bind(this)));return}(e._duplexState&j)===1&&(e._duplexState=(e._duplexState|oe)&l,e._open(P.bind(this)))}continueUpdate(){return(this.stream._duplexState&D)===0?!1:(this.stream._duplexState&=ie,!0)}updateCallback(){(this.stream._duplexState&35127311)===T?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&D)===0&&(this.stream._duplexState|=D,(this.stream._duplexState&w)===0&&s(this.afterUpdateNextTick))}},me=class{constructor(e,{highWaterMark:t=16384,map:n=null,mapReadable:r,byteLength:i,byteLengthReadable:o}={}){this.stream=e,this.queue=new a,this.highWaterMark=t===0?1:t,this.buffered=0,this.readAhead=t>0,this.error=null,this.pipeline=null,this.byteLength=o||i||We,this.map=r||n,this.pipeTo=null,this.afterRead=xe.bind(this),this.afterUpdateNextTick=Se.bind(this)}get ended(){return(this.stream._duplexState&m)!==0}pipe(e,t){if(this.pipeTo!==null)throw Error(`Can only pipe to one destination`);if(typeof t!=`function`&&(t=null),this.stream._duplexState|=512,this.pipeTo=e,this.pipeline=new ge(this.stream,e,t),t&&this.stream.on(`error`,Ge),Le(e))e._writableState.pipeline=this.pipeline,t&&e.on(`error`,Ge),e.on(`finish`,this.pipeline.finished.bind(this.pipeline));else{let t=this.pipeline.done.bind(this.pipeline,e),n=this.pipeline.done.bind(this.pipeline,e,null);e.on(`error`,t),e.on(`close`,n),e.on(`finish`,this.pipeline.finished.bind(this.pipeline))}e.on(`drain`,_e.bind(this)),this.stream.emit(`piping`,e),e.emit(`pipe`,this.stream)}push(e){let t=this.stream;return e===null?(this.highWaterMark=0,t._duplexState=(t._duplexState|u)&536805311,!1):this.map!==null&&(e=this.map(e),e===null)?(t._duplexState&=y,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),t._duplexState=(t._duplexState|128)&y,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=536862591),e}unshift(e){let t=[this.map===null?e:this.map(e)];for(;this.buffered>0;)t.push(this.shift());for(let e=0;e<t.length-1;e++){let n=t[e];this.buffered+=this.byteLength(n),this.queue.push(n)}this.push(t[t.length-1])}read(){let e=this.stream;if((e._duplexState&de)===128){let t=this.shift();return this.pipeTo!==null&&this.pipeTo.write(t)===!1&&(e._duplexState&=b),(e._duplexState&d)!==0&&e.emit(`data`,t),t}return this.readAhead===!1&&(e._duplexState|=_,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&de)===128&&e._duplexState&768;){let t=this.shift();this.pipeTo!==null&&this.pipeTo.write(t)===!1&&(e._duplexState&=b),(e._duplexState&d)!==0&&e.emit(`data`,t)}}update(){let e=this.stream;e._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&214047)===_;)e._duplexState|=65552,e._read(this.afterRead),this.drain();(e._duplexState&12431)==4224&&(e._duplexState|=p,e.emit(`readable`)),e._duplexState&80||this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=536870879}updateNonPrimary(){let e=this.stream;if((e._duplexState&1167)===u&&(e._duplexState=(e._duplexState|m)&536869887,e.emit(`end`),(e._duplexState&le)===ce&&(e._duplexState|=4),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&14)==4){(e._duplexState&ue)===0&&(e._duplexState|=oe,e._destroy(ye.bind(this)));return}(e._duplexState&j)===1&&(e._duplexState=(e._duplexState|oe)&l,e._open(P.bind(this)))}continueUpdate(){return(this.stream._duplexState&h)===0?!1:(this.stream._duplexState&=x,!0)}updateCallback(){(this.stream._duplexState&32879)==64?this.update():this.updateNextTick()}updateNextTickIfOpen(){this.stream._duplexState&32769||(this.stream._duplexState|=h,this.stream._duplexState&32||s(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&h)===0&&(this.stream._duplexState|=h,this.stream._duplexState&32||s(this.afterUpdateNextTick))}},he=class{constructor(e){this.data=null,this.afterTransform=we.bind(e),this.afterFinal=null}},ge=class{constructor(e,t,n){this.from=e,this.to=t,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,t){if(t&&(this.error=t),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&m)===0||!this.pipeToFinished)&&this.from.destroy(this.error||Error(`Writable stream closed prematurely`));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&m)===0&&this.to.destroy(this.error||Error(`Readable stream closed before ending`));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function _e(){this.stream._duplexState|=512,this.updateCallback()}function ve(e){let t=this.stream;e&&t.destroy(e),t._duplexState&14||(t._duplexState|=E,t.emit(`finish`)),(t._duplexState&le)===ce&&(t._duplexState|=4),t._duplexState&=402391039,(t._duplexState&w)===0?this.update():this.updateNextTick()}function ye(e){let t=this.stream;!e&&this.error!==r&&(e=this.error),e&&t.emit(`error`,e),t._duplexState|=8,t.emit(`close`);let n=t._readableState,i=t._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(t,e),i!==null){for(;i.drains!==null&&i.drains.length>0;)i.drains.shift().resolve(!1);i.pipeline!==null&&i.pipeline.done(t,e)}}function be(e){let t=this.stream;e&&t.destroy(e),t._duplexState&=469499903,this.drains!==null&&Ce(this.drains),(t._duplexState&6553615)===te&&(t._duplexState&=532676607,(t._duplexState&ne)===ne&&t.emit(`drain`)),this.updateCallback()}function xe(e){e&&this.stream.destroy(e),this.stream._duplexState&=536870895,this.readAhead===!1&&!(this.stream._duplexState&256)&&(this.stream._duplexState&=S),this.updateCallback()}function Se(){this.stream._duplexState&32||(this.stream._duplexState&=x,this.update())}function N(){(this.stream._duplexState&w)===0&&(this.stream._duplexState&=ie,this.update())}function Ce(e){for(let t=0;t<e.length;t++)--e[t].writes===0&&(e.shift().resolve(!0),t--)}function P(e){let t=this.stream;e&&t.destroy(e),t._duplexState&4||(t._duplexState&17423||(t._duplexState|=64),t._duplexState&142606351||(t._duplexState|=T),t.emit(`open`)),t._duplexState&=se,t._writableState!==null&&t._writableState.updateCallback(),t._readableState!==null&&t._readableState.updateCallback()}function we(e,t){t!=null&&this.push(t),this._writableState.afterWrite(e)}function Te(e){this._readableState!==null&&(e===`data`&&(this._duplexState|=d|v,this._readableState.updateNextTick()),e===`readable`&&(this._duplexState|=f,this._readableState.updateNextTick())),this._writableState!==null&&e===`drain`&&(this._duplexState|=ne,this._writableState.updateNextTick())}var Ee=class extends n{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener(`abort`,Ke.bind(this))),this.on(`newListener`,Te)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState===null?void 0:!0}get writable(){return this._writableState===null?void 0:!0}get destroyed(){return(this._duplexState&8)!=0}get destroying(){return(this._duplexState&14)!=0}destroy(e){this._duplexState&14||(e||=r,this._duplexState=(this._duplexState|4)&535822271,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=2,this._predestroy(),this._duplexState&=536870909,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},De=class e extends Ee{constructor(e){super(e),this._duplexState|=E|131073,this._readableState=new me(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=S),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let t=new o(e),n=this._readableState.map||Fe;return this._readableState.map=r,this;function r(e){let r=t.push(e);return r===``&&(e.byteLength!==0||t.remaining>0)?null:n(r)}}_read(e){e(null)}pipe(e,t){return this._readableState.updateNextTick(),this._readableState.pipe(e,t),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=v,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?536739583:536870655,this}static _fromAsyncIterator(t,n){let r,i=new e({...n,read(e){t.next().then(a).then(e.bind(null,null)).catch(e)},predestroy(){r=t.return()},destroy(e){if(!r)return e(null);r.then(e.bind(null,null)).catch(e)}});return i;function a(e){e.done?i.push(null):i.push(e.value)}}static from(t,n){if(Ve(t))return t;if(t[pe])return this._fromAsyncIterator(t[pe](),n);Array.isArray(t)||(t=t===void 0?[]:[t]);let r=0;return new e({...n,read(e){this.push(r===t.length?null:t[r++]),e(null)}})}static isBackpressured(e){return(e._duplexState&17422)!=0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&256)==0}[pe](){let e=this,t=null,n=null,i=null;return this.on(`error`,e=>{t=e}),this.on(`readable`,a),this.on(`close`,o),{[pe](){return this},next(){return new Promise(function(t,r){n=t,i=r;let a=e.read();a===null?e._duplexState&8&&s(null):s(a)})},return(){return c(null)},throw(e){return c(e)}};function a(){n!==null&&s(e.read())}function o(){n!==null&&s(null)}function s(a){i!==null&&(t?i(t):a===null&&(e._duplexState&m)===0?i(r):n({value:a,done:a===null}),i=n=null)}function c(t){return e.destroy(t),new Promise((n,r)=>{if(e._duplexState&8)return n({value:void 0,done:!0});e.once(`close`,function(){t?r(t):n({value:void 0,done:!0})})})}}},Oe=class extends Ee{constructor(e){super(e),this._duplexState|=1|m,this._writableState=new M(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=A}uncork(){this._duplexState&=ae,this._writableState.updateNextTick()}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&146800654)!=0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let t=e._writableState,n=(qe(e)?Math.min(1,t.queue.length):t.queue.length)+(e._duplexState&O?1:0);return n===0?Promise.resolve(!0):(t.drains===null&&(t.drains=[]),new Promise(e=>{t.drains.push({writes:n,resolve:e})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},ke=class extends De{constructor(e){super(e),this._duplexState=1|this._duplexState&_,this._writableState=new M(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=A}uncork(){this._duplexState&=ae,this._writableState.updateNextTick()}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Ae=class extends ke{constructor(e){super(e),this._transformState=new he(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,t){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let t=this._transformState.data;this._transformState.data=null,e(null),this._transform(t,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,t){t(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Me.bind(this))}},je=class extends Ae{};function Me(e,t){let n=this._transformState.afterFinal;if(e)return n(e);t!=null&&this.push(t),this.push(null),n(null)}function Ne(...e){return new Promise((t,n)=>Pe(...e,e=>{if(e)return n(e);t()}))}function Pe(e,...t){let n=Array.isArray(e)?[...e,...t]:[e,...t],r=n.length&&typeof n[n.length-1]==`function`?n.pop():null;if(n.length<2)throw Error(`Pipeline requires at least 2 streams`);let a=n[0],o=null,s=null;for(let e=1;e<n.length;e++)o=n[e],Le(a)?a.pipe(o,l):(c(a,!0,e>1,l),a.pipe(o)),a=o;if(r){let e=!1,t=Le(o)||!!(o._writableState&&o._writableState.autoDestroy);o.on(`error`,e=>{s===null&&(s=e)}),o.on(`finish`,()=>{e=!0,t||r(s)}),t&&o.on(`close`,()=>r(s||(e?null:i)))}return o;function c(e,t,n,r){e.on(`error`,r),e.on(`close`,a);function a(){if(t&&e._readableState&&!e._readableState.ended||n&&e._writableState&&!e._writableState.ended)return r(i)}}function l(e){if(!(!e||s)){s=e;for(let t of n)t.destroy(e)}}}function Fe(e){return e}function Ie(e){return!!e._readableState||!!e._writableState}function Le(e){return typeof e._duplexState==`number`&&Ie(e)}function Re(e){return!!e._readableState&&e._readableState.ended}function ze(e){return!!e._writableState&&e._writableState.ended}function Be(e,t={}){let n=e._readableState&&e._readableState.error||e._writableState&&e._writableState.error;return!t.all&&n===r?null:n}function Ve(e){return Le(e)&&e.readable}function He(e){return(e._duplexState&1)!=1||(e._duplexState&ue)!==0}function Ue(e){return typeof e==`object`&&!!e&&typeof e.byteLength==`number`}function We(e){return Ue(e)?e.byteLength:1024}function Ge(){}function Ke(){this.destroy(Error(`Stream aborted.`))}function qe(e){return e._writev!==Oe.prototype._writev&&e._writev!==ke.prototype._writev}t.exports={pipeline:Pe,pipelinePromise:Ne,isStream:Ie,isStreamx:Le,isEnded:Re,isFinished:ze,isDisturbed:He,getStreamError:Be,Stream:Ee,Writable:Oe,Readable:De,Duplex:ke,Transform:Ae,PassThrough:je}})),ev=t((e=>{let t=Y_(),n=t.from([117,115,116,97,114,0]),r=t.from([48,48]),i=t.from([117,115,116,97,114,32]),a=t.from([32,0]);e.decodeLongPath=function(e,t){return v(e,0,e.length,t)},e.encodePax=function(e){let n=``;e.name&&(n+=y(` path=`+e.name+`
`)),e.linkname&&(n+=y(` linkpath=`+e.linkname+`
`));let r=e.pax;if(r)for(let e in r)n+=y(` `+e+`=`+r[e]+`
`);return t.from(n)},e.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let i=parseInt(t.toString(e.subarray(0,r)),10);if(!i)return n;let a=t.toString(e.subarray(r+1,i-1)),o=a.indexOf(`=`);if(o===-1)return n;n[a.slice(0,o)]=a.slice(o+1),e=e.subarray(i)}return n},e.encode=function(e){let i=t.alloc(512),a=e.name,o=``;if(e.typeflag===5&&a[a.length-1]!==`/`&&(a+=`/`),t.byteLength(a)!==a.length)return null;for(;t.byteLength(a)>100;){let e=a.indexOf(`/`);if(e===-1)return null;o+=o?`/`+a.slice(0,e):a.slice(0,e),a=a.slice(e+1)}return t.byteLength(a)>100||t.byteLength(o)>155||e.linkname&&t.byteLength(e.linkname)>100?null:(t.write(i,a),t.write(i,p(e.mode&4095,6),100),t.write(i,p(e.uid,6),108),t.write(i,p(e.gid,6),116),h(e.size,i,124),t.write(i,p(e.mtime.getTime()/1e3|0,11),136),i[156]=48+u(e.type),e.linkname&&t.write(i,e.linkname,157),t.copy(n,i,257),t.copy(r,i,263),e.uname&&t.write(i,e.uname,265),e.gname&&t.write(i,e.gname,297),t.write(i,p(e.devmajor||0,6),329),t.write(i,p(e.devminor||0,6),337),o&&t.write(i,o,345),t.write(i,p(f(i),6),148),i)},e.decode=function(e,t,n){let r=e[156]===0?0:e[156]-48,i=v(e,0,100,t),a=_(e,100,8),c=_(e,108,8),u=_(e,116,8),d=_(e,124,12),p=_(e,136,12),m=l(r),h=e[157]===0?null:v(e,157,100,t),g=v(e,265,32),y=v(e,297,32),b=_(e,329,8),x=_(e,337,8),S=f(e);if(S===256)return null;if(S!==_(e,148,8))throw Error(`Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?`);if(o(e))e[345]&&(i=v(e,345,155,t)+`/`+i);else if(!s(e)&&!n)throw Error(`Invalid tar header: unknown format.`);return r===0&&i&&i[i.length-1]===`/`&&(r=5),{name:i,mode:a,uid:c,gid:u,size:d,mtime:new Date(1e3*p),type:m,linkname:h,uname:g,gname:y,devmajor:b,devminor:x,pax:null}};function o(e){return t.equals(n,e.subarray(257,263))}function s(e){return t.equals(i,e.subarray(257,263))&&t.equals(a,e.subarray(263,265))}function c(e,t,n){return typeof e==`number`?(e=~~e,e>=t?t:e>=0||(e+=t,e>=0)?e:0):n}function l(e){switch(e){case 0:return`file`;case 1:return`link`;case 2:return`symlink`;case 3:return`character-device`;case 4:return`block-device`;case 5:return`directory`;case 6:return`fifo`;case 7:return`contiguous-file`;case 72:return`pax-header`;case 55:return`pax-global-header`;case 27:return`gnu-long-link-path`;case 28:case 30:return`gnu-long-path`}return null}function u(e){switch(e){case`file`:return 0;case`link`:return 1;case`symlink`:return 2;case`character-device`:return 3;case`block-device`:return 4;case`directory`:return 5;case`fifo`:return 6;case`contiguous-file`:return 7;case`pax-header`:return 72}return 0}function d(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r}function f(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}function p(e,t){return e=e.toString(8),e.length>t?`7777777777777777777`.slice(0,t)+` `:`0000000000000000000`.slice(0,t-e.length)+e+` `}function m(e,t,n){t[n]=128;for(let r=11;r>0;r--)t[n+r]=e&255,e=Math.floor(e/256)}function h(e,n,r){e.toString(8).length>11?m(e,n,r):t.write(n,p(e,11),r)}function g(e){let t;if(e[0]===128)t=!0;else if(e[0]===255)t=!1;else return null;let n=[],r;for(r=e.length-1;r>0;r--){let i=e[r];t?n.push(i):n.push(255-i)}let i=0,a=n.length;for(r=0;r<a;r++)i+=n[r]*256**r;return t?i:-1*i}function _(e,n,r){if(e=e.subarray(n,n+r),n=0,e[n]&128)return g(e);{for(;n<e.length&&e[n]===32;)n++;let r=c(d(e,32,n,e.length),e.length,e.length);for(;n<r&&e[n]===0;)n++;return r===n?0:parseInt(t.toString(e.subarray(n,r)),8)}}function v(e,n,r,i){return t.toString(e.subarray(n,d(e,0,n,n+r)),i)}function y(e){let n=t.byteLength(e),r=Math.floor(Math.log(n)/Math.log(10))+1;return n+r>=10**r&&r++,n+r+e}})),tv=t(((e,t)=>{let{Writable:n,Readable:r,getStreamError:i}=$_(),a=J_(),o=Y_(),s=ev(),c=o.alloc(0);var l=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new a,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return c;let t=this._next(e);if(e===t.byteLength)return t;let n=[t];for(;(e-=t.byteLength)>0;)t=this._next(e),n.push(t);return o.concat(n)}_next(e){let t=this.queue.peek(),n=t.byteLength-this._offset;if(e>=n){let e=this._offset?t.subarray(this._offset,t.byteLength):t;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,e}return this.buffered-=e,this.shifted+=e,t.subarray(this._offset,this._offset+=e)}},u=class extends r{constructor(e,t,n){super(),this.header=t,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(i(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=p(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},d=class extends n{constructor(e){super(e),e||={},this._buffer=new l,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=f,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||`utf-8`,this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=s.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case`gnu-long-path`:case`gnu-long-link-path`:case`pax-global-header`:case`pax-header`:return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type===`directory`?(this.emit(`entry`,this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit(`entry`,this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&=(this._header.name=this._gnuLongPath,null),this._gnuLongLinkPath&&=(this._header.linkname=this._gnuLongLinkPath,null),this._pax&&=(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,null)}_decodeLongHeader(e){switch(this._header.type){case`gnu-long-path`:this._gnuLongPath=s.decodeLongPath(e,this._filenameEncoding);break;case`gnu-long-link-path`:this._gnuLongLinkPath=s.decodeLongPath(e,this._filenameEncoding);break;case`pax-global-header`:this._paxGlobal=s.decodePax(e);break;case`pax-header`:this._pax=this._paxGlobal===null?s.decodePax(e):Object.assign({},this._paxGlobal,s.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=p(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(e){return this._continueWrite(e),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let t=this._stream.push(e);return this._missing===0?(this._stream.push(null),t&&this._stream._detach(),t&&this._locked===!1):t}_createStream(){return new u(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let t=this._callback;this._callback=f,t(e)}_write(e,t){this._callback=t,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:Error(`Unexpected end of data`))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(i(this)),e(null)}[Symbol.asyncIterator](){let e=null,t=null,n=null,r=null,i=null,a=this;return this.on(`entry`,c),this.on(`error`,t=>{e=t}),this.on(`close`,l),{[Symbol.asyncIterator](){return this},next(){return new Promise(s)},return(){return u(null)},throw(e){return u(e)}};function o(e){if(!i)return;let t=i;i=null,t(e)}function s(i,s){if(e)return s(e);if(r){i({value:r,done:!1}),r=null;return}t=i,n=s,o(null),a._finished&&t&&(t({value:void 0,done:!0}),t=n=null)}function c(e,a,o){i=o,a.on(`error`,f),t?(t({value:a,done:!1}),t=n=null):r=a}function l(){o(e),t&&=(e?n(e):t({value:void 0,done:!0}),n=null)}function u(e){return a.destroy(e),o(e),new Promise((t,n)=>{if(a.destroyed)return t({value:void 0,done:!0});a.once(`close`,function(){e?n(e):t({value:void 0,done:!0})})})}}};t.exports=function(e){return new d(e)};function f(){}function p(e){return e&=511,e&&512-e}})),nv=t(((e,t)=>{let r={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{t.exports=n(`fs`).constants||r}catch{t.exports=r}})),rv=t(((e,t)=>{let{Readable:n,Writable:r,getStreamError:i}=$_(),a=Y_(),o=nv(),s=ev(),c=a.alloc(1024);var l=class extends r{constructor(e,t,n){super({mapWritable:m,eagerOpen:!0}),this.written=0,this.header=t,this._callback=n,this._linkname=null,this._isLinkname=t.type===`symlink`&&!t.linkname,this._isVoid=t.type!==`file`&&t.type!==`contiguous-file`,this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let t=this._callback;this._callback=null,t(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(Error(`pack stream destroyed`));if(this._pack._finalized)return e(Error(`pack stream is already finalized`));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,t){if(this._isLinkname)return this._linkname=this._linkname?a.concat([this._linkname,e]):e,t(null);if(this._isVoid)return e.byteLength>0?t(Error(`No body allowed for this entry`)):t();if(this.written+=e.byteLength,this._pack.push(e))return t();this._pack._drain=t}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?a.toString(this._linkname,`utf-8`):``,this._pack._encode(this.header)),p(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(Error(`Size mismatch`));this._finish(),e(null)}_getError(){return i(this)||Error(`tar entry destroyed`)}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},u=class extends n{constructor(e){super(e),this._drain=f,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,t,n){if(this._finalized||this.destroying)throw Error(`already finalized or destroyed`);typeof t==`function`&&(n=t,t=null),n||=f,(!e.size||e.type===`symlink`)&&(e.size=0),e.type||=d(e.mode),e.mode||=e.type===`directory`?493:420,e.uid||=0,e.gid||=0,e.mtime||=new Date,typeof t==`string`&&(t=a.from(t));let r=new l(this,e,n);return a.isBuffer(t)?(e.size=t.byteLength,r.write(t),r.end(),r):(r._isVoid,r)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(c),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let t=s.encode(e);if(t){this.push(t);return}}this._encodePax(e)}_encodePax(e){let t=s.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:`PaxHeader`,mode:e.mode,uid:e.uid,gid:e.gid,size:t.byteLength,mtime:e.mtime,type:`pax-header`,linkname:e.linkname&&`PaxHeader`,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(s.encode(n)),this.push(t),p(this,t.byteLength),n.size=e.size,n.type=e.type,this.push(s.encode(n))}_doDrain(){let e=this._drain;this._drain=f,e()}_predestroy(){let e=i(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let t=this._pending.shift();t.destroy(e),t._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};t.exports=function(e){return new u(e)};function d(e){switch(e&o.S_IFMT){case o.S_IFBLK:return`block-device`;case o.S_IFCHR:return`character-device`;case o.S_IFDIR:return`directory`;case o.S_IFIFO:return`fifo`;case o.S_IFLNK:return`symlink`}return`file`}function f(){}function p(e,t){t&=511,t&&e.push(c.subarray(0,512-t))}function m(e){return a.isBuffer(e)?e:a.from(e)}})),iv=t((e=>{e.extract=tv(),e.pack=rv()})),av=e(me(),1),ov=e(iv(),1);const sv=it.extend({dryRun:E(),verbose:E()}),cv=new Ye(`publish`).description(`Publish your registry to jsrepo.com.`).argument(`[registries...]`,`One or more registries to publish. If not provided, publishes all registries.`).option(`--dry-run`,`Build the registry without publishing.`,!1).addOption(L.cwd).addOption(L.verbose).action(async(e,t)=>{let n=at(sv,t),r=await f({cwd:n.cwd,promptForContinueIfNull:!1});r||st(new We(n.cwd)),j();let i=await ot(lv(e,{config:r.config,options:{...n,cwd:r?x.dirname(r.path):n.cwd}}));we(pv(i)),i.publishedRegistries.some(e=>!e.skipped&&e.result.isErr())&&process.exit(1)});async function lv(e,{options:t,config:n}){let{verbose:r,spinner:a}=d({options:t}),o=performance.now();if(t.dryRun&&Ee.warn(`${I.default.bgYellow(I.default.black(` DRY RUN `))} ${I.default.dim(`No registries will be published.`)}`),!ut(n))return(0,F.err)(new Fe);let s=(n.providers??M).find(e=>e.name===`jsrepo`);if(!s)return(0,F.err)(new Ne(`jsrepo`));let c=new ve().get(s,void 0);if(!c)return(0,F.err)(new Ie(`You need to be authenticated to publish your registry.`,{suggestion:`Run ${I.default.bold("`jsrepo auth jsrepo`")} to authenticate or set the ${I.default.bold(`JSREPO_TOKEN`)} environment variable.`}));let l=i(t.cwd);if(!l)return(0,F.err)(new Ue);let u=performance.now();a.start(`Building ${e.length>0?I.default.cyan(e.join(`, `)):`all registries`}...`);let f=await lt(n,async r=>{if(e.length>0&&!e.includes(r.name))return(0,F.ok)({skipped:!0,name:r.name});let i=await p(r,{options:t,config:n});return i.isErr()?(0,F.err)(i.error):(0,F.ok)({skipped:!1,buildResult:i.value})},{cwd:t.cwd}),m=performance.now();a.stop(`Built ${I.default.green(f.length)} ${f.length>1?`registries`:`registry`} in ${I.default.green(`${(m-u).toFixed(2)}ms`)}`);let h=[],g=[];for(let e of f){if(e.isErr())return(0,F.err)(e.error);if(e.value.skipped){g.push({skipped:!0,name:e.value.name});continue}let t=uv(e.value.buildResult,{pkg:l.package});if(t.isErr())return(0,F.err)(t.error);h.push({...e.value.buildResult,version:t.value.version})}a.start(`Publishing ${I.default.green(h.length)} ${h.length>1?`registries`:`registry`}...`);let _=[];for(let e of h){let n=await dv(e,{token:c,provider:s,options:t});_.push({skipped:!1,name:e.name,version:e.version,result:n})}return a.stop(`Published ${I.default.green(_.length)} ${_.length>1?`registries`:`registry`}`),(0,F.ok)({duration:performance.now()-o,dryRun:t.dryRun,publishedRegistries:[...g,..._]})}function uv(e,{pkg:t}){let[n,r,...i]=e.name.split(`/`);if(i.length>0||!n||!n.startsWith(`@`)||!n.slice(1).match(de)||!r||!r.match(de))return(0,F.err)(new ze(e.name));if(e.version===void 0)return(0,F.err)(new Ke(e.version,e.name));let a;return a=e.version===`package`&&t.version!==void 0?t.version:e.version,a===void 0||!av.default.valid(a)?(0,F.err)(new Ke(a,e.name)):(0,F.ok)({name:e.name,version:a})}async function dv(e,{token:t,provider:n,options:r}){let i=fv(e,r.cwd);if(i.isErr())return(0,F.err)(i.error);let a=i.value,o=ov.pack();for(let e of a)o.entry({name:e.name},e.content);o.finalize();let s=await nt(o.pipe(rt()));try{let i=await fetch(`${n.baseUrl}/api/publish/v3`,{body:s,headers:{"content-type":`application/gzip`,"content-encoding":`gzip`,"x-api-key":t,"x-dry-run":r.dryRun?`1`:`0`,"x-access":e.access??`public`},method:`POST`});if(!i.ok){let t=await i.json();return(0,F.err)(new Ie(`Failed to publish ${I.default.bold(e.name)}: ${i.status} ${i.statusText} ${t.message}`,{suggestion:`Please try again.`}))}let a=await i.json();return(0,F.ok)({version:a.version,tag:a.tag})}catch(e){return(0,F.err)(new Ie(`Failed to publish registry: ${e instanceof Error?e.message:String(e)}`,{suggestion:`Please try again.`}))}}function fv(e,t){let n=[],r=S(t,`README.md`);if(ce(r)){let e=fe(r);if(e.isErr())return(0,F.err)(e.error);n.push({name:`README.md`,content:e.value})}let i={name:e.name,authors:e.authors,bugs:e.bugs,description:e.description,homepage:e.homepage,repository:e.repository,tags:e.tags,version:e.version,meta:e.meta,type:`distributed`,plugins:e.plugins,defaultPaths:e.defaultPaths,items:e.items.map(e=>({name:e.name,title:e.title,description:e.description,type:e.type,add:e.add,registryDependencies:e.registryDependencies,dependencies:e.dependencies,devDependencies:e.devDependencies,envVars:e.envVars,files:e.files.map(e=>({type:e.type,role:e.role,path:e.path,target:e.target,registryDependencies:e.registryDependencies,dependencies:e.dependencies,devDependencies:e.devDependencies})),categories:e.categories,meta:e.meta}))};n.push({name:c,content:JSON.stringify(i)});for(let t of e.items){let e={name:t.name,title:t.title,description:t.description,type:t.type,add:t.add,files:t.files.map(e=>({type:e.type,role:e.role,content:e.content,path:e.path,_imports_:e._imports_,target:e.target,registryDependencies:e.registryDependencies,dependencies:e.dependencies,devDependencies:e.devDependencies})),registryDependencies:t.registryDependencies,dependencies:t.dependencies,devDependencies:t.devDependencies,envVars:t.envVars,categories:t.categories,meta:t.meta};n.push({name:`${t.name}.json`,content:JSON.stringify(e)})}return(0,F.ok)(n)}function pv(e){return`Completed in ${I.default.green(`${e.duration.toFixed(2)}ms`)}
${e.publishedRegistries.map(e=>`   ${mv(e)}`).join(`
`)}`}function mv(e){if(e.skipped)return I.default.dim(`${I.default.dim(e.name)} >> Skipped`);if(e.result.isErr())return`${I.default.cyan(e.name)} ${I.default.dim(`→`)} ${I.default.red(e.result.error.toString())}`;let{version:t,tag:n}=e.result.value;return`${I.default.cyan(e.name)} → ${I.default.green(t)} ${I.default.dim(n??``)}`}const hv=it.extend({yes:E(),all:E(),verbose:E(),registry:D().optional(),overwrite:E(),expand:E(),maxUnchanged:ue(),withExamples:E(),withDocs:E(),withTests:E()}),gv=new Ye(`update`).description(`Update items in your project.`).argument(`[items...]`,`Names of the items you want to update. ex: (math, github/ieedan/std/math)`).option(`--registry <registry>`,`The registry to update items from.`,void 0).option(`--all`,`Update all items in the project.`,!1).option(`--with-examples`,`Include examples in the update.`,!1).option(`--with-docs`,`Include docs in the update.`,!1).option(`--with-tests`,`Include tests in the update.`,!1).addOption(L.cwd).addOption(L.yes).addOption(L.verbose).addOption(L.overwrite).addOption(L.expand).addOption(L.maxUnchanged).action(async(e,t)=>{let n=at(hv,t);j();let r=await f({cwd:n.cwd,promptForContinueIfNull:!n.yes});r||st(new We(n.cwd)),we(vv(await ot(_v(e,{...n,cwd:x.dirname(r.path)},r))))});async function _v(e,t,n){let{verbose:r,spinner:i}=d({options:t}),a=n?.config,o=a?.providers??M,c=t.registry?[t.registry]:a?.registries??[],l;if(e.length>0){let n=b(e,{providers:o,registries:c});if(n.isErr())return(0,F.err)(n.error);let{wantedItems:r,neededRegistries:a}=n.value;i.start(`Retrieving manifest${a.length>1?`s`:``} from ${I.default.cyan(a.join(`, `))}`);let s=await C(a,{cwd:t.cwd,providers:o});if(s.isErr())return i.stop(`Failed to retrieve manifests`),(0,F.err)(s.error);i.stop(`Retrieved manifest${a.length>1?`s`:``} from ${I.default.cyan(a.join(`, `))}`);let u=s.value,d=await h(r,{resolvedRegistries:u,nonInteractive:t.yes});if(d.isErr())return(0,F.err)(d.error);l=d.value}else{i.start(`Retrieving manifest${c.length>1?`s`:``} from ${I.default.cyan(c.join(`, `))}`);let e=await C(c,{cwd:t.cwd,providers:o});if(e.isErr())return i.stop(`Failed to retrieve manifests`),(0,F.err)(e.error);i.stop(`Retrieved manifest${c.length>1?`s`:``} from ${I.default.cyan(c.join(`, `))}`);let n=e.value,r=Array.from(n.entries()).flatMap(([e,t])=>t.manifest.items.filter(e=>(e.add??`when-added`)===`when-added`&&e.name!==`index`).map(e=>({item:e,registry:t}))),s=await oe({items:r.map(e=>({name:e.item.name,type:e.item.type,files:e.item.files,registry:e.registry})),config:a,options:{cwd:t.cwd,yes:!0},continueOnNoPath:!0});if(s.isErr())return(0,F.err)(s.error);let{itemPaths:u}=s.value,d=[];for(let{item:e,registry:n}of r){let r=u[`${e.type}/${e.name}`]?.path;if(r)for(let i of e.files){let o=i.path;for(let r of a?.transforms??[])o=(await r.transform({code:``,fileName:i.path,options:{cwd:t.cwd,registryUrl:n.url,item:e}})).fileName??i.path;if(ce(O({...i,path:o},{itemPath:{path:r},options:t}))){d.push({item:{...e,registry:n},registry:n});break}}}if(d.length===0)return(0,F.err)(new Pe);if(t.all)l=d.map(({item:e,registry:t})=>({item:e,registry:t}));else{let e=new Set;for(let{registry:t}of d)e.add(t.url);let t=e.size>1,n=await De({message:`Which items would you like to update?`,options:d.map(({item:e})=>({label:t?`${e.registry.url}/${e.name}`:e.name,value:`${e.registry.url}/${e.name}`}))});N(n)&&(P(`Canceled!`),process.exit(0)),l=d.filter(({item:e})=>n.includes(`${e.registry.url}/${e.name}`))}}i.start(`Fetching ${I.default.cyan(l.map(e=>e.item.name).join(`, `))}...`);let u=await be(l,{options:t});if(u.isErr())return i.stop(`Failed to fetch items`),(0,F.err)(u.error);i.stop(`Fetched ${I.default.cyan(l.map(e=>e.item.name).join(`, `))}`);let f=u.value,p=await oe({items:f,config:a,options:t});if(p.isErr())return(0,F.err)(p.error);let{itemPaths:m,updatedPaths:g}=p.value,_=await ge({configResult:n,options:t,itemPaths:m,items:f});if(_.isErr())return(0,F.err)(_.error);let{neededDependencies:x,neededEnvVars:S,neededFiles:w}=_.value,T=await s({files:w,options:t});if(T.isErr())return(0,F.err)(T.error);let ee=T.value;if(n&&g){let e=fe(n.path);if(e.isErr())return(0,F.err)(e.error);let t=e.value,r=await It(a?.paths??g,{config:{path:n.path,code:t}});if(r.isErr())return(0,F.err)(r.error);let i=A(n.path,r.value);if(i.isErr())return(0,F.err)(i.error)}let te;if(S){let e=await v(S,{options:t});if(e.isErr())return(0,F.err)(e.error);te=e.value}return(0,F.ok)({items:f,updatedDependencies:await y(x,{options:t,config:a}),updatedEnvVars:te,updatedFiles:ee,updatedPaths:g})}function vv(e){let t=[`Updated ${I.default.cyan(e.items.map(e=>e.name).join(`, `))} in your project.`];return e.updatedFiles.length>0&&t.push(`    Updated ${I.default.green(e.updatedFiles.length)} ${e.updatedFiles.length===1?`file`:`files`}.`),e.updatedPaths&&Object.keys(e.updatedPaths).length>0&&t.push(`    Updated ${I.default.green(Object.keys(e.updatedPaths).length)} ${Object.keys(e.updatedPaths).length===1?`path`:`paths`}.`),e.updatedDependencies.dependencies.length>0&&(e.updatedDependencies.installed?t.push(`    Installed ${I.default.green(e.updatedDependencies.dependencies.length)} ${e.updatedDependencies.dependencies.length===1?`dependency`:`dependencies`}.`):t.push(`    Skipped installation of ${I.default.cyan(e.updatedDependencies.dependencies.map(e=>`${e.name}${e.version?`@${e.version}`:``}`).join(`, `))}.`)),e.updatedEnvVars&&Object.keys(e.updatedEnvVars).length>0&&t.push(`    Updated ${I.default.green(Object.keys(e.updatedEnvVars).length)} ${Object.keys(e.updatedEnvVars).length===1?`environment variable`:`environment variables`}.`),t.join(`
`)}Ze.name(ye).description(w).version(g).addCommand(Rt).addCommand(Ht).addCommand(Jt).addCommand(F_).addCommand(z_).addCommand(cv).addCommand(gv).parse();export{Tt as n,Pt as t};
//# sourceMappingURL=bin.mjs.map